import{au as J,a as X,H as $,E as q,J as AA,G as j,_ as eA}from"./components.global5n24RCIC.js";import{A as tA}from"./AddPublishedToLibraryCH8DTyVO.js";import{T as IA}from"./TIIconDefaultDZ-9wHcm.js";import{U as iA}from"./UpdateSubscribersD5cY83oG.js";import{I as sA}from"./ItemAttachmentViewerDLyBYx7v.js";import{i as gA,a as oA}from"./subscription.storeDg76pqWu.js";import{I as CA}from"./ItemImageBounipmB.js";import{p as lA}from"./textrenderD9QqXPpv.js";import{d as nA,j as s,X as aA,k as t,K as C,s as g,z as l,m as r,R as o,p as W,Q as n,L as y,F as Q,P as M,r as a,ac as rA,i,N as v}from"./@vueC3Nhqlrl.js";import"./vue3-toastifyDll2FbVh.js";import"./@capacitorCjBcbZvA.js";import"./bootstrap-vue-nextDnMzdrWQ.js";import"./PopCollectionSelectorDtsi0cBR.js";import"./CreateCollectionCvnp9GSK.js";import"./ai_lookup_utilszDX_hcwM.js";import"./SelectAccountUsersC0KunEpm.js";import"./markedJKvyS0Pp.js";const dA="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/4QbSRXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAAAsAQAAAQAAACwBAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIyOjExOjA0IDEwOjMxOjM0AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAAB/AAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAAC4BQAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAfwEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A5KiiivfPkQooooAKKKQ0AIaaacaaaRSGmmmnGmmgpDTTTTjTTSLQhpppTTTSLQhpppTTTSLQhpppTTTQWhDTTSmmmkWhDTTSmkNIpDTTTSmmmkWhDTTTjTTQWhKSiikULSUUUAFLSUtAHUUUUV0HhBRRRQAUhpaaaAENNNKaaaRSENNNKaaaC0IaaaU0hpFoaaaacaaaRaGmkNKaaaRaENNNKaaaRaENNNKaaaCkIaaaWmmkWhDTTSmmmkWhDTTSmkpFoKSlpKBi0lLRQAlLSUtAHUUUUV0HhBRRRQAlIaU000DQhpppTTTSKQhpppTTTSLQhpppTTTSLQhpppxphoLQhpppxpppFoaaaacaaaRSGmkNKaaaRaENNNKaaaC0IaaaU000i0IaSg0lIsKKKKAFpKWkoAKWiigDqKKKK6DwgooooAQ000ppppDQhphpxptBaENMNONNNItCGmmlNNNItCGmmlNNNItCGmmnGmmgtDTTTSmmmkUhDTTTjTTSLQ00004000i0NNNNONNNBaEopKKRQUUUUALRSUUAFLSUtAHUUUUV0HhBSGlpDQA00004000ikNNNNONNNBaGmmmnGmmkWhDTTSmmmkWhDTTSmmmkWhDTTS000FIQ000ppppFoQ000ppppFoQ000ppDSLQ00004000i0JRS0UDEopaKACkpaSgAopaKAOooooroPCCmmlppoBCGmmlNNNItCGmmlNNNItCGmmnGmmgtCGmmlNNNItCGmmlNNNItCGmmlNNNIpCGmmlNNNBaEpppTTTSLQlNNKaaaRaENNpTSUikLRSUUDCiiloAKSlpKACiiigDqaKKK6DwhDTTSmmmgaENNNLTTSLQhpppTTTSKQhptKaQ0jRDTTTTjTTQUhppppxpppFoQ0w04000i0NNIaU000i0IaaaU000FoQ000ppppFoQ0lLSUihaKKKAEooooAKWikoAKWkooA6miikNdB4QhpppTTTSKQhpppTTTQUhDTTSmmmkWhDTTTjTDSLQhpppTSGkWhppppxppoLQ0000ppDSLQ00004000i0NNNNONNNItCGmmlNNNBaEopaSkMWkopaAEopaSgAopaSgAoopaAP/2f/hDHVodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo5NWFjNmU3MC0zODExLTQxNWQtODVmOC05MWMwN2M5ODE1YTUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YjU5OGQ2NzEtNDU5Yi00Mjg0LWFlMzUtNmY1NmI5NzI3ODE4IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MmYyYjgzMzMtZjJmMC00NmE5LWEzZDAtMmRlNWRkZDRkODNlIiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IldpbmRvd3MiIEdJTVA6VGltZVN0YW1wPSIxNjY3NTgzMDk2NTYxMzA4IiBHSU1QOlZlcnNpb249IjIuMTAuMjQiIHhtcDpDcmVhdG9yVG9vbD0iR0lNUCAyLjEwIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0OmNoYW5nZWQ9Ii8iIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NGUyNzlkZGEtNDNjNS00YWU3LTg0NGEtNTRlMDhlZTU2Nzk4IiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJHaW1wIDIuMTAgKFdpbmRvd3MpIiBzdEV2dDp3aGVuPSIyMDIyLTExLTA0VDEwOjMxOjM2Ii8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+ICsElDQ19QUk9GSUxFAAEBAAACoGxjbXMEMAAAbW50clJHQiBYWVogB+YACwAEABEAHQAdYWNzcE1TRlQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPbWAAEAAAAA0y1sY21zAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANZGVzYwAAASAAAABAY3BydAAAAWAAAAA2d3RwdAAAAZgAAAAUY2hhZAAAAawAAAAsclhZWgAAAdgAAAAUYlhZWgAAAewAAAAUZ1hZWgAAAgAAAAAUclRSQwAAAhQAAAAgZ1RSQwAAAhQAAAAgYlRSQwAAAhQAAAAgY2hybQAAAjQAAAAkZG1uZAAAAlgAAAAkZG1kZAAAAnwAAAAkbWx1YwAAAAAAAAABAAAADGVuVVMAAAAkAAAAHABHAEkATQBQACAAYgB1AGkAbAB0AC0AaQBuACAAcwBSAEcAQm1sdWMAAAAAAAAAAQAAAAxlblVTAAAAGgAAABwAUAB1AGIAbABpAGMAIABEAG8AbQBhAGkAbgAAWFlaIAAAAAAAAPbWAAEA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",mA=nA({name:"ViewPublished",components:{AddPublishedToLibrary:tA,TIIconDefault:IA,UpdateSubscribers:iA,ItemAttachmentViewer:sA,ItemImage:CA,TruncateExpand:J},mixins:[X],data(){return{imagePlaceholder:dA,itemId:null,item:null,itemRaw:null,loading:!0,parents:null,items:[],libraryItems:[],errorMessage:null,flagSubmitted:!1,flagReason:null,flagComment:null,showFS:null}},props:{itemIdProp:{type:String,required:!1}},mounted(){},computed:{itemType(){var A,e,m;return((A=this.item)==null?void 0:A.type)=="thing"?(e=this.item)==null?void 0:e.subType:(m=this.item)==null?void 0:m.type},itemSubType(){var A;return(A=this.item)==null?void 0:A.subType},isSubscribed(){return gA(this.itemId)},targetAudience(){var A,e,m;return(A=this.item)!=null&&A.targetAudiences&&((e=this.item)==null?void 0:e.targetAudiences.length)>0?this.item.targetAudiences.find(f=>f.name=="All")?"All":(m=this.item)==null?void 0:m.targetAudiences.map(f=>f.name).join(", "):null}},methods:{prettyTime:$,dateToMDYFormat:q,parseMarkdown:lA,isType(A){var e;return((e=this.item)==null?void 0:e.type)==A},getImage(A){return`https://www.google.com/s2/favicons?sz=96&domain_url=${new URL(A.url).hostname}`},imgPlaceholder(A){},async toggleSubscriptionPress(){this.currentUser?this.showModal("update-subscribers-modal"):this.showModal("please-modal")},loadPublished(){this.sendReq("/published/view",{itemId:this.itemId}).then(A=>{if(A.success&&A.result){if(this.itemRaw=A.result.info,this.itemRaw.published==!1){console.error("Error:",A),this.errorMessage="We are sorry but this item is no longer available.",this.loading=!1;return}this.item=AA(this.itemRaw),this.item.type=="col"&&(this.items=j(A.result.items)),this.loading=!1}else console.error("Error:",A),this.errorMessage="Error Loading item :'(",this.loading=!1})},async checkSubscription(){await oA.RefreshSubscriptions()},async loadParents(){const A=await this.sendReq("/published/listWithChild",{itemId:this.itemId});A.success&&A.result?(this.parents=j(A.result),this.loading=!1):(console.error("Error:",A),this.loading=!1)},startReview(){if(!this.currentUser)this.showModal("please-modal");else if(this.isAdminUser)window.location.href=`${this.appPrefix}#/review/${this.itemId}`;else return},async isInLibrary(){const A=await this.sendReq("/item/withPubOrSubId",{itemId:this.itemId});A.success&&(this.libraryItems=A.result)},selectItem(A){this.itemIdProp?this.$emit("selectItem",A):this.$router.push(`/v/${A}`)},goBack(){if(this.itemIdProp){this.$emit("back");return}window.history.length>1?this.$router.go(-1):this.$router.push("/searchPublished")},async reportIssue(){var e,m,h;if(this.flagSubmitted=!1,!this.currentUser){this.errorMessage="Please login to flag an item.";return}if(!this.flagReason){this.errorMessage="Please select a reason.";return}const A=await this.sendReq("/published/flag",{itemId:this.itemId,details:{userId:(e=this.currentUser)==null?void 0:e._id,username:(m=this.currentUser)==null?void 0:m.username,email:(h=this.currentUser)==null?void 0:h.email,flagReason:this.flagReason,flagComment:this.flagComment}});A.success?this.errorMessage=null:(console.error("Error:",A.message),this.errorMessage=A.message),this.flagSubmitted=!0},async loadPage(){this.loadPublished(),this.checkSubscription(),this.loadParents(),this.loadPublicProfile(),this.isInLibrary()}},created(){this.itemId=this.itemIdProp||this.$route.params.itemId,this.loadPage()}}),uA={class:"text-center fsImageContainer"},pA={class:"text-center m-4"},cA=["href"],hA=["href"],fA={class:"mt-0"},bA={key:0},EA={class:"my-2"},yA={key:1},QA=["href"],MA={key:0},vA={class:"d-flex flex-wrap mb-1"},BA={key:0,class:"me-3"},kA={key:1},RA={key:1,class:"text-center m-4"},TA=["href"],wA=["href"],UA={key:4,class:"container"},NA={class:"alert alert-danger"},ZA={key:5,class:"mx-2"},SA={class:"container px-1 py-0 mb-2"},DA={class:"container px-1"},GA={class:"row"},zA={key:0,class:"col-md w-100 d-flex justify-content-center"},KA={class:"col-md w-100"},jA={class:"d-flex justify-content-between align-items-center"},WA={key:0},YA={class:"text-muted larger"},HA={key:1},LA={class:"text-muted larger"},VA={class:"d-flex"},OA={class:"h4 my-"},PA={key:0,class:"d-flex"},FA={key:1},_A={key:0},xA={class:"text-muted small mb-2"},JA={key:0},XA={key:1},$A=["href"],qA={class:"d-flex mb-2 small text-muted"},Ae={key:1,class:"my-2"},ee=["innerHTML"],te={class:"d-flex align-items-center mt-2"},Ie={key:1,class:"small ms-1"},ie={class:"small"},se={key:0,class:"d-flex flex-wrap flex-gap-1 text-muted mt-2"},ge={key:0},oe={key:1,title:"Number of Subscribers"},Ce={key:1,class:"d-flex flex-wrap flex-gap-sm my-3"},le={class:"d-flex flex-wrap mt-3 flex-gap-sm"},ne={key:0,class:"fillrow text-muted rounded px-2",title:"Educational Value"},ae={key:1,class:"fillrow text-muted rounded px-2"},re={key:2,class:"fillrow text-muted rounded px-2"},de={key:3,class:"fillrow text-muted rounded px-2"},me={key:4,class:"fillrow text-muted rounded px-2"},ue={key:5,class:"fillrow text-muted rounded px-2"},pe={key:6,class:"d-flex flex-wrap fillrow text-muted rounded px-2"},ce={class:"d-flex flex-gap-1 mb-2 mt-3"},he={key:0,class:"d-flex flex-gap-sm align-items-center"},fe=["title","variant"],be={key:0,role:"button",class:"nowrap btn btn-link hoverrow rounded fillrow border shadow-sm"},Ee={key:1,role:"button",class:"nowrap btn btn-primary"},ye={key:6,class:"mt-4 container"},Qe={class:"d-flex flex-wrap flex-gap-1"},Me=["href","onClick"],ve={class:"card-image-container"},Be=["src","alt"],ke={class:"card-body small p-1 align-items-center d-flex justify-content-center"},Re={class:"card-text m-0 text-center"},Te={key:7,class:"mt-4"},we={class:"d-flex flex-wrap justify-content-center flex-gap-1"},Ue={class:"d-flex flex-column h-100"},Ne={class:"d-flex justify-content-center"},Ze=["href","onClick"],Se={class:"mb-1 p-2"},De=["href","onClick"],Ge={key:0},ze=["href"],Ke={key:1,class:"d-flex flex-gap-xs align-items-center"},je={class:"text-muted small"},We=["onClick"],Ye={key:0,class:"small text-muted"},He={class:"mt-2 mb-1 p-2 mt-auto"},Le={key:0},Ve={class:"divfit py-1 px-2 my-2 rounded border small",title:"Remark"},Oe={class:"small text-muted"},Pe={key:1,class:"pb-2"},Fe={class:"text-muted-extra xsmall"},_e={key:8};function xe(A,e,m,h,f,Je){var N,Z,S,D,G,z;const d=a("b-icon"),k=a("ItemAttachmentViewer"),u=a("b-modal"),Y=a("UpdateSubscribers"),p=a("b-form-select-option"),H=a("b-form-select"),R=a("b-form-group"),L=a("b-form-textarea"),V=a("b-alert"),T=a("b-button"),O=a("AddPublishedToLibrary"),w=a("b-dropdown-item"),P=a("b-dropdown"),F=a("TruncateExpand"),b=a("router-link"),U=a("b-rating"),_=a("TIIconDefault"),x=a("ItemImage"),E=rA("b-modal");return i(),s("div",null,[A.showFS?(i(),s("div",{key:0,class:"fsModal",onKeydown:e[2]||(e[2]=aA(I=>A.showFS=!1,["esc"]))},[t("div",{class:"fsModalClose",role:"button",onClick:e[0]||(e[0]=I=>A.showFS=!1)},[C(d,{icon:"x-lg",class:"fsModalCloseIcon"})]),t("div",uA,[C(k,{item:A.item,isPub:!0,isFS:!0,onClose:e[1]||(e[1]=I=>A.showFS=!1)},null,8,["item"])])],32)):g("",!0),C(u,{lazy:"true",id:"please-modal",title:"Please sign-in or register.","hide-footer":""},{default:l(()=>[t("div",pA,[t("a",{class:"btn btn-lg btn-primary my-4 mx-2",href:`${A.appPrefix}#/register`}," Register ",8,cA),t("a",{class:"btn btn-lg btn-outline-primary my-4 mx-2",href:A.appPrefix}," Sign-In ",8,hA)])]),_:1}),A.item?(i(),r(u,{key:1,lazy:"true",id:"update-subscribers-modal",size:"lg",title:"Manage Subscriptions","hide-footer":""},{default:l(()=>[C(Y,{item:A.item,refId:A.itemId,refType:A.item.type=="col"?"pub_col":"pub_item_feed",onUpdate:e[3]||(e[3]=I=>{A.closeModal("update-subscribers-modal"),A.loadPublished()})},null,8,["item","refId","refType"])]),_:1})):g("",!0),A.item?(i(),r(u,{key:2,lazy:"true",id:"report-modal",title:"Report issue with an Item","hide-footer":""},{default:l(()=>[t("div",fA,[A.flagSubmitted?(i(),s("div",yA,e[20]||(e[20]=[t("div",{class:"text-center py-4"}," Thank you! Someone from our curation team will review this item. ",-1)]))):(i(),s("div",bA,[t("div",EA,[e[12]||(e[12]=t("div",{class:"text-muted"},"Item Name:",-1)),n(" "+o(A.item.name),1)]),e[19]||(e[19]=t("hr",null,null,-1)),C(R,{class:"form-group"},{default:l(()=>[C(H,{modelValue:A.flagReason,"onUpdate:modelValue":e[4]||(e[4]=I=>A.flagReason=I)},{default:l(()=>[C(p,{value:null},{default:l(()=>e[13]||(e[13]=[n("Please select one")])),_:1}),C(p,{value:"broken"},{default:l(()=>e[14]||(e[14]=[n("Broken Link(s)")])),_:1}),C(p,{value:"inappropriateContentOrAds"},{default:l(()=>e[15]||(e[15]=[n("Inappropriate Content or Ads")])),_:1}),C(p,{value:"incorrectMetadata"},{default:l(()=>e[16]||(e[16]=[n("Incorrect Description/Metadata")])),_:1}),C(p,{value:"other"},{default:l(()=>e[17]||(e[17]=[n("other")])),_:1})]),_:1},8,["modelValue"])]),_:1}),C(R,{class:"form-group"},{default:l(()=>[C(L,{rows:"6",modelValue:A.flagComment,"onUpdate:modelValue":e[5]||(e[5]=I=>A.flagComment=I),placeholder:"Additional Information"},null,8,["modelValue"])]),_:1}),A.errorMessage?(i(),r(V,{key:0,class:"my-4",variant:"danger","model-value":!0,innerHTML:A.errorMessage},null,8,["innerHTML"])):g("",!0),C(T,{variant:"primary",class:"float-right mt-4",onClick:e[6]||(e[6]=I=>A.reportIssue())},{default:l(()=>e[18]||(e[18]=[n(" Submit ")])),_:1})]))])]),_:1})):g("",!0),A.libraryItems?(i(),r(u,{key:3,lazy:"true",id:"library-items-modal",title:"Matching Items in your library.","hide-footer":""},{default:l(()=>[(i(!0),s(Q,null,M(A.libraryItems,I=>(i(),s("div",{class:"mt-2",key:I._id},[t("div",null,[t("a",{href:`${A.appPrefix}#${I.type=="col"?"collection":"item"}/${I._id}`},o(I.url),9,QA)]),t("div",null,"id:"+o(I._id),1),e[21]||(e[21]=t("hr",null,null,-1))]))),128))]),_:1})):g("",!0),C(u,{lazy:"true",id:"details-modal",title:"Details",size:"xl"},{default:l(()=>{var I;return[A.item.easyId?(i(),s("div",MA,"Easy Id : "+o(A.item.easyId),1)):g("",!0),t("div",vA,[(I=A.itemRaw)!=null&&I.patterns?(i(),s("div",BA," URIs: "+o(A.itemRaw.patterns.join(", ")),1)):g("",!0)]),A.config.debugMode?(i(),s("div",kA,[e[22]||(e[22]=n(" DEBUG MODE JSON ")),t("pre",null,o(A.itemRaw),1),e[23]||(e[23]=t("hr",null,null,-1)),e[24]||(e[24]=n(" ITEM ")),t("pre",null,o(A.item),1),e[25]||(e[25]=t("hr",null,null,-1)),e[26]||(e[26]=n(" ITEMS ")),t("pre",null,o(A.items),1)])):g("",!0)]}),_:1}),C(u,{lazy:"true",id:"addtolib-modal",size:"lg",title:"Add/Import to Library","hide-footer":""},{default:l(()=>[A.currentUser?(i(),r(O,{key:0,itemId:A.itemId,onUpdated:e[7]||(e[7]=I=>{A.closeModal("addtolib-modal"),A.loadPage()})},null,8,["itemId"])):(i(),s("div",RA,[t("a",{class:"btn btn-lg btn-primary my-4 mx-2",href:`${A.appPrefix}#/register`}," Register ",8,TA),t("a",{class:"btn btn-lg btn-outline-primary my-4 mx-2",href:A.appPrefix}," Sign-In ",8,wA)]))]),_:1}),A.errorMessage?(i(),s("div",UA,[t("div",NA,o(A.errorMessage),1)])):g("",!0),A.item?(i(),s("div",ZA,[t("div",SA,[t("button",{class:"btn btn-link p-1 larger",onClick:e[8]||(e[8]=I=>A.goBack())},[C(d,{icon:"chevron-left"})])]),t("div",DA,[t("div",GA,[t("div",{class:W(["d-flex flex-gap-1 mb-2",A.isMobile?"flex-wrap":""])},[A.item.defaultImage?(i(),s("div",zA,[C(k,{item:A.item,isPub:!0,onClick:e[9]||(e[9]=I=>A.showFS=!0)},null,8,["item"])])):g("",!0),t("div",KA,[t("div",null,[t("div",jA,[A.itemType=="col"?(i(),s("div",WA,[t("div",YA,[C(d,{class:"me-1",icon:`${A.item.publishType=="feed"?"rss":"collection"}`},null,8,["icon"]),n(" Collection "+o(((N=A.item)==null?void 0:N.publishType)=="feed"?"Feed":""),1)])])):(i(),s("div",HA,[t("div",LA,[C(d,{icon:A.item.typeIcon,class:"me-1"},null,8,["icon"]),n(" "+o(A.item.typeName),1)])])),t("div",VA,[y((i(),r(T,{title:"Report",size:"sm",variant:"link"},{default:l(()=>[C(d,{icon:"flag"})]),_:1})),[[E,void 0,void 0,{"report-modal":!0}]]),A.publicProfile&&A.publicProfile.curator?(i(),r(P,{key:0,"no-caret":"",right:"",variant:"link"},{"button-content":l(()=>[C(d,{icon:"three-dots-vertical"})]),default:l(()=>[A.publicProfile&&A.publicProfile.curator?(i(),r(w,{key:0,title:"Curate",to:`/curate/${A.item._id}`},{default:l(()=>e[27]||(e[27]=[n(" Curate ")])),_:1},8,["to"])):g("",!0),y((i(),r(w,null,{default:l(()=>e[28]||(e[28]=[n(" Details ")])),_:1})),[[E,void 0,void 0,{"details-modal":!0}]])]),_:1})):g("",!0)])]),t("div",OA,[A.isType("col")?(i(),s("div",PA,o(A.item.name),1)):(i(),s("div",FA,o(A.item.name),1))]),A.itemType!="note"?(i(),s("div",_A,[C(F,{content:A.item.description,class:"wwrap text-muted small"},{default:l(()=>e[29]||(e[29]=[t("span",{class:"linklike ms-1",role:"button"},"more",-1)])),_:1},8,["content"])])):g("",!0),t("div",xA,[A.item.type=="col"?(i(),s("span",JA,[C(b,{to:`/profile/${A.item.publicUserId}`,class:"text-muted"},{default:l(()=>[C(d,{icon:"person-fill"}),n(" "+o(A.item.username),1)]),_:1},8,["to"])])):g("",!0),A.item.type=="link"?(i(),s("span",XA,[t("a",{target:"_blank",href:A.item.url},o(A.textTruncate(A.item.url,50)),9,$A)])):g("",!0)]),t("div",qA,[A.item.curated?(i(),r(b,{key:0,class:"me-1",to:"/curationInfo",title:`Curated by Kindredly on ${A.dateToMDYFormat(A.item.curatedDate)}`},{default:l(()=>[C(d,{icon:"patch-check-fill"})]),_:1},8,["title"])):g("",!0),t("span",null,o(A.dateToMDYFormat(A.item.createdAt)!=A.dateToMDYFormat(A.item.updatedAt)?"updated on "+A.dateToMDYFormat(A.item.updatedAt):"published on "+A.dateToMDYFormat(A.item.createdAt)),1)]),(S=(Z=A.item)==null?void 0:Z.info)!=null&&S.value?(i(),s("div",Ae,[t("div",{class:"noteTextBox",innerHTML:A.parseMarkdown((G=(D=A.item)==null?void 0:D.info)==null?void 0:G.value)},null,8,ee)])):g("",!0),t("div",te,[t("span",{onClick:e[10]||(e[10]=I=>A.startReview()),role:"button"},[C(U,{class:"ps-0 pe-1","no-border":"",readonly:"",size:"sm",inline:"",value:A.item.overallRating},null,8,["value"])]),A.item.numRatings&&A.item.numRatings>0?(i(),r(b,{key:0,title:"number of ratings",class:"small",to:`/reviewlist/${A.item._id}`},{default:l(()=>[n(o(A.item.numRatings),1)]),_:1},8,["to"])):(i(),s("span",Ie," no ratings yet "))]),t("div",ie,[A.item.type=="col"?(i(),s("div",se,[A.item.itemCount?(i(),s("div",ge,o(A.item.itemCount)+" items",1)):g("",!0),A.item.statSubCount?(i(),s("div",oe,o(A.item.statSubCount)+" subscribers ",1)):g("",!0)])):g("",!0),A.item.categories&&A.item.categories.length>0?(i(),s("div",Ce,[(i(!0),s(Q,null,M(A.item.categories,(I,c)=>(i(),s("div",{key:c,class:"d-flex flex-gap-sm align-items-center text-muted"},[C(b,{to:`/searchPublished?category=${I}`,class:"border rounded px-2 py-1 text-muted"},{default:l(()=>[n(o(I),1)]),_:2},1032,["to"])]))),128))])):g("",!0),t("div",le,[A.item.eduValue?(i(),s("div",ne,o(A.item.eduValue.name),1)):g("",!0),A.item.minAgeGroup?(i(),s("div",ae," Min Age Group: "+o((z=A.item)==null?void 0:z.minAgeGroup.name),1)):g("",!0),A.targetAudience?(i(),s("div",re," Target Audience: "+o(A.targetAudience),1)):g("",!0),A.item.cost?(i(),s("div",de,o(A.item.cost.name),1)):g("",!0),A.item.ads?(i(),s("div",me," Ads: "+o(A.item.ads.name),1)):g("",!0),A.item.costDetails&&A.item.costDetails.length>0?(i(),s("div",ue,o(A.item.costDetails.map(I=>I.name).join(", ")),1)):g("",!0),A.item.content&&A.item.content.length>0?(i(),s("div",pe," Content includes: "+o(A.item.content.map(I=>I.name).join(", ")),1)):g("",!0)])])]),t("div",ce,[A.item.type=="col"?(i(),s("div",he,[t("div",{role:"button",class:"d-flex align-items-center flex-gap-sm btn btn-primary",title:A.isSubscribed?"subscribed":"subscribe",variant:(A.isSubscribed,"link"),onClick:e[11]||(e[11]=I=>A.toggleSubscriptionPress())},[A.isSubscribed?(i(),r(d,{key:0,icon:"check"})):g("",!0),n(" "+o(A.isSubscribed?"Subscribed":"Subscribe"),1)],8,fe)])):g("",!0),t("div",null,[A.libraryItems.length>0?y((i(),s("div",be,[C(d,{icon:"check-lg",class:"success-color"}),e[30]||(e[30]=n(" In library "))])),[[E,void 0,void 0,{"addtolib-modal":!0}]]):A.item.publishType!="feed"?y((i(),s("div",Ee,e[31]||(e[31]=[n(" Add to library ")]))),[[E,void 0,void 0,{"addtolib-modal":!0}]]):g("",!0)])])])],2)])])])):g("",!0),A.parents&&A.parents.length>0?(i(),s("div",ye,[e[32]||(e[32]=t("h5",{class:"mb-3"},"Collections",-1)),t("div",Qe,[(i(!0),s(Q,null,M(A.parents,(I,c)=>(i(),s("a",{href:`#/v/${I._id}`,key:c,onClick:v(B=>A.selectItem(I._id),["prevent"]),class:"card shadow colItemMini rounded notextdecoration"},[t("div",ve,[I.imageFilename?(i(),s("img",{key:0,class:"card-image-top rounded-top card-image-cls",src:I.imageFilename,alt:I.imageFilename},null,8,Be)):(i(),r(_,{key:1,text:I.name,hideText:!0,class:"card-image-top rounded-top",style:{}},null,8,["text"]))]),t("div",ke,[t("p",Re,o(I.name),1)])],8,Me))),128))])])):g("",!0),A.items&&A.items.length>0?(i(),s("div",Te,[e[33]||(e[33]=t("hr",null,null,-1)),t("div",we,[(i(!0),s(Q,null,M(A.items,(I,c)=>{var B;return i(),s("div",{key:c,class:W(["colItemBig rounded wwrap hoverrow",A.isMobile?"":" "])},[t("div",Ue,[t("div",Ne,[t("a",{href:`#/v/${I._id}`,onClick:v(K=>A.selectItem(I._id),["prevent"]),class:"collectionItemImageHolderX"},[C(x,{item:I,class:"rounded-top itemImageViewX",iconSize:3},null,8,["item"])],8,Ze)]),t("div",Se,[t("div",null,[t("a",{href:`#/v/${I._id}`,class:"link",onClick:v(K=>A.selectItem(I._id),["prevent"])},o(A.textTruncate(I.name,55)),9,De)]),I.url?(i(),s("div",Ge,[t("a",{class:"small text-muted",href:I.url,target:"_blank"},o(A.textTruncate(A.prettyURL(I.url),32)),9,ze)])):(i(),s("div",Ke,[C(d,{icon:I.typeIcon},null,8,["icon"]),t("div",je,o(I.typeName),1)])),t("div",{class:"d-flex flex-gap-xs align-items-center fitdiv my-1",onClick:v(K=>A.selectItem(I._id),["prevent"]),role:"button"},[t("span",null,[C(U,{class:"ps-0","no-border":"",readonly:"",size:"sm",inline:"",value:I.overallRating},null,8,["value"])]),I.numRatings>0?(i(),s("span",Ye,o(I.numRatings),1)):g("",!0)],8,We)]),t("div",He,[I!=null&&I.comment?(i(),s("div",Le,[t("div",Ve,[C(d,{icon:"chat-right-text-fill",class:"me-2 remark-color"}),t("span",Oe,o(I==null?void 0:I.comment),1)])])):g("",!0),I.parentRelation&&I.parentRelation.createdAt?(i(),s("div",Pe)):g("",!0),t("div",Fe," Added on "+o(A.dateToMDYFormat(((B=I==null?void 0:I.parentRelation)==null?void 0:B.availableAt)||I.parentRelation.createdAt)),1)])])],2)}),128))])])):(i(),s("div",_e)),e[34]||(e[34]=t("div",{class:"bottom-gap"},null,-1))])}const mt=eA(mA,[["render",xe],["__scopeId","data-v-8b271853"]]);export{mt as default};
