import{a as f,_ as h}from"./components.globalDizx_NTC.js";import{d as b,j as s,K as a,z as i,m as v,s as n,r as l,i as o,Q as r,R as u,k as m}from"./@vueC3Nhqlrl.js";const M=b({name:"ImportFile",mixins:[f],data(){return{importFile:null,resultMessage:null,logOutput:null,loading:!1,errorMessage:null}},mounted(){},computed:{},methods:{runImport(){this.resultMessage=null,this.logOutput=null;const e=new FileReader;e.onload=t=>{this.loadImport(JSON.parse(t.target.result)),this.resultMessage="Sending..."},e.onerror=t=>{this.resultMessage=t,console.error(this.resultMessage)},e.readAsText(this.importFile)},loadImport(e){this.loading=!0,this.sendReq("/account/import",{importData:e}).then(t=>{t.success?(this.resultMessage="Loading complete",this.logOutput=t.result.join(`
`)):(console.error("Error:",t.message),this.resultMessage=t.message),this.loading=!1})}},created(){}}),k={class:"m-5"},F={key:0,class:"m-3 text-center"},_={key:1,class:"m-3 text-center"},I={key:0,class:"m-5"};function C(e,t,N,O,V,y){const d=l("b-form-file"),p=l("b-button"),g=l("b-alert");return o(),s("div",k,[e.isNativeClient?(o(),s("div",_," Not available in native client ")):(o(),s("div",F,[a(d,{modelValue:e.importFile,"onUpdate:modelValue":t[0]||(t[0]=c=>e.importFile=c),state:!!e.importFile,placeholder:"Select import file or drop it here...","drop-placeholder":"Drop file here...",accept:"application/json"},null,8,["modelValue","state"]),a(p,{disabled:!e.importFile||e.loading,class:"mt-3",size:"lg",variant:"outline-info",onClick:e.runImport},{default:i(()=>t[1]||(t[1]=[r("Import from File")])),_:1},8,["disabled","onClick"])])),e.resultMessage?(o(),v(g,{key:2,class:"m-4",variant:"info","model-value":!!e.errorMessage},{default:i(()=>[r(u(e.resultMessage)+" ",1),e.logOutput?(o(),s("div",I,[t[2]||(t[2]=r(" Log Output: ")),t[3]||(t[3]=m("br",null,null,-1)),m("pre",null,u(e.logOutput),1)])):n("",!0)]),_:1},8,["model-value"])):n("",!0)])}const S=h(M,[["render",C]]);export{S as I};
