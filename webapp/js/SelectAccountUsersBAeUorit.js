import{a as m,_ as f}from"./components.globalBic2x0kT.js";import{P as p}from"./TIIconDefaultCMdnLD-P.js";import{d as h,j as n,F as _,P as g,s as y,r as a,i as t,p as U,K as I,k as l,R as k,m as o}from"./@vueC3Nhqlrl.js";const w=h({name:"SelectAccountUser",mixins:[m],props:{selectedUserIds:{type:Array,default:()=>[]},includeSelf:{type:Boolean,default:!1},restrictedOnly:{type:Boolean,default:!1}},emits:["update:selectedUserIds"],components:{ProfileImage:p},data(){return{errorMessage:null,loading:!1}},mounted(){},computed:{selectedCount(){return this.selectedUserIds.filter(e=>this.includeSelf||e!=this.currentUserId).length},userList(){let e=[...this.users||[]];return e=e.map(s=>(s.selected=this.selectedUserIds.includes(s._id),s)),e=e.filter(s=>this.includeSelf||s._id!=this.currentUserId).filter(s=>!this.restrictedOnly||s._id==this.currentUserId||s.type=="restricted").sort((s,i)=>s.username<i.username?-1:s.username>i.username?1:0),e}},methods:{isSelected(e){return this.selectedUserIds.includes(e)},async toggleUser(e){this.selectedUserIds.includes(e)?await this.sendUpdate(this.selectedUserIds.filter(s=>s!=e)):await this.sendUpdate([...this.selectedUserIds,e])},async sendUpdate(e){this.$emit("update:selectedUserIds",e)},async load(){this.loading=!0,await this.RefreshUsers(),this.loading=!1}},created(){}}),C={key:0,class:"d-flex justify-content-center align-items-center flex-gap-1 flex-wrap my-4"},S=["onClick"],x={class:"mt-1"},B={key:0,class:"font-weight-bold"},$={key:1},b={class:"my-1"};function P(e,s,i,v,N,j){const c=a("ProfileImage"),d=a("b-icon");return t(),n("div",null,[e.loading?y("",!0):(t(),n("div",C,[(t(!0),n(_,null,g(e.userList,(r,u)=>(t(),n("div",{role:"button",style:{width:"140px",height:"140px"},key:u,class:U(["card d-flex justify-content-center align-items-center border",e.selectedUserIds.includes(r._id)?"text-muted":""]),onClick:A=>e.toggleUser(r._id)},[I(c,{profileImage:r.profileImage,width:50,showCircle:!1},null,8,["profileImage"]),l("div",x,[r._id==e.currentUserId?(t(),n("span",B,s[0]||(s[0]=[l("b",null,"you",-1)]))):(t(),n("span",$,k(r.displayedName||r.username),1))]),l("div",b,[e.selectedUserIds.includes(r._id)?(t(),o(d,{key:0,class:"success-color",icon:"check-lg"})):(t(),o(d,{key:1,icon:"square"}))])],10,S))),128))]))])}const F=f(w,[["render",P]]);export{F as S};
