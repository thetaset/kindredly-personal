import{a as m,_ as h}from"./components.globalSAVxUKYX.js";import{d as g,j as n,k as s,K as r,Q as p,ad as v,F as w,P as S,r as d,i as c,R as _}from"./@vueC3Nhqlrl.js";import"./vue3-toastifyDll2FbVh.js";import"./@capacitorCjBcbZvA.js";import"./bootstrap-vue-nextDnMzdrWQ.js";const y=g({name:"NotificationSettings",mixins:[m],components:{},data(){return{options:null,categories:void 0,notificationSettings:void 0,notificationSettingDefaults:void 0,loading:!1,counter:0}},mounted(){},computed:{},methods:{formattedString(e){return e=e.replace(/_/g," "),e=e.toLowerCase().replace(/\b[a-z]/g,function(t){return t.toUpperCase()}),e},async loadDefaults(){const e=await this.apiReq("/user/prefs/defaults",{key:"notificationSettings"});e.success&&(this.notificationSettingDefaults=e.result)},loadCategories(e){this.categories=[];for(const[t,o]of Object.entries(e))this.categories.push({key:t,...o});for(const[t,o]of Object.entries(this.notificationSettingDefaults.categories))e[t]||this.categories.push({key:t,...o})},save(){const e=Object.fromEntries(this.categories.map(t=>[t.key,t]));this.UpdatePref("notificationSettings",{...this.notificationSettings,categories:e}),this.showToast("Saved",{variant:"success"})},async loadPage(){await this.RefreshPrefs(!0),await this.loadDefaults(),this.userPrefs.data.notificationSettings&&(this.notificationSettings=this.userPrefs.data.notificationSettings,this.notificationSettings.categories&&this.loadCategories(this.notificationSettings.categories))}},created(){this.loadPage()}}),b={class:"container-fluid-max1200"},k={class:"my-3"},C={class:"col-md wtruncate"},V={class:"col-md-2 wtruncate"},P={class:"col-md-2 wtruncate"};function D(e,t,o,N,x,U){const u=d("b-icon"),l=d("b-form-checkbox");return c(),n("div",b,[s("h2",k,[r(u,{icon:"bell"}),t[0]||(t[0]=p(" Notification Settings"))]),t[2]||(t[2]=v('<div class="text-muted small mb-4"><div class="mt-1"> Customize your notification preferences. </div></div><div class="row mt-3"><div class="col wtruncate"> Category </div><div class="col-md-2 wtruncate"> Email </div><div class="col-md-2 wtruncate"> Mobile/Browser Push </div></div><hr>',3)),(c(!0),n(w,null,S(e.categories,(i,f)=>(c(),n("div",{class:"row",key:f},[s("div",C,_(e.formattedString(i.key)),1),s("div",V,[r(l,{modelValue:i.email,"onUpdate:modelValue":a=>i.email=a,value:!0,"unchecked-value":!1,onChange:e.save,switch:!0,size:"sm","switch-color":"primary","switch-vertical":"true",class:""},null,8,["modelValue","onUpdate:modelValue","onChange"])]),s("div",P,[r(l,{modelValue:i.push,"onUpdate:modelValue":a=>i.push=a,value:!0,"unchecked-value":!1,onChange:e.save,switch:!0,size:"sm","switch-color":"primary","switch-vertical":"true",class:""},null,8,["modelValue","onUpdate:modelValue","onChange"])]),t[1]||(t[1]=s("hr",{class:"my-3"},null,-1))]))),128))])}const O=h(y,[["render",D]]);export{O as default};
