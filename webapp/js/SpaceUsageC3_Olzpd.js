import{d as g,j as c,k as s,K as p,Q as f,R as r,s as u,r as U,i as m}from"./@vueC3Nhqlrl.js";import{_ as h}from"./components.globalSAVxUKYX.js";import"./vue3-toastifyDll2FbVh.js";import"./@capacitorCjBcbZvA.js";import"./bootstrap-vue-nextDnMzdrWQ.js";const v=g({name:"SpaceUsage",components:{},data(){return{accountUsage:null}},mounted(){},computed:{},methods:{prettyFilesize(e){return e<1e3?e+" B":e<1e6?(e/1e3).toFixed(2)+" KB":e<1e9?(e/1e6).toFixed(2)+" MB":(e/1e9).toFixed(2)+" GB"},async getAccountUsage(){const e=await this.sendReq("/account/getSpaceUsage");if(e.success){let{tables:t,userFileData:n}=e.result,o=0;t=t.map(a=>{var i,d;return a.info=(i=a.data)==null?void 0:i.rows[0],(d=a==null?void 0:a.info)!=null&&d.filesize&&(o+=0+Number(a.info.filesize)),a});let l=Number(o)+Number(n);this.accountUsage={tables:t,tableUsage:o,fileUsage:n,totalUsage:l},this.showModal("space-usage-modal")}else this.showToast("Error getting account usage",{title:"Error",variant:"danger",solid:!0});return null},async loadData(){await this.getAccountUsage()}},created(){this.loadData()}}),y={class:"container-fluid-max1200"},F={class:"my-3"},_={key:0,class:"mt-4"},B={class:"mb-4"},N={class:"mt-2"},S={class:"mt-2"};function b(e,t,n,o,l,a){const i=U("b-icon");return m(),c("div",y,[s("h2",F,[p(i,{icon:"database-fill"}),t[0]||(t[0]=f(" Cloud Storage Usage"))]),t[2]||(t[2]=s("div",{class:"text-muted"}," Kindredly Cloud Storage Usage ",-1)),e.accountUsage?(m(),c("div",_,[s("div",B,"Total: "+r(e.prettyFilesize(e.accountUsage.totalUsage)),1),t[1]||(t[1]=s("hr",null,null,-1)),s("div",N,"Files: "+r(e.prettyFilesize(e.accountUsage.fileUsage)),1),s("div",S,"Data: "+r(e.prettyFilesize(e.accountUsage.tableUsage)),1),u("",!0)])):u("",!0),t[3]||(t[3]=s("div",{class:"mt-4"},[s("div",{class:"text-muted mb-1"},"Space Usage Limits"),s("div",null,"Exact limits have not been established yet.")],-1))])}const E=h(v,[["render",b]]);export{E as default};
