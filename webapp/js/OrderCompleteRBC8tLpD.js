import{r as c,i as d,j as l,k as n,L as p,M as h,R as g,K as u,s as f,z as _,Q as y}from"./@vueC3Nhqlrl.js";import{_ as v}from"./components.globalBic2x0kT.js";import"./vue3-toastifyDll2FbVh.js";import"./@capacitorCjBcbZvA.js";import"./bootstrap-vue-nextDnMzdrWQ.js";const w={name:"OrderStatus",data(){return{loading:!0,storeConfig:{},subscription:null,errorMessage:null,message:null}},async mounted(){this.includeStripe("js.stripe.com/v3/",(function(){this.configure()}).bind(this))},computed:{},methods:{includeStripe(e,t){let o=document,r="script",s=o.createElement(r),i=o.getElementsByTagName(r)[0];s.src="//"+e,t&&s.addEventListener("load",function(a){t(null,a)},!1),i.parentNode.insertBefore(s,i)},async configure(){await this.loadStoreConfig(),this.stripe=Stripe(this.storeConfig.stripPublishableKey);const e=new URLSearchParams(window.location.search).get("payment_intent_client_secret");this.stripe.retrievePaymentIntent(e).then(({paymentIntent:t})=>{switch(t.status){case"succeeded":this.message="Success! Payment received.";break;case"processing":this.message="Payment processing. We'll update you when payment is received.";break;case"requires_payment_method":this.message="Payment failed. Please try another payment method.";break;default:this.message="Something went wrong.";break}this.RefreshAccountInfo(!0,!0),this.RefreshCurrentUser(),this.loading=!1})},async loadStoreConfig(){const e=await this.sendReq("/store/config");e.success&&e.result?this.storeConfig=e.result:console.error("Error:",e)}},async created(){}},S={class:"mx-auto"},b={class:"cardo mx-auto text-center border rounded m-4 shadow p-4"},x={class:"mx-auto"},k={key:0},C={class:"text-center mt-3"};function P(e,t,o,r,s,i){const a=c("b-spinner"),m=c("router-link");return d(),l("div",null,[n("div",S,[t[1]||(t[1]=n("div",{class:"text-center"},[n("div",{class:"h1"},"Status")],-1)),n("div",b,[n("div",x,[p(n("div",null,g(s.message),513),[[h,!s.loading]]),s.loading?(d(),l("div",k,[u(a,{label:"Loading..."})])):f("",!0)])]),n("div",C,[u(m,{to:"/support"},{default:_(()=>t[0]||(t[0]=[y(" Back ")])),_:1})])])])}const T=v(w,[["render",P]]);export{T as default};
