import{V as P}from"./ViewPostDqiC4r7w.js";import{V as b}from"./ViewFeedItemBswOirLP.js";import{P as v}from"./TIIconDefaultBACySpee.js";import{a as _,_ as w}from"./components.globalSAVxUKYX.js";import{d as I,j as o,k as n,K as l,Q as d,R as k,F as V,P as F,z as p,s as a,r as i,i as s,m}from"./@vueC3Nhqlrl.js";import"./EmojiPickerDsX8Vpds.js";import"./@iconifyDLzQZ07j.js";import"./@iconify-iconsCsSCFVIT.js";import"./SelectUsersCsK2sfhZ.js";import"./ItemImageB4O-XpFn.js";import"./vue3-toastifyDll2FbVh.js";import"./@capacitorCjBcbZvA.js";import"./bootstrap-vue-nextDnMzdrWQ.js";const L=I({name:"UserFeed",mixins:[_],components:{ViewPost:P,ViewFeedItem:b,ProfileImage:v},data(){return{errorMessage:null,loading:!1,feeds:[],currentPage:0,perPage:10,perPageInc:10,totalRows:null,targetUserId:null,targetUser:null}},mounted(){},computed:{feedList(){return this.feeds?this.feeds:[]}},methods:{loadMore(){this.perPage+=this.perPageInc,this.loadFeed()},loadTargetUserInfo(){this.loading=!0,this.sendReq("/user/profile/get",{userProfileId:this.targetUserId}).then(e=>{e.success?(this.targetUser=e.result,this.errorMessage=null):(console.error("Error:",e.message),this.errorMessage=e.message),this.loading=!1})},async loadFeed(e=!1){this.loading=!0;const t=await this.sendReq("/client/feed/list",{userId:this.targetUserId,pageInfo:{currentPage:this.currentPage,perPage:this.perPage,includeTotalRows:e},includeComments:!0});t.success?(this.feeds=t.result.records,e&&(this.totalRows=t.result.count),this.errorMessage=null):(console.error("Error:",t.message),this.errorMessage=t.message),this.loading=!1}},created(){this.targetUserId=this.$route.params.userId,this.targetUserId&&this.loadTargetUserInfo(),this.loadFeed(!0),this.RefreshStats()}}),M={key:0,class:"container-fluid-max1200"},R={class:"mt-3 mb-4"},$={class:"mb-2"},C={class:"mt-4 alert alert-info"},E={key:0,class:"text-center"},N={key:1,class:"text-center small"};function B(e,t,S,T,j,q){const u=i("b-icon"),g=i("ViewPost"),c=i("ViewFeedItem"),f=i("b-button"),h=i("b-col"),y=i("b-spinner");return s(),o("div",null,[e.targetUser?(s(),o("div",M,[n("div",R,[n("h2",$,[l(u,{icon:"activity"}),t[2]||(t[2]=d(" Sharing Activity"))]),n("div",C,[l(u,{icon:"info-circle"}),t[3]||(t[3]=d(" You are viewing the sharing activity of ")),n("b",null,k(e.targetUser.displayName||e.targetUser.username),1)])]),(s(!0),o(V,null,F(e.feedList,(r,U)=>(s(),o("div",{key:r._id,class:"hoverrow t-post wwrap border-top"},[r.refType=="post"&&r.data?(s(),m(g,{key:U,post:r.data,feedEntry:r.feedEntry,onUpdate:t[0]||(t[0]=D=>e.loadFeed()),targetUser:e.targetUser},null,8,["post","feedEntry","targetUser"])):a("",!0),r.refType=="sharedItem"?(s(),m(c,{key:1,feedItem:r},null,8,["feedItem"])):a("",!0)]))),128)),l(h,{class:"d-flex justify-content-center mt-4 pb-3"},{default:p(()=>[e.totalRows&&e.perPage<=e.totalRows&&e.feedList.length>0?(s(),m(f,{key:0,variant:"primary",onClick:t[1]||(t[1]=r=>e.loadMore())},{default:p(()=>t[4]||(t[4]=[d(" Load more ")])),_:1})):a("",!0)]),_:1}),e.loading?(s(),o("div",E,[l(y,{class:"spinnerxl",label:"Loading..."})])):a("",!0),!e.loading&&e.feedList.length==0?(s(),o("div",N,"No items found")):a("",!0)])):a("",!0)])}const ee=w(L,[["render",B]]);export{ee as default};
