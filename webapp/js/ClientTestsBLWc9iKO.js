import{a as v,_ as w}from"./components.globalBic2x0kT.js";import{d as C,j as n,K as o,z as r,r as d,i,k as l,Q as c,R as a,F as k,P as D,s as u,p as M}from"./@vueC3Nhqlrl.js";import"./vue3-toastifyDll2FbVh.js";import"./@capacitorCjBcbZvA.js";import"./bootstrap-vue-nextDnMzdrWQ.js";const T=e=>JSON.parse(JSON.stringify(e)),x=C({name:"ClientTests",mixins:[v],data(){return{testList:[{description:"FG Test",type:"fg",func:{name:"fgTest1",params:{}},expected:null,runtimeMS:null,results:null,enabled:!1,testRun:!1,showDetails:!1},{description:"Basic Encrypt and Decryption",type:"bg",func:{name:"cryptoTest1",params:{}},expected:null,runtimeMS:null,results:null,enabled:!1,testRun:!1,showDetails:!1},{description:"Create Item, encrypt then decrypt",type:"bg",func:{name:"createItemAndRetrieve",params:{details:{name:"Test Item",description:"Test Item's Description",url:"https://thetaset.com",type:"link",meta:{description:"Test Item's Description"}}}}},{description:"buildVisitHistoryIndex",type:"bg",func:{name:"buildVisitHistoryIndex",params:{}},expected:null,runtimeMS:null,results:null,enabled:!0,showDetails:!1},{description:"getIndex",type:"bg",func:{name:"getIndex",params:{}},expected:null,runtimeMS:null,results:null,enabled:!0,showDetails:!1}],loading:!1,completedTests:[],failTestCount:0,successTestCount:0,fgTestMap:{}}},mounted(){},computed:{activeTests(){return this.testList.filter(e=>e.enabled)}},methods:{loadFGTestMap(){this.fgTestMap={fgTest1:this.fgTest1}},async fgTest1(){return{success:!0,info:{message:"FG Test 1 Passed"}}},async resetTest(e){e.results=null,e.runtimeMS=null,e.testRun=!1},async runFGTest(e){this.fgTestMap[e.func.name]?e.results=await this.fgTestMap[e.func.name](T(e.func.params)):console.error("No FG Test Found")},async runBGTest(e){const s=await this.sendReq("/client/tests",T(e.func));e.results=s.result},async runTest(e){await this.resetTest(e);const s=new Date().getTime();try{e.type=="bg"?await this.runBGTest(e):await this.runFGTest(e)}catch(m){console.error(m),e.results={success:!1,error:m}}e.testRun=!0,e.runtimeMS=new Date().getTime()-s},async runTests(){var e;this.loading=!0,this.failTestCount=0,this.successTestCount=0;for(const s of this.activeTests)s.enabled&&(await this.runTest(s),(e=s.results)!=null&&e.success?this.successTestCount++:this.failTestCount++);this.loading=!1}},created(){this.loadFGTestMap()}}),R={class:"mt-4"},F={class:"w-50"},S={key:0},G={key:1,class:"text-muted small"},I={class:"w-25"},N={key:0},$={key:0,class:"text-danger"},B={key:1,class:"text-success"},V={key:1},z={key:2,class:"text-muted small"},P={class:""},A={key:0,class:"m-1 p-1 small border rounded"},H={key:0,class:"mt-3 pb-3"},L={key:0,class:"text-success"},j={key:1,class:"text-danger"};function E(e,s,m,J,O,q){const p=d("b-button"),h=d("b-icon"),y=d("b-col"),_=d("b-row"),g=d("b-container");return i(),n("div",null,[o(g,{class:"container"},{default:r(()=>[o(_,{class:"row"},{default:r(()=>[o(y,{class:"col"},{default:r(()=>[s[5]||(s[5]=l("h1",null,"Test Runner",-1)),l("div",R,[o(p,{variant:"outline-primary",onClick:s[0]||(s[0]=t=>e.runTests()),disabled:e.loading},{default:r(()=>[c(a(e.loading?"Running Tests...":"Run All Tests"),1)]),_:1},8,["disabled"])]),s[6]||(s[6]=l("hr",null,null,-1)),(i(!0),n(k,null,D(e.activeTests,t=>{var f;return i(),n("div",null,[l("h3",null,a(t.name),1),l("div",{class:M(["d-flex justify-content-between flex-gap-1 mt-3",e.isMobile?"flex-wrap":""])},[l("div",F,[t.description?(i(),n("div",S,a(t.description),1)):u("",!0),t.func.name?(i(),n("div",G,"Function Name: "+a(t.func.name),1)):u("",!0)]),l("div",I,[t.testRun?(i(),n("div",N,[(f=t==null?void 0:t.results)!=null&&f.success?(i(),n("div",B,"Test Passed")):(i(),n("div",$,"Test Failed"))])):(i(),n("div",V,s[1]||(s[1]=[l("div",{class:"text-muted small"},"Not Run",-1)]))),t.runtimeMS!=null?(i(),n("div",z,[l("p",null,"Runtime: "+a(t.runtimeMS)+"ms",1)])):u("",!0)]),l("div",null,[l("div",P,[o(p,{class:"m-1",variant:"primary",size:"sm",onClick:b=>e.runTest(t)},{default:r(()=>s[2]||(s[2]=[c(" Run Test ")])),_:2},1032,["onClick"]),o(p,{class:"m-1",variant:"outline-primary",size:"sm",onClick:b=>t.showDetails=!t.showDetails},{default:r(()=>[c(a(t.showDetails?"Hide Details":"Show Details"),1)]),_:2},1032,["onClick"])])])],2),t.showDetails?(i(),n("div",A,[l("pre",null,a(t),1)])):u("",!0)])}),256)),e.loading?u("",!0):(i(),n("div",H,[s[4]||(s[4]=l("hr",null,null,-1)),e.successTestCount>0&&e.failTestCount==0?(i(),n("div",L,[o(h,{icon:"check",class:"me-1"}),s[3]||(s[3]=c(" All Tests Passed "))])):e.failTestCount>0?(i(),n("div",j,a(e.failTestCount)+" Tests Failed",1)):u("",!0)]))]),_:1})]),_:1})]),_:1})])}const Y=w(x,[["render",E]]);export{Y as default};
