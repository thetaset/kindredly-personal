import{D,e as v}from"./parse5DyBihX4n.js";import{k as b,i as O,l as d,D as m,E as y,C as N,s as p,P,T as $,n as I,b as E,o as f,f as x,t as L,u as S,j as M,v as h,w as _}from"./domhandlerCjB8Dp5l.js";function C(e){return new $(e)}function g(e){const t=e.includes('"')?"'":'"';return t+e+t}function B(e,t,n){let r="!DOCTYPE ";return e&&(r+=e),t?r+=` PUBLIC ${g(t)}`:n&&(r+=" SYSTEM"),n&&(r+=` ${g(n)}`),r}const o={isCommentNode:b,isElementNode:O,isTextNode:d,createDocument(){const e=new m([]);return e["x-mode"]=D.NO_QUIRKS,e},createDocumentFragment(){return new m([])},createElement(e,t,n){const r=Object.create(null),i=Object.create(null),a=Object.create(null);for(let c=0;c<n.length;c++){const u=n[c].name;r[u]=n[c].value,i[u]=n[c].namespace,a[u]=n[c].prefix}const s=new y(e,r,[]);return s.namespace=t,s["x-attribsNamespace"]=i,s["x-attribsPrefix"]=a,s},createCommentNode(e){return new N(e)},appendChild(e,t){const n=e.children[e.children.length-1];n&&(n.next=t,t.prev=n),e.children.push(t),t.parent=e},insertBefore(e,t,n){const r=e.children.indexOf(n),{prev:i}=n;i&&(i.next=t,t.prev=i),n.prev=t,t.next=n,e.children.splice(r,0,t),t.parent=e},setTemplateContent(e,t){o.appendChild(e,t)},getTemplateContent(e){return e.children[0]},setDocumentType(e,t,n,r){const i=B(t,n,r);let a=e.children.find(s=>p(s)&&s.name==="!doctype");a?a.data=i??null:(a=new P("!doctype",i),o.appendChild(e,a)),a["x-name"]=t??void 0,a["x-publicId"]=n??void 0,a["x-systemId"]=r??void 0},setDocumentMode(e,t){e["x-mode"]=t},getDocumentMode(e){return e["x-mode"]},detachNode(e){if(e.parent){const t=e.parent.children.indexOf(e),{prev:n,next:r}=e;e.prev=null,e.next=null,n&&(n.next=r),r&&(r.prev=n),e.parent.children.splice(t,1),e.parent=null}},insertText(e,t){const n=e.children[e.children.length-1];n&&d(n)?n.data+=t:o.appendChild(e,C(t))},insertTextBefore(e,t,n){const r=e.children[e.children.indexOf(n)-1];r&&d(r)?r.data+=t:o.insertBefore(e,C(t),n)},adoptAttributes(e,t){for(let n=0;n<t.length;n++){const r=t[n].name;typeof e.attribs[r]>"u"&&(e.attribs[r]=t[n].value,e["x-attribsNamespace"][r]=t[n].namespace,e["x-attribsPrefix"][r]=t[n].prefix)}},getFirstChild(e){return e.children[0]},getChildNodes(e){return e.children},getParentNode(e){return e.parent},getAttrList(e){return e.attributes},getTagName(e){return e.name},getNamespaceURI(e){return e.namespace},getTextNodeContent(e){return e.data},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){var t;return(t=e["x-name"])!==null&&t!==void 0?t:""},getDocumentTypeNodePublicId(e){var t;return(t=e["x-publicId"])!==null&&t!==void 0?t:""},getDocumentTypeNodeSystemId(e){var t;return(t=e["x-systemId"])!==null&&t!==void 0?t:""},isDocumentTypeNode(e){return p(e)&&e.name==="!doctype"},setNodeSourceCodeLocation(e,t){t&&(e.startIndex=t.startOffset,e.endIndex=t.endOffset),e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){t.endOffset!=null&&(e.endIndex=t.endOffset),e.sourceCodeLocation={...e.sourceCodeLocation,...t}}};function T(e){const t=e.includes('"')?"'":'"';return t+e+t}function U(e,t,n){let r="!DOCTYPE ";return e&&(r+=e),t?r+=` PUBLIC ${T(t)}`:n&&(r+=" SYSTEM"),n&&(r+=` ${T(n)}`),r}const l={isCommentNode:I,isElementNode:E,isTextNode:f,createDocument(){const e=new x([]);return e["x-mode"]=v.NO_QUIRKS,e},createDocumentFragment(){return new x([])},createElement(e,t,n){const r=Object.create(null),i=Object.create(null),a=Object.create(null);for(let c=0;c<n.length;c++){const u=n[c].name;r[u]=n[c].value,i[u]=n[c].namespace,a[u]=n[c].prefix}const s=new L(e,r,[]);return s.namespace=t,s["x-attribsNamespace"]=i,s["x-attribsPrefix"]=a,s},createCommentNode(e){return new S(e)},createTextNode(e){return new M(e)},appendChild(e,t){const n=e.children[e.children.length-1];n&&(n.next=t,t.prev=n),e.children.push(t),t.parent=e},insertBefore(e,t,n){const r=e.children.indexOf(n),{prev:i}=n;i&&(i.next=t,t.prev=i),n.prev=t,t.next=n,e.children.splice(r,0,t),t.parent=e},setTemplateContent(e,t){l.appendChild(e,t)},getTemplateContent(e){return e.children[0]},setDocumentType(e,t,n,r){const i=U(t,n,r);let a=e.children.find(s=>h(s)&&s.name==="!doctype");a?a.data=i??null:(a=new _("!doctype",i),l.appendChild(e,a)),a["x-name"]=t,a["x-publicId"]=n,a["x-systemId"]=r},setDocumentMode(e,t){e["x-mode"]=t},getDocumentMode(e){return e["x-mode"]},detachNode(e){if(e.parent){const t=e.parent.children.indexOf(e),{prev:n,next:r}=e;e.prev=null,e.next=null,n&&(n.next=r),r&&(r.prev=n),e.parent.children.splice(t,1),e.parent=null}},insertText(e,t){const n=e.children[e.children.length-1];n&&f(n)?n.data+=t:l.appendChild(e,l.createTextNode(t))},insertTextBefore(e,t,n){const r=e.children[e.children.indexOf(n)-1];r&&f(r)?r.data+=t:l.insertBefore(e,l.createTextNode(t),n)},adoptAttributes(e,t){for(let n=0;n<t.length;n++){const r=t[n].name;e.attribs[r]===void 0&&(e.attribs[r]=t[n].value,e["x-attribsNamespace"][r]=t[n].namespace,e["x-attribsPrefix"][r]=t[n].prefix)}},getFirstChild(e){return e.children[0]},getChildNodes(e){return e.children},getParentNode(e){return e.parent},getAttrList(e){return e.attributes},getTagName(e){return e.name},getNamespaceURI(e){return e.namespace},getTextNodeContent(e){return e.data},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){var t;return(t=e["x-name"])!==null&&t!==void 0?t:""},getDocumentTypeNodePublicId(e){var t;return(t=e["x-publicId"])!==null&&t!==void 0?t:""},getDocumentTypeNodeSystemId(e){var t;return(t=e["x-systemId"])!==null&&t!==void 0?t:""},isDocumentTypeNode(e){return h(e)&&e.name==="!doctype"},setNodeSourceCodeLocation(e,t){t&&(e.startIndex=t.startOffset,e.endIndex=t.endOffset),e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){t.endOffset!=null&&(e.endIndex=t.endOffset),e.sourceCodeLocation={...e.sourceCodeLocation,...t}}};export{o as a,l as b};
