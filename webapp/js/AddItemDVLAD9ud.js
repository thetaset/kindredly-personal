import W from"./PopCollectionSelectorBo26MlBL.js";import{C as O}from"./CollectionButtonListCK1eTpTV.js";import{a as z,ak as q,aj as M,t as K,ae as L,j as P,a0 as Y,d as y,l as R,an as Q,_ as G}from"./components.globalSAVxUKYX.js";import{I as H}from"./ItemTypesLjCsMI_T.js";import{I as J}from"./ItemImageB4O-XpFn.js";import{A as X}from"./AddItemFromLibraryResultsDW-vejij.js";import{d as Z,j as n,K as a,z as u,k as o,X as A,m as f,s as d,Q as m,R as C,F as $,P as x,L as _,r as c,ac as ee,i}from"./@vueC3Nhqlrl.js";import"./CreateCollectionC2CAQQ8x.js";import"./TIIconDefaultBACySpee.js";import"./ai_lookup_utilszDX_hcwM.js";import"./vue3-toastifyDll2FbVh.js";import"./@capacitorCjBcbZvA.js";import"./bootstrap-vue-nextDnMzdrWQ.js";const E={title:null,description:null,keywords:null,imageSrc:null,bannerImagePath:null,bannerImageSrcPath:null,googleFaviconSrcPath:null,faviconSrcPath:null},te=Z({name:"AddItem",mixins:[z],components:{PopCollectionSelector:W,CollectionButtonList:O,ItemTypes:H,ItemImage:J,AddItemFromLibraryResults:X},props:{userId:{type:String,required:!1},targetUserId:{type:String,required:!1},url:{type:String,required:!1},collectionIds:{type:Array,required:!1,default:()=>[]},requestId:{type:String,required:!1,default:null},allowExisting:{type:Boolean,required:!1,default:!1},disableSearch:{type:Boolean,required:!1,default:!1},excludeAllCollections:{type:Boolean,required:!1,default:!1},itemType:{type:String,required:!1,default:null},itemSubType:{type:String,required:!1,default:null}},data(){return{loading:!1,errorMessage:null,page:null,permissionLookup:{},editPatterns:!1,searchText:null,searchResults:null,collections:null,itemInfo:null,requesterUser:{},requesterCollectionIds:[],selectedCollectionIds:[],selectedCollections:[],existingMatches:[],exactMatch:!1,exactMatches:[],similarMatches:[],sharedWithUserIds:[],currentCollectionIds:[],details:{_id:void 0,url:null,name:null,description:null,tags:null,patterns:null,type:"link",subType:null,meta:null},aiSuggestionData:null,loadingAISuggestions:!1,meta:{...E},needConfirm:!1,metaResolved:!1,metaLoading:!1,needAccess:!1,pages:[{text:"",value:"search"},{text:"URL",value:"new"},{text:"Details",value:"meta"},{text:"Collections",value:"collections"}]}},mounted(){(this.page=="search"||this.page=="new")&&this.$nextTick(()=>{const e=this.$refs.itemSearchBox;e&&e.focus()})},computed:{metaImagePath(){return this.meta?this.meta.bannerImagePath?this.getImagePathWithDefault(this.meta.bannerImagePath):this.meta.imageSrc||this.meta.bannerImageSrcPath||this.meta.googleFaviconSrcPath||this.meta.faviconSrcPath:null},typeIcon(){var e,t,s,r,p;if(((e=this.details)==null?void 0:e.type)=="link")return"link";if(((t=this.details)==null?void 0:t.type)=="note")return"journal-text";if(((s=this.details)==null?void 0:s.type)=="thing")return((p=q()[(r=this.details)==null?void 0:r.subType])==null?void 0:p.icon)||null},typeName(){var e,t,s,r,p,v,g;return(e=this.details)!=null&&e.type?((t=this.details)==null?void 0:t.type)!="thing"?((s=this.details)==null?void 0:s.type.charAt(0).toUpperCase())+((r=this.details)==null?void 0:r.type.slice(1)):((v=q()[(p=this.details)==null?void 0:p.subType])==null?void 0:v.name)||((g=this.details)==null?void 0:g.subType):null},pageList(){const e=[];for(const t of this.pages)if(e.push(t),t.value==this.page)break;return e},collectionOptions(){const e=[];if(this.collections==null||this.collections.length==0)return e;let t=this.collections;if(this.requestId){const s=new Set(this.requesterCollectionIds);t=t.filter(r=>s.has(r._id))}for(const s of t){const r=s.path?"/"+s.path.join("/"):"";e.push({text:s.name,value:s._id,path:r,sortKey:r+" "+s.name})}return e.sort(function(s,r){return M(s,r,"sortKey")}),e}},methods:{textTruncate:K,createNew(){let e=L(P(this.searchText));if(!e||e.length==0){this.errorMessage="Please enter a valid URL",this.showToast(this.errorMessage,{variant:"danger",title:"Error",solid:!0});return}this.details.url=e,this.itemType=="thing"?this.page="meta":this.page="new"},async selectCollections(){var e,t;if(this.itemType=="thing"){if(!((e=this.details)!=null&&e.subType)){this.showToast("You must select an item type",{variant:"danger",title:"Error",solid:!0});return}if(!((t=this.details)!=null&&t.name)){this.showToast("You must enter a name",{variant:"danger",title:"Error",solid:!0});return}}this.collectionIds&&this.collectionIds.length>0&&(await this.addSelectedCollection(this.collectionIds),await this.loadSelectedCollections()),this.page="collections"},async addSelectedCollection(e){for(const t of e)this.selectedCollectionIds.includes(t)||this.selectedCollectionIds.push(t)},updatePatterns(){!this.editPatterns&&this.details.url!=null&&(this.details.patterns=Y(this.details.url))},async _loadItemInfo(){y("Loading item info");const e=await this.apiReq("/client/item/similarItemsByURL",{url:this.details.url});e.success&&e.result?(this.exactMatches=R(e.result.exactMatches),this.similarMatches=e.result.similarMatches,this._loadMeta(),this.errorMessage=null):(console.error("Error:",e.message),this.errorMessage=e.message)},async updateItemType(e){this.details.type=e.type,this.details.subType=e.subType},async validateURL(){var e;return await this.sendReq("/client/checkIfPermitted",{url:this.details.url,tempAuthToken:((e=this.permissionOverrideInfo)==null?void 0:e.tokenData)||null})},async confirmNew(){this.page="meta",this.details._id=void 0},async requestAccess(){var s;const e=(s=this.details)==null?void 0:s.url;if(!e||e.length==0){this.errorMessage="Please enter a valid URL";return}const t=await this.sendReq("/access_request/add",{key:e,message:""});t.success?(this.$router.push("/settings/accessrequests"),this.$emit("close"),this.closeAllModals(),this.errorMessage=null):(console.error("Error:",t.message),this.errorMessage=t.message)},async loadItemFromUrl(){var e;if(this.details.url==null&&this.itemType=="thing"){this.page="meta",this.metaResolved=!0;return}try{this.loading=!0,this.details.url=L(P(this.details.url)),this.updatePatterns();const t=await this.validateURL();!!((e=this.permissionOverrideInfo)!=null&&e.tokenData)||t.result?(await this._loadItemInfo(),this.exactMatches.length>0?this.needConfirm=!0:this.page="meta"):await this.getRef("msgBoxConfirm").show(`You don't have permission to add ${this.details.url}.  Would you like to make a request?`,{title:"Request Access",okVariant:"danger",okTitle:"Yes",cancelTitle:"No",hideHeaderClose:!1})?await this.requestAccess():this.showToast("You are not permitted to add this url.",{variant:"danger",title:"Error",solid:!0})}finally{this.loading=!1}},async _loadMeta(){y("Loading metdata for"+this.details.url),this.meta=void 0,this.metaLoading=!0,this.metaResolved=!1;try{if(this.details.url==null){y("Undefined url, not loading meta"),this.meta={...E};return}let e=this.details.url;y("url:"+e);const t=await this.sendReq("/client/fetchMetadata",{url:e});if(t.success){let s=t.result;y(s),this.meta=s,this.meta?(this.details.name=s.title,this.details.description=s.description,this.metaResolved=s!=null):this.metaResolved=!1}}catch(e){console.error(e)}finally{this.metaLoading=!1}},async loadAISuggestion(){var e,t;y("Loading metdata for"+this.details.url);try{this.loadingAISuggestions=!0;const s={url:this.details.url,type:"link",name:this.meta.title,description:this.meta.description,task:[]},r=await this.apiReq("/usertask/request",{taskname:"cleanupData",data:s});if(y("AI suggestion",r.result),!((t=(e=r.result)==null?void 0:e.message)!=null&&t.content)){this.showToast("No AI Suggestion found",{variant:"danger",title:"Error",solid:!0});return}this.aiSuggestionData=JSON.parse(r.result.message.content),this.details.name=this.aiSuggestionData.name,this.details.description=this.aiSuggestionData.description,this.details.tags=this.aiSuggestionData.tags.join(", ")}catch(s){console.error(s),this.showToast("Error loading AI Suggestion",{variant:"danger",title:"Error",solid:!0})}finally{this.loadingAISuggestions=!1}},async selectExistingItem(e){this.collectionIds&&this.collectionIds.length>0&&await this._addItemToCollection(e),await this._shareWithUsers(e),this.RefreshIndexQuick(),this.clearPermissionOverrideInfo();for(let t=0;t<this.searchResults.length;t++)if(this.searchResults[t]._id==e){this.searchResults.splice(t,1);break}this.$emit("close",e)},async _addItemToCollection(e){var s;const t=await this.sendReq("/item/addToCollections",{collectionIds:this.collectionIds,itemId:e,tempAuthToken:((s=this.permissionOverrideInfo)==null?void 0:s.tokenData)||null});t.success?this.showToast("Item Added",{variant:"success"}):(console.error("Error:",t.message),this.errorMessage=t.message,this.showToast(t.message,{variant:"danger",title:"Error",solid:!0}))},async _shareWithUsers(e){var s;if(this.sharedWithUserIds.length==0)return;const t=await this.sendReq("/item/shareWithUsers",{itemId:e,userIds:this.sharedWithUserIds,notifyMessage:void 0,permission:"viewer",tempAuthToken:((s=this.permissionOverrideInfo)==null?void 0:s.tokenData)||null});if(!t.success){this.errorMessage=t.message,console.error(this.errorMessage);return}},async saveItem(){var p,v,g,w;this.loading=!0;let e=null;this.details.patterns&&(e=(p=this.details)==null?void 0:p.patterns.split(`
`)),this.details.tags==null&&(this.details.tags="");const t={...this.details};t.tags=this.details.tags.split(",").map(function(I){return I.toLowerCase().trim()}),this.itemType=="thing"&&(t.type="thing",t.subType=this.details.subType),t.patterns=e,t.name==((v=this.meta)==null?void 0:v.title)&&(t.name=null),t.description==((g=this.meta)==null?void 0:g.description)&&(t.description=null),this.meta&&(t.meta=this.meta);const s=[...this.currentCollectionIds,...this.selectedCollectionIds],r=await this.sendReq("/client/item/save",{itemId:t._id,details:t,collectionIds:s,accessRequestId:this.requestId,tempAuthToken:((w=this.permissionOverrideInfo)==null?void 0:w.tokenData)||null});if(r.success){const I=r.result;await this._shareWithUsers(I),this.RefreshIndexQuick(),this.$emit("close",I),this.errorMessage=null}else console.error("Error:",r.message),this.errorMessage=r.message,this.showToast(r.message,{variant:"danger"}),this.loading=!1},loadCollections(){this.sendReq("/client/collection/listByUser",{userId:this.userId,includePath:!0}).then(e=>{this.collections=R(e.result)})},async refreshSearch(){this.loading=!0;try{await Q()}finally{this.loading=!1}},async runSearch(){this.loading=!0,this.searchResults=null;const e=await this.sendReq("/client/searchMain",{searchType:"text",searchLookupValue:this.searchText});e.success&&e.result?(this.searchResults=R(e.result,60,!1),this.excludeAllCollections&&(this.searchResults=this.searchResults.filter(t=>t.type!="col")),this.errorMessage=null):(console.error("Error:",e?e.message:"Unknown"),this.errorMessage=e.message),this.loading=!1},loadUserPermissions(){this.errorMessage=null,this.sendReq("/item/userPermissionLookup",{userId:this.userId}).then(e=>{e.success?(this.permissionLookup=e.result,this.requesterCollectionIds=Object.keys(this.permissionLookup)):(console.error("Error:",e.message),this.errorMessage=e.message),this.loadCollections()})},removeCollection(e){this.selectedCollectionIds=this.selectedCollectionIds.filter(t=>t!=e),this.loadSelectedCollections()},addCollection(e){if(!e){this.closeModal("select-col-modal");return}this.selectedCollectionIds.push(e),this.loadSelectedCollections(),this.closeModal("select-col-modal")},async loadSelectedCollections(){if(this.errorMessage="",!this.selectedCollectionIds||this.selectedCollectionIds.length==0){this.selectedCollections=[];return}const e=await this.sendReq("/client/collection/listByAccount",{ids:this.selectedCollectionIds,includePath:!0,includeUserPermissions:!0});if(!e.success){this.errorMessage=e.message,console.error(this.errorMessage);return}this.selectedCollections=e.result.sort(function(t,s){return M(t,s,"name")})},closeMe(){this.clearPermissionOverrideInfo(),this.$emit("close",!1)}},created(){this.disableSearch?this.page="new":this.page="search",this.url&&(this.searchText=this.url),this.targetUserId&&this.sharedWithUserIds.push(this.targetUserId),this.loadUserPermissions()}}),se={key:0,class:"ani-fade-in-fast"},ie={class:"d-flex flex-gap-1 align-items-center"},le={key:0,class:"mt-4"},ae={key:0,class:"ms-2 my-3"},oe={key:1,class:"ms-2 text-muted small mb-3"},ne={key:1,class:"mt-4 text-center ani-fade-in-slow"},re={key:2,class:"mt-4 d-flex justify-content-end"},de={key:3,class:"mt-4 d-flex justify-content-end"},ue={key:1,class:"ani-fade-in-fast"},me={key:0},he={class:"mb-4"},ce={class:"d-flex justify-content-between"},pe={key:1},fe={key:0,class:"my-2"},ge={class:"mb-3 wwrap"},ye={class:"alert alert-info mb-4"},ve={class:"me-2"},Ie={key:0,class:"d-flex"},ke={class:"ms-2"},be=["title"],Ce={class:"d-flex justify-content-right mt-4"},we={key:2,class:"ani-fade-in-fast"},Te={class:"m-3 text-center",title:"details.url"},Se={key:0,class:"my-2 alert alert-warning text-center"},Re={key:1},Ue={class:"my-2 text-center d-flex align-self-center justify-content-center"},qe={key:2,class:"mb-3"},Me={key:3,class:"m-3 text-center"},Le=["src"],Pe={key:4,class:"m-3 text-center"},Ae={key:0,class:"mb-2 d-flex flex-gap-1 justify-content-between"},$e={class:"wwrap"},Ee={class:"d-flex justify-content-between mt-4"},Be={key:3,class:"ani-fade-in-fast"},Ve={key:0},De={class:"d-flex justify-content-right mt-2"};function Ne(e,t,s,r,p,v){const g=c("PopCollectionSelector"),w=c("b-modal"),I=c("BFormInput"),B=c("AddItemFromLibraryResults"),k=c("b-spinner"),h=c("b-button"),U=c("b-form-input"),b=c("b-form-group"),T=c("b-icon"),V=c("router-link"),D=c("ItemTypes"),S=c("b-form-textarea"),N=c("CollectionButtonList"),j=ee("b-modal");return i(),n("div",null,[a(w,{lazy:"true",id:"select-col-modal",title:"Select Collection",size:"lg","hide-footer":""},{default:u(()=>[a(g,{onClose:e.addCollection},null,8,["onClose"])]),_:1}),t[45]||(t[45]=o("div",null,null,-1)),t[46]||(t[46]=o("div",{class:"mt-2"},null,-1)),e.page=="search"?(i(),n("div",se,[o("div",ie,[a(I,{class:"rounded",ref:"itemSearchBox",modelValue:e.searchText,"onUpdate:modelValue":t[0]||(t[0]=l=>e.searchText=l),placeholder:"Search term or URL",onKeyup:t[1]||(t[1]=A(l=>e.runSearch(),["enter"])),autofocus:""},null,8,["modelValue"])]),e.searchResults?(i(),n("div",le,[e.searchResults.length==0?(i(),n("div",ae,"No matches found in your library.")):(i(),n("div",oe," Matching items in your library: ")),e.searchResults?(i(),f(B,{key:2,searchResults:e.searchResults,onSelectExistingItem:e.selectExistingItem},null,8,["searchResults","onSelectExistingItem"])):d("",!0)])):d("",!0),e.loading?(i(),n("div",ne,[a(k,{variant:"primary",label:"Loading..."})])):d("",!0),e.searchResults?(i(),n("div",re,[a(h,{variant:"primary",disabled:e.loading,onClick:t[2]||(t[2]=l=>e.createNew())},{default:u(()=>t[21]||(t[21]=[m(" Create New Item ")])),_:1},8,["disabled"])])):(i(),n("div",de,[a(h,{disabled:e.loading,onClick:t[3]||(t[3]=l=>e.runSearch()),variant:"primary"},{default:u(()=>t[22]||(t[22]=[m(" Next ")])),_:1},8,["disabled"])]))])):d("",!0),e.page=="new"?(i(),n("div",ue,[e.needConfirm?d("",!0):(i(),n("div",me,[o("div",he,[a(b,{class:"form-group","label-for":"formWebsite"},{default:u(()=>[a(U,{id:"formWebsite",modelValue:e.details.url,"onUpdate:modelValue":t[4]||(t[4]=l=>e.details.url=l),placeholder:"Enter a URL",autocorrect:"off",autocapitalize:"off",required:"",onUpdate:t[5]||(t[5]=l=>e.updatePatterns()),onKeydown:t[6]||(t[6]=A(l=>e.loadItemFromUrl(),["enter"]))},null,8,["modelValue"])]),_:1})]),o("div",ce,[e.disableSearch?d("",!0):(i(),f(h,{key:0,variant:"outline-secondary",onClick:t[7]||(t[7]=l=>e.page="search"),disabled:e.loading},{default:u(()=>t[23]||(t[23]=[m("Back")])),_:1},8,["disabled"])),a(h,{class:"ms-auto",variant:"primary",onClick:t[8]||(t[8]=l=>e.loadItemFromUrl()),disabled:e.loading},{default:u(()=>[e.loading?(i(),f(k,{key:0,small:"",label:"Loading..."})):d("",!0),t[24]||(t[24]=m(" Next"))]),_:1},8,["disabled"])])])),e.needConfirm?(i(),n("div",pe,[e.exactMatches.length>0?(i(),n("div",fe,[o("div",ge,[t[25]||(t[25]=m("URL: ")),o("strong",null,C(e.details.url),1)]),o("div",ye,[a(T,{icon:"info-circle",class:"me-2"}),t[26]||(t[26]=m(" This URL already exists in your library. "))]),t[28]||(t[28]=o("div",{class:"mt-2 mb-3"},"Select existing item instead?",-1)),o("div",null,[(i(!0),n($,null,x(e.exactMatches,(l,F)=>(i(),n("div",{key:F,class:"d-flex ani-fade-in-fast rounded border p-2 shadow-sm align-items-center"},[o("div",ve,[a(h,{title:"Select",variant:"primary",onClick:je=>e.selectExistingItem(l._id)},{default:u(()=>t[27]||(t[27]=[m(" Select ")])),_:2},1032,["onClick"])]),l.type=="link"?(i(),n("div",Ie,[o("div",ke,[o("div",{class:"text-muted small",title:l.url},C(e.textTruncate(l.url)),9,be),o("div",null,[a(V,{to:`/item/${l._id}`,target:"_blank",title:"Click to open in new window"},{default:u(()=>[m(C(l.name)+" ",1),a(T,{icon:"box-arrow-up-right"})]),_:2},1032,["to"])])])])):d("",!0)]))),128))])])):d("",!0),o("div",Ce,[a(h,{variant:"secondary",onClick:t[9]||(t[9]=l=>e.needConfirm=!1)},{default:u(()=>t[29]||(t[29]=[m("Back")])),_:1}),t[31]||(t[31]=o("div",{class:"ms-auto"},null,-1)),a(h,{variant:"primary",onClick:t[10]||(t[10]=l=>e.confirmNew())},{default:u(()=>t[30]||(t[30]=[m("Create New")])),_:1})])])):d("",!0)])):d("",!0),e.page=="meta"?(i(),n("div",we,[t[38]||(t[38]=o("div",{class:"mt-3"},null,-1)),o("div",Te,C(e.textTruncate(e.details.url,50)),1),!e.metaResolved&&!e.metaLoading&&e.itemType!="thing"?(i(),n("div",Se," Meta data failed to load. Please check the URL or enter the data manually below. ")):d("",!0),e.metaLoading?(i(),n("div",Re,[o("div",Ue,[a(k,{label:"Loading..."}),t[32]||(t[32]=o("div",{class:"ms-2"},"Attempting to load metadata automatically",-1))])])):d("",!0),e.itemType=="thing"&&e.details?(i(),n("div",qe,[t[33]||(t[33]=o("div",{class:"mb-2"},"Item Type",-1)),a(D,{onlyThing:!0,itemType:"thing",itemSubType:e.details.subType,onUpdate:e.updateItemType,disableButtons:!0},null,8,["itemSubType","onUpdate"])])):d("",!0),e.meta&&e.metaImagePath?(i(),n("div",Me,[o("img",{src:e.metaImagePath,style:{"max-width":"200px"},id:"metaImageTag"},null,8,Le)])):d("",!0),e.meta&&e.isAdminUser&&e.itemType=="link"?(i(),n("div",Pe,[a(h,{variant:"outline-success",onClick:t[11]||(t[11]=l=>e.loadAISuggestion()),disabled:e.loadingAISuggestions},{default:u(()=>[a(T,{icon:"magic"}),t[34]||(t[34]=m(" Get AI Suggestions ")),e.loadingAISuggestions?(i(),f(k,{key:0,small:"",label:"Loading..."})):d("",!0)]),_:1},8,["disabled"])])):d("",!0),a(b,{class:"form-group"},{default:u(()=>[a(S,{id:"formName",modelValue:e.details.name,"onUpdate:modelValue":t[12]||(t[12]=l=>e.details.name=l),required:"",rows:"2","max-rows":"6",placeholder:"Name"},null,8,["modelValue"])]),_:1}),a(b,{class:"form-group"},{default:u(()=>[a(S,{id:"formComment",modelValue:e.details.description,"onUpdate:modelValue":t[13]||(t[13]=l=>e.details.description=l),required:"",rows:"3","max-rows":"6",placeholder:"Description (optional)"},null,8,["modelValue"])]),_:1}),a(b,{class:"form-group"},{default:u(()=>[a(U,{id:"formTags",autocorrect:"off",autocapitalize:"off",modelValue:e.details.tags,"onUpdate:modelValue":t[14]||(t[14]=l=>e.details.tags=l),placeholder:"Enter Tags seperated by commas. (optional)",required:""},null,8,["modelValue"])]),_:1}),e.itemType!="thing"?(i(),n($,{key:5},[e.editPatterns?(i(),f(b,{key:1,class:"form-group",label:"URI Patterns:","label-for":"formPatterns",description:"Accepted URI Patterns. one per line, * is wild card. For example: *.google.com/* will match all google.com no matter the path provided"},{default:u(()=>[a(S,{id:"formPatterns",modelValue:e.details.patterns,"onUpdate:modelValue":t[16]||(t[16]=l=>e.details.patterns=l),placeholder:"Enter Site URI Patterns seperated by new lines",required:"",rows:"3","max-rows":"6"},null,8,["modelValue"])]),_:1})):(i(),n("div",Ae,[o("div",$e,[t[35]||(t[35]=o("span",{class:"text-muted me-1"},"URIs:",-1)),m(" "+C(e.textTruncate(e.details.patterns,58)),1)]),o("div",null,[e.isAdminUser?(i(),f(h,{key:0,variant:"outline-primary",size:"sm",onClick:t[15]||(t[15]=l=>e.editPatterns=!0)},{default:u(()=>[a(T,{icon:"pencil"})]),_:1})):d("",!0)])]))],64)):d("",!0),o("div",Ee,[a(h,{variant:"secondary",onClick:t[17]||(t[17]=l=>e.page="new"),disabled:e.loading},{default:u(()=>t[36]||(t[36]=[m("Back")])),_:1},8,["disabled"]),a(h,{variant:"primary",class:"ms-auto",onClick:t[18]||(t[18]=l=>e.selectCollections()),disabled:e.loading},{default:u(()=>[e.loading?(i(),f(k,{key:0,small:"",label:"Loading..."})):d("",!0),t[37]||(t[37]=m(" Next "))]),_:1},8,["disabled"])])])):d("",!0),e.page=="collections"?(i(),n("div",Be,[t[42]||(t[42]=o("div",{class:"my-3"},null,-1)),_((i(),f(h,{variant:"outline-primary"},{default:u(()=>t[39]||(t[39]=[m("+ Add to Collection")])),_:1})),[[j,void 0,void 0,{"select-col-modal":!0}]]),t[43]||(t[43]=o("div",{class:"my-2"},null,-1)),e.selectedCollections.length==0?(i(),n("div",Ve,"No collections selected")):d("",!0),a(N,{collections:e.selectedCollections,onSelect:e.removeCollection},null,8,["collections","onSelect"]),t[44]||(t[44]=o("div",{class:"my-4"},null,-1)),o("div",De,[a(h,{variant:"secondary",onClick:t[19]||(t[19]=l=>e.page="meta"),disabled:e.loading},{default:u(()=>t[40]||(t[40]=[m("Back")])),_:1},8,["disabled"]),a(h,{class:"ms-auto",variant:"primary",onClick:t[20]||(t[20]=l=>e.saveItem()),disabled:e.loading},{default:u(()=>[e.loading?(i(),f(k,{key:0,small:"",label:"Loading..."})):d("",!0),t[41]||(t[41]=m(" Done"))]),_:1},8,["disabled"])])])):d("",!0),t[47]||(t[47]=o("div",{class:"bottom-gap-mobile"},null,-1))])}const _e=G(te,[["render",Ne]]);export{_e as default};
