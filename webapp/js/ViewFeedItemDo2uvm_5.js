import{a as h,p as I,_ as v}from"./components.globalBic2x0kT.js";import{d as c,j as n,k as s,K as r,m as k,z as g,s as f,Q as p,R as d,r as y,i}from"./@vueC3Nhqlrl.js";const E=c({name:"ViewFeedItem",mixins:[h],components:{},props:{feedItem:{type:Object,default:null}},data(){return{feedEntry:null,hideDetails:!0}},mounted(){},computed:{feedMessage(){var t,l,m;let e=((m=(l=(t=this.feedEntry)==null?void 0:t.feedInfo)==null?void 0:l.itemData)==null?void 0:m.message)||"";return this.isExtension&&(e=e.split('href="/kindredapp/#').join('href="/index.html#')),this.isExtension&&(e=e.split("TS_BASE_PATH").join("/index.html#")),e}},methods:{prettyTimePast:I,visitItem(e,t=!1){this.visit({_id:e.id,type:e.type,url:e.url},{},t)},removeFeedItem(){this.sendReq("/feed/removeById",{feedId:this.feedItem._id}).then(e=>{this.$emit("dismissed"),this.RefreshStats()})},dismiss(){this.sendReq("/user/notification/remove",{id:this.feedItem._id}).then(e=>{this.$emit("dismissed"),this.RefreshStats()})}},created(){var e;this.feedEntry=(e=this.feedItem)==null?void 0:e.feedEntry}}),b={key:0,class:"ms-1 py-2 feedItem"},$={key:0},D={class:"d-flex justify-content-between align-items-center"},T={class:"ms-1 d-flex flex-gap-sm align-items-center"},_={key:0,class:"me-1"},C={key:1},w={class:"small text-muted ms-auto"},j={key:1},V={class:"d-flex justify-content-between align-items-center"},B={class:"ms-1 d-flex flex-gap-sm flex-wrap justify-content-between align-items-center"},F={class:"d-flex flex-gap-sm"},N={class:""},R={class:"small text-muted"},U=["innerHTML"];function M(e,t,l,m,S,A){const o=y("b-icon"),u=y("router-link");return e.feedEntry&&e.feedEntry.feedInfo?(i(),n("div",b,[e.feedItem.refType=="sharedItem"?(i(),n("div",$,[s("div",D,[s("div",T,[r(o,{icon:"share",class:"me-1"}),e.feedEntry.feedInfo.sharingUser?(i(),k(u,{key:0,to:`/user/profile/${e.feedEntry.feedInfo.sharingUser.id}`},{default:g(()=>[e.isFamilyMemberId(e.feedEntry.feedInfo.sharingUser.id)?(i(),n("div",_,d(e.feedEntry.feedInfo.sharingUser.displayedName||e.feedEntry.feedInfo.sharingUser.username),1)):(i(),n("div",C,d(e.feedEntry.feedInfo.sharingUser.username),1))]),_:1},8,["to"])):f("",!0),t[5]||(t[5]=p(" shared ")),s("button",{class:"btn btn-link",onClick:t[0]||(t[0]=a=>e.visitItem(e.feedEntry.feedInfo.itemData))},d(e.feedEntry.feedInfo.itemData.name),1),s("button",{class:"btn btn-link",onClick:t[1]||(t[1]=a=>e.visitItem(e.feedEntry.feedInfo.itemData,!0))},[r(o,{icon:"info-circle"})]),t[6]||(t[6]=p(" with you. ")),s("span",w,d(e.prettyTimePast(e.feedEntry.createdAt))+" ago",1)]),s("div",null,[s("button",{class:"btn btn-link",title:"Remove Feed Item",onClick:t[2]||(t[2]=a=>e.removeFeedItem())},[r(o,{icon:"x-lg"})])])])])):e.feedItem.refType=="notification"?(i(),n("div",j,[s("div",V,[s("div",B,[s("div",F,[s("span",N,[r(o,{icon:"bell",title:"Notification"})]),s("div",{role:"button",onClick:t[3]||(t[3]=a=>e.hideDetails=!e.hideDetails)},d(e.feedEntry.feedInfo.itemData.title),1)]),s("div",R,d(e.prettyTimePast(e.feedEntry.createdAt))+" ago ",1)]),s("div",null,[s("button",{class:"btn btn-link",title:"dismiss notification",onClick:t[4]||(t[4]=a=>e.dismiss())},[r(o,{icon:"x-lg"})])])]),e.hideDetails?f("",!0):(i(),n("div",{key:0,innerHTML:e.feedMessage,class:"small p-2"},null,8,U))])):f("",!0)])):f("",!0)}const q=v(E,[["render",M],["__scopeId","data-v-32d25fe6"]]);export{q as V};
