import{a as A,_ as N}from"./components.global5n24RCIC.js";import I from"./AddItemBupo5MFl.js";import V from"./TaskBarDKM43gH9.js";import{d as $,j as d,K as l,z as r,k as s,s as p,F as v,P as y,m as k,r as m,i,Q as u,R as C}from"./@vueC3Nhqlrl.js";import"./vue3-toastifyDll2FbVh.js";import"./@capacitorCjBcbZvA.js";import"./bootstrap-vue-nextDnMzdrWQ.js";import"./PopCollectionSelectorDtsi0cBR.js";import"./CreateCollectionCvnp9GSK.js";import"./TIIconDefaultDZ-9wHcm.js";import"./ai_lookup_utilszDX_hcwM.js";import"./ItemImageBounipmB.js";import"./CollectionButtonListDy0-Tbdc.js";import"./ItemTypese0F2nuP7.js";import"./AddItemFromLibraryResultsB-9vIRhu.js";const w=[{name:"email",label:"Email",icon:"envelope",enabled:!1,type:"items",builtin:!0,items:[],itemCache:[],tabs:[],order:0},{name:"chat",label:"Chat",icon:"chat",enabled:!1,type:"items",builtin:!0,items:[],itemCache:[],tabs:[],order:1},{name:"calendar",label:"Calendar",icon:"calendar",enabled:!1,type:"items",builtin:!0,items:[],itemCache:[],tabs:[],order:2},{name:"photos",label:"Photos",icon:"image",enabled:!1,type:"items",builtin:!0,items:[],itemCache:[],tabs:[],order:3},{name:"files",label:"Files",icon:"files",enabled:!1,type:"items",builtin:!0,items:[],itemCache:[],tabs:[],order:4},{name:"music",label:"Music",icon:"headphones",enabled:!1,type:"items",builtin:!0,items:[],itemCache:[],tabs:[],order:5}],z=$({name:"TaskbarSettings",mixins:[A],components:{AddItem:I,TaskBar:V},data(){return{options:null,taskButtons:[],selectedButtonName:void 0,loading:!1,counter:0}},mounted(){},computed:{},methods:{async applyChanges(){this.loading=!0,await this.UpdateTaskBar([...this.taskButtons]),await this.RefreshAll(),await this.loadTaskButtons(),this.counter++,this.showToast("Taskbar updated",{variant:"success"}),this.loading=!1},async removeTaskItem(e){const t=this.taskButtons.find(a=>a.name===this.selectedButtonName);t&&(t.items=t.items.filter(a=>a.id!==e),await this.applyChanges())},async addTaskItem(e){const t=this.taskButtons.find(a=>a.name===this.selectedButtonName);t&&t.items.push({id:e,label:e}),await this.applyChanges()},removeItem(e,t){const a=this.taskButtons.find(c=>c.name===e);a&&(a.items=a.items.filter(c=>c.id!==t),this.applyChanges())},addItemModal(e){this.selectedButtonName=e,this.showModal("add-item-taskbar-modal")},addNewButton(){this.showModal("add-button-modal")},removeButton(e){this.taskButtons=this.taskButtons.filter(t=>t.name!==e),this.applyChanges()},async closeAddSite(e){e&&(this.closeModal("add-item-taskbar-modal"),await this.addTaskItem(e))},async loadTaskButtons(){if(this.taskButtons=[],this.userPrefs.data.taskbar&&Array.isArray(this.userPrefs.data.taskbar)&&(this.taskButtons=[...this.userPrefs.data.taskbar]),!this.taskButtons||this.taskButtons.length==0)this.taskButtons=[...w];else for(const e of w)this.taskButtons.filter(a=>a!=null).find(a=>a.name===e.name)||this.taskButtons.push(e);this.taskButtons.sort((e,t)=>e.order-t.order)}},created(){this.loadTaskButtons()}}),E={class:"t-viewpage"},M={class:"container-fluid-max1200"},S={class:"text-muted small mb-4"},P={key:0,class:"my-2 color-warning3"},x={class:"row"},F={class:"col-md d-flex flex-gap"},R={class:"ms-2"},U={class:"col-md-2"},j={class:"row"},D={class:"col"},q={class:"wwrap"};function G(e,t,a,c,K,L){const g=m("AddItem"),B=m("b-modal"),b=m("b-icon"),_=m("b-form-checkbox"),h=m("b-button"),T=m("TaskBar");return i(),d("div",E,[l(B,{lazy:"true",id:"add-item-taskbar-modal",title:"Add Item","hide-footer":"",size:"lg"},{default:r(()=>[l(g,{onClose:e.closeAddSite,collectionIds:[],excludeAllCollections:!0},null,8,["onClose"])]),_:1}),l(B,{lazy:"true",id:"add-button-modal",title:"Add Button","hide-footer":"",size:"lg"},{default:r(()=>t[1]||(t[1]=[u(" test ")])),_:1}),s("div",M,[t[7]||(t[7]=s("h2",{class:"my-3"},"TaskBar Settings",-1)),s("div",S,[e.isMobile||e.browserName=="safari"?(i(),d("div",P," WARNING: Experimental Feature not available on mobile devices or Safari. ")):p("",!0),t[2]||(t[2]=s("div",{class:"mt-1"}," Your task bar is available on the home screen and allows quickly access to important items. ",-1))]),t[8]||(t[8]=s("div",{class:"row"},[s("div",{class:"col-md"}," Task Button "),s("div",{class:"col-md-2"},"Enable")],-1)),t[9]||(t[9]=s("hr",null,null,-1)),(i(!0),d(v,null,y(e.taskButtons,(o,f)=>(i(),d("div",null,[s("div",x,[s("div",F,[l(b,{icon:o.icon},null,8,["icon"]),s("div",R,C(o.label),1)]),s("div",U,[(i(),k(_,{modelValue:o.enabled,"onUpdate:modelValue":n=>o.enabled=n,value:!0,"unchecked-value":!1,id:"taskButtonEnabled"+f,name:"taskButtonEnabled"+f,key:"taskButtonEnabled"+f,switch:!0,"switch-size":"sm","switch-color":"primary","switch-vertical":"true",class:"mb-2"},null,8,["modelValue","onUpdate:modelValue","id","name"])),o.builtin?p("",!0):(i(),k(h,{key:0,variant:"link",onClick:n=>e.removeButton(o.name)},{default:r(()=>t[3]||(t[3]=[u("Remove")])),_:2},1032,["onClick"]))])]),s("div",j,[s("div",D,[(i(!0),d(v,null,y(o.itemCache.filter(n=>n!=null),(n,Q)=>(i(),d("div",q,[u(C(e.textTruncate(n.name,30))+" ",1),l(h,{variant:"link",onClick:W=>e.removeItem(o.name,n._id)},{default:r(()=>[l(b,{icon:"x"})]),_:2},1032,["onClick"])]))),256)),o.itemCache.length==0?(i(),k(h,{key:0,class:"m-0 p-0 small",size:"sm",variant:"link",onClick:n=>e.addItemModal(o.name)},{default:r(()=>[l(b,{icon:"plus"}),t[4]||(t[4]=u(" Add item"))]),_:2},1032,["onClick"])):p("",!0)])]),t[5]||(t[5]=s("hr",null,null,-1))]))),256)),s("div",null,[l(h,{variant:"primary",onClick:t[0]||(t[0]=o=>e.applyChanges()),disabled:e.loading},{default:r(()=>t[6]||(t[6]=[u(" Apply")])),_:1},8,["disabled"])])]),e.userPrefs.loaded?(i(),k(T,{key:0,counter:e.counter},null,8,["counter"])):p("",!0)])}const rt=N(z,[["render",G]]);export{rt as default};
