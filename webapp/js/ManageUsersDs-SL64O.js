import{A as C}from"./AddUserBcqnlYBr.js";import{P as M}from"./TIIconDefaultB4jiNlod.js";import{_ as I,aj as x}from"./components.globalDizx_NTC.js";import{j as a,K as s,z as r,k as i,r as l,ac as N,i as o,L as h,Q as T,m as u,F as A,P as B,p as L,R as _,s as d}from"./@vueC3Nhqlrl.js";import"./ProfileImageEditorDUcTiiTY.js";import"./SelectImageB1vQtVs9.js";import"./UsageLimitsComponentDuaQTkYh.js";import"./BonusTimeComponentCayYUZpH.js";import"./vue3-toastifyDll2FbVh.js";import"./@capacitorCjBcbZvA.js";import"./bootstrap-vue-nextDnMzdrWQ.js";const P={name:"ManageUsers",components:{AddUser:C,ProfileImage:M},data(){return{errorMessage:null,userFields:[{key:"id",sortable:!0,label:""}]}},mounted(){},computed:{userList(){return this.users?[...this.users].sort(function(e,n){return x(e,n,"username")}):[]}},methods:{clickOnUser(e){e._id==this.currentUserId?this.navigateTo("/settings/loginprefs"):(e==null?void 0:e.type)!="admin"?this.navigateTo(`/manage/user/${e._id}/loginprefs`):this.navigateTo(`/user/profile/${e._id}`)},navigateTo(e){return this.$router.push(e)},async newUserCreated(e){await this.RefreshUsers(),this.closeModal("add-user-modal"),this.$router.push(`/manage/user/${e._id}/loginprefs`)}},created(){this.RefreshUsers()}},z={class:"container-fluid-max1200"},D={class:"d-flex flex-gap-1 my-2"},R={class:"btn btn-primary",title:"Add User",id:"addUserButton",role:"button"},S={class:"d-flex align-items-center justify-content-between"},V=["onClick"],j={class:"xsmall text-muted"},F={class:"d-flex flex-gap-1"},O={key:0},q={key:0},E={key:0},K={key:0},Q={key:0};function G(e,n,H,J,W,p){const y=l("AddUser"),k=l("b-modal"),c=l("b-icon"),v=l("b-button"),f=l("b-col"),b=l("b-row"),w=l("ProfileImage"),m=l("b-link"),U=l("TIcon"),g=N("b-modal");return o(),a("div",null,[s(k,{lazy:"true",id:"add-user-modal",title:"","hide-footer":"",size:"lg","hide-header":""},{default:r(()=>[s(y,{onNewUserCreated:p.newUserCreated,onClose:n[0]||(n[0]=t=>{e.RefreshUsers(),e.closeModal("add-user-modal")})},null,8,["onNewUserCreated"])]),_:1}),i("div",z,[n[3]||(n[3]=i("div",{class:"my-3"},[i("h2",null,"User Management")],-1)),s(b,{class:"row"},{default:r(()=>[s(f,{class:"col"},{default:r(()=>[i("div",D,[h((o(),a("div",R,[s(c,{icon:"plus-lg"}),n[1]||(n[1]=T(" Add User "))])),[[g,void 0,void 0,{"add-user-modal":!0}]]),h((o(),u(v,{id:"switchUserButton",variant:"outline-secondary",class:"border ms-1 d-flex flex-gap-sm align-items-center"},{default:r(()=>[s(c,{icon:"arrow-left-right"}),n[2]||(n[2]=i("div",null,"Switch User",-1))]),_:1})),[[g,void 0,void 0,{"switch-user-modal":!0}]])])]),_:1})]),_:1}),s(b,{class:"row"},{default:r(()=>[s(f,{class:"col"},{default:r(()=>[(o(!0),a(A,null,B(p.userList,(t,$)=>(o(),a("div",{key:$,class:"my-3 border rounded p-4 hoverrow"},[i("div",S,[i("div",{class:"d-flex align-items-center flex-gap-1",role:"button",onClick:X=>p.clickOnUser(t)},[s(w,{profileImage:t.profileImage,width:40},null,8,["profileImage"]),i("div",null,[i("div",{class:L(t.type=="restricted"?"linklike-bw":"")},_(e.textTruncate(t.displayedName||t.username,30))+" "+_(t.displayedName?`(${t.username})`:"")+" "+_(t._id==e.currentUserId?" [you]":""),3),i("div",j,_(t.type),1)])],8,V),i("div",null,[i("div",F,[t.type=="restricted"?(o(),u(m,{key:0,to:`/manage/user/${t._id}/loginprefs?menu=true`,class:"linklike-bw"},{default:r(()=>[s(c,{icon:"gear"}),e.isMobile?d("",!0):(o(),a("span",O," Settings "))]),_:2},1032,["to"])):d("",!0),t.type=="restricted"?(o(),u(m,{key:1,to:`/manage/user/${t._id}/usage`,class:"linklike-bw"},{default:r(()=>[s(c,{icon:"clock-history"}),e.isMobile?d("",!0):(o(),a("span",q," Usage"))]),_:2},1032,["to"])):d("",!0),t.type=="restricted"?(o(),u(m,{key:2,to:`/userLibrary/${t._id}?show=addContent`,class:"linklike-bw"},{default:r(()=>[s(c,{icon:"plus-lg"}),e.isMobile?d("",!0):(o(),a("span",E," Add Conent"))]),_:2},1032,["to"])):d("",!0),t.type=="restricted"?(o(),u(m,{key:3,to:`/userLibrary/${t._id}`,class:"linklike-bw"},{default:r(()=>[s(U,{name:"library",width:16}),e.isMobile?d("",!0):(o(),a("span",K," Library"))]),_:2},1032,["to"])):d("",!0),s(m,{class:"linklike-bw",to:`/user/profile/${t._id}`},{default:r(()=>[s(c,{icon:"person-square"}),e.isMobile?d("",!0):(o(),a("span",Q," Profile "))]),_:2},1032,["to"])])])])]))),128))]),_:1})]),_:1})])])}const de=I(P,[["render",G]]);export{de as default};
