import{Q as l,ae as c,f as i,a8 as f,aA as m}from"./components.globalSAVxUKYX.js";async function p(e){return(await l("/client/item/info",e)).result}async function I(e,t=null,n=null,o=!1){if(!e)throw console.error("Link not specified"),new Error("Link not specified");if(!e.startsWith("http"))throw console.error("Invalid link"),new Error("Invalid link");e=c(e);try{const a=await i("/client/item/similarItemsByURL",{url:e}),{exactMatches:s}=a.result;if(s&&s.length>0)return{itemId:s[0].itemId}}catch{console.error("similarItemsByURL failed")}const r=await i("/client/item/save",{details:{url:e,sourceInfo:n,type:"link"},collectionIds:t},{includeEncInfo:!0,dontBlockForMeta:o});if(!r.success)throw console.error("saveNewItemFromLink failed"),new Error("saveNewItemFromLink failed");return r.result}async function w(e,t,n){if(!e){console.error("Image not specified");return}let{fileData:o,fileType:r}=f(e);console.log("saveBannerImage",r);const a=await i("/client/userfile/upload",{refId:t,refType:"item",fileType:r,encInfo:n,filename:"banner",fileData:o});if(!a.success)return console.error("upload failed"),!1;const s=a.result;if(m(s),(await i("/client/item/update",{itemId:t,data:{imageFilename:"uf_"+s,encInfo:n}})).success)return!0}export{I as a,p as c,w as s};
