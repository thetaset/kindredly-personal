import{I as _,a as x,b as ee}from"./ItemTargetAudiencesCuVZ52MA.js";import{f as R,D as F,_ as W,a as ie,H as se,C as te,l as le,d as O}from"./components.global5n24RCIC.js";import{d as G,j as n,K as t,z as l,r as a,i as o,k as s,Q as d,s as u,ac as oe,F as N,P as S,m as p,R as m,L as v}from"./@vueC3Nhqlrl.js";import{I as ne}from"./ItemCategoriesD-ZemUt1.js";import{P as re}from"./PublicProfileEditBQPXtV-L.js";import{I as de}from"./ItemImageBounipmB.js";import{U as ae}from"./UploadItemImageCxhdkg2A.js";import"./vue3-toastifyDll2FbVh.js";import"./@capacitorCjBcbZvA.js";import"./bootstrap-vue-nextDnMzdrWQ.js";import"./TIIconDefaultDZ-9wHcm.js";import"./item.storeJyG03RbI.js";import"./vue-advanced-cropperDRfTlVFt.js";const ue=G({name:"ItemSensitivity",components:{ItemMinAgeGroup:_,ItemEduValue:x,ItemTargetAudiences:ee},props:{itemId:{type:String,required:!0}},data(){return{itemDetails:null,useCriteria:{eduValue:"eduval_na",minAgeGroup:"minage_na",targetAudiences:["ta_all"]},errorMessage:null}},mounted(){},computed:{},methods:{save(){R("/client/item/update",{itemId:this.itemId,data:{useCriteria:[this.useCriteria.eduValue,this.useCriteria.minAgeGroup,...this.useCriteria.targetAudiences],encInfo:this.itemDetails.encInfo}}).then(i=>{i.success?(this.$emit("close",!0),this.errorMessage=null):(console.error("Error:",i.message),this.errorMessage=i.message)})},async loadItemInfo(){const i=await R("/client/item/info",{itemId:this.itemId,detailsOnly:!0});if(i.success){try{if(this.itemDetails=i.result.details,this.itemDetails.useCriteria){const e=F(this.itemDetails.useCriteria);this.useCriteria.eduValue=e.eduValue||this.useCriteria.eduValue,this.useCriteria.minAgeGroup=e.minAgeGroup||this.useCriteria.minAgeGroup,this.useCriteria.targetAudiences=e.targetAudiences||this.useCriteria.targetAudiences}}catch{console.error("Error loading")}this.errorMessage=null}else console.error("Error:",i.message),this.errorMessage=i.message},closeMe(){this.$emit("close",!1)}},created(){this.loadItemInfo()}});function me(i,e,V,M,A,T){const $=a("ItemEduValue"),C=a("ItemMinAgeGroup"),b=a("ItemTargetAudiences"),U=a("b-button"),y=a("b-form");return o(),n("div",null,[t(y,{class:"mx-4"},{default:l(()=>[e[5]||(e[5]=s("div",{class:"mb-1 mb-2"}," Educational Value ",-1)),t($,{value:i.useCriteria,"onUpdate:value":e[0]||(e[0]=I=>i.useCriteria=I)},null,8,["value"]),e[6]||(e[6]=s("div",{class:"mb-1 mb-2"}," Min Age Group ",-1)),t(C,{value:i.useCriteria,"onUpdate:value":e[1]||(e[1]=I=>i.useCriteria=I)},null,8,["value"]),e[7]||(e[7]=s("div",{class:"mb-1 mb-2"}," Target Audiences ",-1)),t(b,{value:i.useCriteria,"onUpdate:value":e[2]||(e[2]=I=>i.useCriteria=I)},null,8,["value"]),e[8]||(e[8]=s("div",{class:"mb-4"},null,-1)),t(U,{variant:"primary",class:"float-right",onClick:e[3]||(e[3]=I=>i.save())},{default:l(()=>e[4]||(e[4]=[d("Save")])),_:1})]),_:1})])}const pe=W(ue,[["render",me]]);let be=[{value:0,text:"Sunday"},{value:1,text:"Monday"},{value:2,text:"Tuesday"},{value:3,text:"Wednesday"},{value:4,text:"Thursday"},{value:5,text:"Friday"},{value:6,text:"Saturday"}];function q(){return{method:"DAILY",settings:{timeOfDay:"04:00",daysOfWeek:[],expireItems:!0,expireItemsAfterXDays:100}}}const fe=G({mixins:[ie],name:"Publish",components:{ItemImage:de,ItemSensitivity:pe,ItemCategories:ne,UploadItemImage:ae,PublicProfileEdit:re},data(){return{itemId:null,item:null,itemInfo:null,items:[],useCriteria:null,publishedInfo:null,publishName:null,publishDescription:null,publishVisibilityCode:1,publishUpdateType:"ON_DEMAND",publishType:"col",daysOfWeek:be,publishConfig:q(),imageRefresh:0,errorMessage:null,publishComplete:!1,loading:!1,perms:[],currentUserPermission:null}},mounted(){},computed:{isOwner(){return this.currentUserPermission=="owner"},canPublish(){return this.isAdminUser&&["editor","owner"].includes(this.currentUserPermission)},isPublished(){var i;return(i=this.publishedInfo)==null?void 0:i.published},isPublisher(){var i,e;return this.publishedInfo&&((i=this.publishedInfo)==null?void 0:i.publicUserId)==((e=this.publicProfile)==null?void 0:e._id)}},methods:{prettyTime:se,tagName:te,async saveDetails(){await this.saveChanges(),this.closeModal("details-modal")},async saveFeedSettings(){await this.saveChanges(),this.closeModal("feedsettings-modal")},async clearFeedSettings(){this.publishConfig=q(),this.closeModal("feedsettings-modal")},async selectAllDays(){this.publishConfig.settings.daysOfWeek=this.daysOfWeek.map(i=>i.value)},async saveChanges(){const i=await this.sendReq("/client/item/update",{itemId:this.itemId,data:{publishName:this.publishName,publishDescription:this.publishDescription,description:this.item.description||this.publishDescription,publishVisibilityCode:this.publishVisibilityCode||1,publishUpdateType:this.publishUpdateType,publishType:this.publishType||"col",publishConfig:this.publishType=="feed"?this.publishConfig:null,encInfo:this.item.encInfo}});i.success?(this.errorMessage=null,await this.loadItem()):(console.error("Error:",i.message),this.errorMessage=i.message)},async refreshImage(){await this.loadPage(),this.closeModal("pub-image-modal")},async loadPublishedInfo(){var e;const i=await this.sendReq("/published/view",{itemId:this.item.publishId});i.result&&(this.publishedInfo=(e=i.result)==null?void 0:e.info)},async loadItem(){var e;const i=await this.sendReq("/client/item/info",{itemId:this.itemId,detailsOnly:!0});i.success?(this.itemInfo=i.result,this.item=(e=this.itemInfo)==null?void 0:e.details,this.useCriteria=F(this.item.useCriteria),this.publishName=this.item.publishName||this.item.name,this.publishType=this.item.publishType||"col",this.publishConfig=this.item.publishConfig||this.publishConfig,this.publishDescription=this.item.publishDescription||this.item.description,this.publishVisibilityCode=this.item.publishVisibilityCode||1,this.item.published&&this.item._id&&await this.loadPublishedInfo()):console.error(i.message)},async loadCollectionItems(){const i=await this.sendReq("/client/collection/listItemsWithInfoByUser",{collectionId:this.itemId});i.success?(this.items=le(i.result,50,!1),this.errorMessage=null):this.errorMessage=i.message},async verifyAndConfirm(){this.publishComplete=!1,await this.saveChanges(),this.publishVisibilityCode==2?!this.item.categories||this.item.categories.length==0?this.errorMessage="Categories are required":!this.item.publishName||this.item.publishName.length<6?this.errorMessage="Name is not long enough":!this.useCriteria||this.useCriteria.length<6?this.errorMessage="Age Group and Educational Value is required":!this.item.imageFilename||this.item.imageFilename.length==0?this.errorMessage="an image is required":this.showModal("publish-modal"):this.showModal("publish-modal")},async loadPermissions(){const i=await this.sendReq("/item/permissions/list",{itemId:this.itemId});if(!i.success){this.showToast("Error loading permissions",{title:"Error",variant:"danger",solid:!0});return}this.perms=i.result;const e=this.perms.find(V=>V.userId==this.currentUserId);O("CurrentUser Permission data",e),this.currentUserPermission=e==null?void 0:e.permission},async publish(){this.loading=!0;try{await this.decryptCollection(),this.errorMessage=null;const i=await this.sendReq("/published/publishCollection",{itemId:this.itemId});O("Publish response",i),await this.loadItem(),i.success?this.publishComplete=!0:this.errorMessage=i.message}catch(i){console.error(i),this.errorMessage="Error publishing collection"}finally{this.loading=!1}},async loadPage(){this.loading=!0,await this.loadPublicProfile(),await this.loadItem(),await this.loadPermissions(),await this.loadCollectionItems(),await this.RefreshCurrentUser(!0),this.loading=!1},getEncryptionInfo(){var V,M;const i=((V=this.item)==null?void 0:V.encInfo)||((M=this.item)==null?void 0:M.encrypted),e=this.items.filter(A=>{var T;return A.encrypted||!!A.encInfo||!!((T=A.collectionRelation)!=null&&T.encInfo)}).length;return{collectionEncrypted:i,encryptedItemCount:e}},async isDecrypted(){const{collectionEncrypted:i,encryptedItemCount:e}=this.getEncryptionInfo();return!(i||e>0)},async decryptCollection(){await this.sendReq("/client/collection/decrypt",{collectionId:this.itemId}),await this.loadItem(),await this.loadCollectionItems();let i=await this.isDecrypted();O("Decrypted",i),i||this.showToast("Error preparing collection",{title:"Error",variant:"danger",solid:!0})},async unpublish(){await this.sendReq("/published/unpublish",{publishId:this.item.publishId}),this.loadPage()}},created(){this.itemId=this.$route.params.itemId,this.loadPage()}}),he={class:"my-4 d-flex align-items-center flex-gap-1"},ge={class:"d-flex flex-wrap flex-gap-1 mt-2"},ve={class:"d-flex align-items-center flex-gap-1"},ye={class:"d-flex flex-wrap flex-gap-1"},Ie={class:"smt-4"},Ce={class:"text-center"},ce={key:0,class:"my-2"},ke={class:"mb-2"},Pe={key:0},we=["src"],Ve={key:1},Ae={key:1,class:"mt-3"},De={key:2,class:"mt-3"},Me={key:3,class:"mt-3"},Te={class:"d-flex justify-content-center"},Ue={class:"mb-2 mt-4 p-3 rounded border",style:{"max-width":"700px"}},Ee={class:"larger mb-4 text-center"},Ne={class:"my-2"},$e={class:"my-2"},ze={class:"my-2"},Oe=["href"],Se={key:0,class:"mt-2"},Re={key:2,class:"text-center py-3"},qe={role:"button"},Fe={role:"button"},We={key:0,class:"mt-2"},Ge={key:0},Le={class:"wwrap h4 mt-4"},Ye={key:0},He={key:0},Be={class:"h5 success-color"},Xe={class:"small mt-3"},je={class:"mt-1"},Ke={class:"mt-1"},Qe={class:"mt-1"},Je={class:"mt-3"},Ze={class:"linklike"},_e={class:"h5"},xe={class:"py-2",role:"button"},ei={class:"larger"},ii={class:"mt-2",size:"sm",role:"button"},si={key:0},ti={key:1},li={key:2},oi={class:"larger"},ni={class:"mt-2",size:"sm",role:"button"},ri={key:0,class:"d-flex flex-gap-sm"},di={key:1},ai={key:0,class:"mt-2"},ui={class:"d-flex flex-gap-sm align-items-center mb-2"},mi={role:"button"},pi={key:0,class:"d-flex flex-gap-sm"},bi={key:1},fi={class:"mb-3"},hi={class:"larger"},gi={role:"button"},vi={class:""},yi={key:0,class:""},Ii={key:1,class:""},Ci={class:"mt-2"},ci={key:0,class:""},ki={key:1,class:""},Pi={class:"mt-2"},wi={key:0,class:""},Vi={key:1,class:""},Ai={key:0},Di={key:1},Mi={key:1,class:"div-10"};function Ti(i,e,V,M,A,T){const $=a("PublicProfileEdit"),C=a("b-modal"),b=a("b-button"),U=a("b-form-checkbox"),y=a("b-form-group"),I=a("b-form-input"),h=a("b-icon"),c=a("b-alert"),L=a("b-form-textarea"),D=a("b-form-radio"),Y=a("UploadItemImage"),H=a("ItemCategories"),B=a("ItemSensitivity"),X=a("TruncateExpand"),k=a("b-col"),P=a("b-row"),j=a("router-link"),K=a("ItemImage"),Q=a("b-button-toolbar"),J=a("b-container"),g=oe("b-modal");return o(),n("div",null,[t(C,{lazy:"true",id:"public-profile-modal",title:"Publishing Profile Settings","hide-footer":""},{default:l(()=>[t($,{onClose:e[0]||(e[0]=r=>{i.closeModal("public-profile-modal"),i.RefreshCurrentUser(),i.loadPublicProfile()})})]),_:1}),t(C,{lazy:"true",id:"feedsettings-modal",title:"Feed Settings",size:"lg","no-close-on-esc":"","no-close-on-backdrop":"",onOk:i.saveFeedSettings,"ok-only":"true"},{default:l(()=>[s("div",null,[t(y,{class:"form-group",description:"Select days of the week"},{default:l(()=>[s("div",he,[e[21]||(e[21]=s("div",null," Days of the Week ",-1)),t(b,{variant:"link",class:"xsmall linklike pill border",size:"sm",onClick:i.selectAllDays},{default:l(()=>e[20]||(e[20]=[d("select all")])),_:1},8,["onClick"])]),s("div",ge,[(o(!0),n(N,null,S(i.daysOfWeek,(r,f)=>(o(),p(U,{key:f,modelValue:i.publishConfig.settings.daysOfWeek,"onUpdate:modelValue":e[1]||(e[1]=w=>i.publishConfig.settings.daysOfWeek=w),value:r.value,class:"me-2"},{default:l(()=>[d(m(r.text),1)]),_:2},1032,["modelValue","value"]))),128))])]),_:1}),e[23]||(e[23]=s("div",{class:"text-muted mt-3 mb-1"},"Time of Day",-1)),t(y,{class:"form-group",description:"Approximate time when the item will be published"},{default:l(()=>[t(I,{modelValue:i.publishConfig.settings.timeOfDay,"onUpdate:modelValue":e[2]||(e[2]=r=>i.publishConfig.settings.timeOfDay=r),type:"time"},null,8,["modelValue"])]),_:1}),t(y,{class:"form-group",description:"Allow items to unpublish after a certain number of days"},{default:l(()=>[s("div",ve,[e[22]||(e[22]=s("div",null," Expire items ",-1)),t(U,{modelValue:i.publishConfig.settings.expireItems,"onUpdate:modelValue":e[3]||(e[3]=r=>i.publishConfig.settings.expireItems=r),onClick:e[4]||(e[4]=r=>i.publishConfig.settings.expireItems?i.publishConfig.settings.expireItemsAfterXDays=100:null),class:"me-2"},null,8,["modelValue"])])]),_:1}),i.publishConfig.settings.expireItems?(o(),p(y,{key:0,class:"mt-2",description:"Expire time"},{default:l(()=>[s("div",ye,[t(I,{type:"number",modelValue:i.publishConfig.settings.expireItemsAfterXDays,"onUpdate:modelValue":e[5]||(e[5]=r=>i.publishConfig.settings.expireItemsAfterXDays=r)},null,8,["modelValue"])])]),_:1})):u("",!0)])]),_:1},8,["onOk"]),t(C,{lazy:"true",id:"publish-modal",title:"Publish Collection","hide-footer":"",size:"lg"},{default:l(()=>{var r,f,w,E;return[s("div",Ie,[s("div",Ce,[i.publicProfile?(o(),n("div",ce,[s("div",ke,[e[24]||(e[24]=d(" You are publishing as: ")),s("b",null,m(i.publicProfile.username),1)]),(f=(r=i.publicProfile)==null?void 0:r.profileImage)!=null&&f.filename?(o(),n("div",Pe,[s("img",{class:"profileImageContainer",src:i.getImagePathWithDefault((E=(w=i.publicProfile)==null?void 0:w.profileImage)==null?void 0:E.filename)},null,8,we),e[25]||(e[25]=s("div",{class:"mt-2 mb-2 small text-muted"}," Your public profile image. ",-1))])):(o(),n("div",Ve,[t(h,{class:"h1",icon:"person"})]))])):u("",!0),i.publishVisibilityCode?u("",!0):(o(),n("div",Ae," A link is required to see this item ")),i.publishVisibilityCode==1?(o(),n("div",De," This item will be visible to friends or anyone with the link. ")):u("",!0),i.publishVisibilityCode==2?(o(),n("div",Me,e[26]||(e[26]=[d(" This item is will show up in "),s("b",null,"public",-1),d(" search results. ")]))):u("",!0)]),s("div",Te,[s("div",Ue,[s("div",Ee,[t(h,{icon:"info-circle"}),e[27]||(e[27]=d(" Publishing Agreement "))]),s("div",Ne,[t(h,{icon:"record"}),e[28]||(e[28]=d(" All published content must be family friendly. (no mature content whatsoever, no nudity, no violence, no hate speech, etc.) "))]),s("div",$e,[t(h,{icon:"record"}),e[29]||(e[29]=d(" Published content cannot be used to promote or sell products or services. "))]),s("div",ze,[t(h,{icon:"record"}),e[30]||(e[30]=d(" Published content must be accurate and not misleading. "))]),e[31]||(e[31]=s("div",{class:"mt-3 warning3-color"}," Any content which does not adhere to this policy will be removed. Accounts that violate this policy may be suspended or banned. ",-1))])]),i.publishComplete?(o(),p(c,{key:0,"model-value":!0,class:"m-3"},{default:l(()=>[e[32]||(e[32]=d(" Publish Successful! ")),s("a",{target:"_blank",href:`${i.config.serverHostname}/v/${i.item.publishId}`}," View ",8,Oe),e[33]||(e[33]=s("br",null,null,-1)),i.publishVisibilityCode?u("",!0):(o(),n("div",Se," Use the link above to share with others. "))]),_:1})):u("",!0),i.errorMessage?(o(),p(c,{key:1,variant:"danger",class:"m-3","model-value":!0,innerHTML:i.errorMessage},null,8,["innerHTML"])):u("",!0),e[41]||(e[41]=s("div",{class:"mt-4"},null,-1)),i.publishComplete?u("",!0):(o(),n("div",Re,[i.isOwner?i.publicProfile&&(!i.publicProfile.enabled||i.publicProfile.blockedAt)?(o(),p(c,{key:1,"model-value":!0,variant:"danger"},{default:l(()=>[e[36]||(e[36]=s("b",null,"You cannot publish",-1)),e[37]||(e[37]=d(": public profile is not enabled or has been blocked. ")),v((o(),n("div",qe,e[35]||(e[35]=[d(" Update Profile ")]))),[[g,void 0,void 0,{"public-profile-modal":!0}]])]),_:1})):i.currentUser.publicId?(o(),p(b,{key:3,size:"lg",onClick:e[6]||(e[6]=z=>i.publish()),disabled:i.loading,variant:"danger"},{default:l(()=>e[40]||(e[40]=[d(" Publish Now? ")])),_:1},8,["disabled"])):(o(),p(c,{key:2,"model-value":!0},{default:l(()=>[e[39]||(e[39]=d(" Please create a public profile before publishing. ")),v((o(),n("div",Fe,e[38]||(e[38]=[d(" Create a profile ")]))),[[g,void 0,void 0,{"public-profile-modal":!0}]])]),_:1})):(o(),p(c,{key:0,"model-value":!0},{default:l(()=>e[34]||(e[34]=[s("b",null,"You cannot publish",-1),d(": You are not the owner of this item. Only the item owner can publish. ")])),_:1}))]))])]}),_:1}),t(C,{lazy:"true",id:"details-modal",title:"Publish Details",size:"lg","ok-text":"Save",onOk:e[14]||(e[14]=r=>i.saveDetails())},{default:l(()=>[t(y,{class:"form-group"},{default:l(()=>[t(I,{size:"lg",id:"formName",modelValue:i.publishName,"onUpdate:modelValue":e[7]||(e[7]=r=>i.publishName=r),placeholder:"Name/Title"},null,8,["modelValue"])]),_:1}),t(y,{class:"form-group"},{default:l(()=>[t(L,{size:"lg",id:"formDescription",modelValue:i.publishDescription,"onUpdate:modelValue":e[8]||(e[8]=r=>i.publishDescription=r),placeholder:"Description"},null,8,["modelValue"])]),_:1}),t(y,{class:"form-group mt-3"},{default:l(()=>[e[45]||(e[45]=s("div",{class:"mb-1 text-muted"},"Visibility",-1)),t(D,{modelValue:i.publishVisibilityCode,"onUpdate:modelValue":e[9]||(e[9]=r=>i.publishVisibilityCode=r),value:0},{default:l(()=>e[42]||(e[42]=[d("Link Required")])),_:1},8,["modelValue"]),t(D,{modelValue:i.publishVisibilityCode,"onUpdate:modelValue":e[10]||(e[10]=r=>i.publishVisibilityCode=r),value:1},{default:l(()=>e[43]||(e[43]=[d("Friends")])),_:1},8,["modelValue"]),i.canPublishPublicly?(o(),p(D,{key:0,disabled:!i.canPublishPublicly,modelValue:i.publishVisibilityCode,"onUpdate:modelValue":e[11]||(e[11]=r=>i.publishVisibilityCode=r),value:2},{default:l(()=>e[44]||(e[44]=[d(" Public ")])),_:1},8,["disabled","modelValue"])):u("",!0)]),_:1}),t(y,{class:"mt-3 form-group",description:"Users can subscribed to feeds but feeds cannot be added to a person's library."},{default:l(()=>[e[48]||(e[48]=s("div",{class:"text-muted mb-1"},"Publish Type",-1)),t(D,{modelValue:i.publishType,"onUpdate:modelValue":e[12]||(e[12]=r=>i.publishType=r),value:"col"},{default:l(()=>e[46]||(e[46]=[d("Collection (default)")])),_:1},8,["modelValue"]),t(D,{modelValue:i.publishType,"onUpdate:modelValue":e[13]||(e[13]=r=>i.publishType=r),value:"feed"},{default:l(()=>e[47]||(e[47]=[d("Feed")])),_:1},8,["modelValue"])]),_:1}),i.canPublishPublicly?u("",!0):(o(),n("div",We,[t(c,{variant:"danger","model-value":!0},{default:l(()=>e[49]||(e[49]=[d(" Publishing publicly is not available for all users at this time. Please check back later. ")])),_:1})]))]),_:1}),t(C,{lazy:"true",id:"pub-image-modal",title:"Item Image",size:"lg","hide-footer":""},{default:l(()=>[t(Y,{itemId:i.itemId,editPermission:!0,onClose:e[15]||(e[15]=r=>i.refreshImage())},null,8,["itemId"])]),_:1}),t(C,{lazy:"true",id:"categories-modal",title:"Categories",size:"lg","hide-footer":""},{default:l(()=>[s("div",null,[t(H,{itemId:i.itemId,onClose:e[16]||(e[16]=r=>{i.closeModal("categories-modal"),i.loadItem()})},null,8,["itemId"])])]),_:1}),t(C,{lazy:"true",id:"useCriteria-modal",title:"Content Sensitivity",size:"lg","hide-footer":""},{default:l(()=>[s("div",null,[t(B,{itemId:i.itemId,onClose:e[17]||(e[17]=r=>{i.closeModal("useCriteria-modal"),i.loadItem()})},null,8,["itemId"])])]),_:1}),i.item&&!i.loading?(o(),n("div",Ge,[t(J,{class:"container"},{default:l(()=>[t(P,null,{default:l(()=>[t(k,{class:""},{default:l(()=>[e[51]||(e[51]=s("div",{class:"h2"},"Collection Publishing",-1)),e[52]||(e[52]=s("div",{class:"text-muted my-2"}," A published collection is a copy of your library collection that can be shared with friends or the community. They do not include any child collections. ",-1)),s("div",Le,m(i.item.name),1),i.item.description?(o(),n("div",Ye,[t(X,{content:i.item.description,class:"wwrap"},{default:l(()=>e[50]||(e[50]=[s("span",{class:"linklike ms-1",role:"button"},"more",-1)])),_:1},8,["content"])])):u("",!0)]),_:1})]),_:1}),t(P,{class:"row"},{default:l(()=>[t(k,{class:"col"},{default:l(()=>[i.publishedInfo?(o(),n("div",He,[e[55]||(e[55]=s("hr",{class:"mb-4"},null,-1)),s("div",Be,[t(h,{icon:"check-circle"}),e[53]||(e[53]=d(" This item has been published "))]),s("div",null,[s("div",Xe,[s("div",je," Last Updated: "+m(i.prettyTime(i.publishedInfo.updatedAt)),1),s("div",Ke," First Published: "+m(i.prettyTime(i.publishedInfo.createdAt)),1),s("div",Qe,"Items: "+m(i.publishedInfo.itemCount),1)]),s("div",Je,[e[54]||(e[54]=s("div",{class:"small mb-2 larger"},"Publish Link",-1)),t(j,{to:`/v/${i.item.publishId}`,class:""},{default:l(()=>[s("pre",Ze,m(i.config.serverHostname+"/v/"+i.item.publishId),1)]),_:1},8,["to"])])])])):u("",!0)]),_:1})]),_:1}),e[78]||(e[78]=s("hr",null,null,-1)),t(P,{class:"row"},{default:l(()=>[t(k,{class:"hoverrow rounded"},{default:l(()=>[s("div",_e,[e[56]||(e[56]=d(" Banner Image ")),t(b,{size:"sm",variant:"link"},{default:l(()=>[t(h,{icon:"pencil"})]),_:1})]),v((o(),n("div",xe,[t(K,{item:i.item,style:{"max-width":"100%",width:"300px","min-height":"150px"},class:"rounded"},null,8,["item"])])),[[g,void 0,void 0,{"pub-image-modal":!0}]])]),_:1})]),_:1}),e[79]||(e[79]=s("hr",null,null,-1)),t(P,null,{default:l(()=>[t(k,{class:"hoverrow rounded"},{default:l(()=>[s("div",ei,[e[57]||(e[57]=d(" Details ")),v((o(),p(b,{variant:"link",size:"sm"},{default:l(()=>[t(h,{icon:"pencil"})]),_:1})),[[g,void 0,void 0,{"details-modal":!0}]])]),v((o(),n("div",ii,[e[60]||(e[60]=s("div",{class:"text-muted mt-2"},"Name",-1)),s("div",null,m(i.publishName),1),e[61]||(e[61]=s("div",{class:"text-muted mt-2"},"Description",-1)),s("div",null,m(i.publishDescription),1),s("div",null,[e[58]||(e[58]=s("div",{class:"text-muted mt-2"},"Visibility",-1)),i.publishVisibilityCode?u("",!0):(o(),n("span",si,"Link Required")),i.publishVisibilityCode==1?(o(),n("span",ti,"Friends")):u("",!0),i.publishVisibilityCode==2?(o(),n("span",li,"Public")):u("",!0)]),s("div",null,[e[59]||(e[59]=s("div",{class:"text-muted mt-2"},"Publish Type",-1)),d(" "+m(i.publishType=="col"?"Collection":"Feed"),1)])])),[[g,void 0,void 0,{"details-modal":!0}]])]),_:1})]),_:1}),e[80]||(e[80]=s("hr",null,null,-1)),i.publishType=="feed"&&i.publishConfig?(o(),n(N,{key:0},[t(P,null,{default:l(()=>[t(k,{class:"hoverrow rounded"},{default:l(()=>{var r,f;return[s("div",oi,[e[62]||(e[62]=d(" Feed Settings ")),v((o(),p(b,{variant:"link",size:"sm"},{default:l(()=>[t(h,{icon:"pencil"})]),_:1})),[[g,void 0,void 0,{"feedsettings-modal":!0}]])]),v((o(),n("div",ni,[e[64]||(e[64]=s("div",{class:"text-muted mt-2"},"Method",-1)),s("div",null,m(i.publishConfig.method),1),e[65]||(e[65]=s("div",{class:"text-muted mt-2"},"Days of Week",-1)),s("div",null,[((r=i.publishConfig.settings)==null?void 0:r.daysOfWeek.length)<7?(o(),n("div",ri,[(o(!0),n(N,null,S((f=i.publishConfig.settings)==null?void 0:f.daysOfWeek,(w,E)=>{var z;return o(),n("div",{key:E},m((z=i.daysOfWeek.find(Z=>Z.value==w))==null?void 0:z.text),1)}),128))])):(o(),n("div",di," Everyday "))]),e[66]||(e[66]=s("div",{class:"text-muted mt-2"},"Time of Day (24h)",-1)),s("div",null,m(i.publishConfig.settings.timeOfDay),1),e[67]||(e[67]=s("div",{class:"text-muted mt-2"},"Expire Items",-1)),s("div",null,m(i.publishConfig.settings.expireItems?"Yes":"No"),1),i.publishConfig.settings.expireItems?(o(),n("div",ai,[e[63]||(e[63]=s("div",{class:"text-muted"},"Expire after",-1)),s("div",null,m(i.publishConfig.settings.expireItemsAfterXDays)+" days ",1)])):u("",!0)])),[[g,void 0,void 0,{"feedsettings-modal":!0}]])]}),_:1})]),_:1}),e[68]||(e[68]=s("hr",null,null,-1))],64)):u("",!0),t(P,null,{default:l(()=>[t(k,{class:"hoverrow rounded"},{default:l(()=>[s("div",ui,[e[69]||(e[69]=s("div",{class:"larger"},"Categories",-1)),v((o(),p(b,{variant:"link",size:"sm"},{default:l(()=>[t(h,{icon:"pencil"})]),_:1})),[[g,void 0,void 0,{"categories-modal":!0}]])]),v((o(),n("div",mi,[i.item.categories&&i.item.categories.length>0?(o(),n("div",pi,[(o(!0),n(N,null,S(i.item.categories,(r,f)=>(o(),n("div",{key:f,class:"pill border"},m(r),1))),128))])):(o(),n("div",bi,"No categories assigned"))])),[[g,void 0,void 0,{"categories-modal":!0}]])]),_:1})]),_:1}),e[81]||(e[81]=s("hr",null,null,-1)),t(P,null,{default:l(()=>[t(k,{class:"hoverrow rounded"},{default:l(()=>{var r,f;return[s("div",fi,[s("div",hi,[e[70]||(e[70]=d(" Age Group and Educational Value ")),v((o(),p(b,{variant:"link",size:"sm"},{default:l(()=>[t(h,{icon:"pencil"})]),_:1})),[[g,void 0,void 0,{"useCriteria-modal":!0}]])])]),v((o(),n("div",gi,[s("div",vi,[e[71]||(e[71]=s("div",{class:"text-muted"},"Educational Value:",-1)),(r=i.useCriteria)!=null&&r.eduValue?(o(),n("div",yi,m(i.tagName(i.useCriteria.eduValue)),1)):(o(),n("div",Ii,"not specified"))]),s("div",Ci,[e[72]||(e[72]=s("div",{class:"text-muted"},"Min Age Group:",-1)),(f=i.useCriteria)!=null&&f.minAgeGroup?(o(),n("div",ci,m(i.tagName(i.useCriteria.minAgeGroup)),1)):(o(),n("div",ki,"not specified"))]),s("div",Pi,[e[73]||(e[73]=s("div",{class:"text-muted"},"Target Audience(s):",-1)),i.useCriteria&&i.useCriteria.targetAudiences&&i.useCriteria.targetAudiences.length>0?(o(),n("div",wi,m(i.useCriteria.targetAudiences.map(w=>i.tagName(w)).join(", ")),1)):(o(),n("div",Vi,"not specified"))])])),[[g,void 0,void 0,{"useCriteria-modal":!0}]])]}),_:1})]),_:1}),e[82]||(e[82]=s("hr",null,null,-1)),t(P,{class:"row"},{default:l(()=>[t(k,{class:"col"},{default:l(()=>[t(c,{"model-value":!0},{default:l(()=>e[74]||(e[74]=[s("b",null,"Note:",-1),d(" Published collections do not include sub collections. Only items directly under the current item will be published.")])),_:1})]),_:1})]),_:1}),e[83]||(e[83]=s("div",{class:"my-4"},null,-1)),t(P,{class:"mt-4 pb-4"},{default:l(()=>[t(k,{class:"col"},{default:l(()=>[i.errorMessage?(o(),n("div",Ai,[t(c,{variant:"danger","model-value":!0,innerHTML:i.errorMessage},null,8,["innerHTML"])])):u("",!0),i.item.publishId&&!i.isPublisher?(o(),n("div",Di,[t(c,{variant:"danger","model-value":!0},{default:l(()=>e[75]||(e[75]=[d("You do not have permission to publish this collection")])),_:1})])):u("",!0),t(Q,null,{default:l(()=>[t(b,{variant:"outline-secondary",to:`/collection/${i.itemId}`},{default:l(()=>e[76]||(e[76]=[d("Cancel")])),_:1},8,["to"]),!i.item.publishId||i.isPublisher?(o(),p(b,{key:0,class:"ms-auto",variant:"danger",onClick:e[18]||(e[18]=r=>i.verifyAndConfirm())},{default:l(()=>[d(m(i.item.publishId&&i.isPublished?"Republish":"Publish"),1)]),_:1})):u("",!0),i.item.publishId&&i.isPublisher&&i.isPublished?(o(),p(b,{key:1,class:"ms-3",variant:"secondary",onClick:e[19]||(e[19]=r=>i.unpublish())},{default:l(()=>e[77]||(e[77]=[d(" Unpublish ")])),_:1})):u("",!0)]),_:1})]),_:1})]),_:1})]),_:1})])):u("",!0),i.isMobile?(o(),n("div",Mi)):u("",!0)])}const Yi=W(fe,[["render",Ti]]);export{Yi as default};
