import{ay as w,ak as m,_ as b}from"./components.globalDizx_NTC.js";import{d as g,j as i,k as n,m as f,K as a,Q as l,R as p,F as C,P as O,s as r,z as k,r as u,i as o,p as T}from"./@vueC3Nhqlrl.js";const _=g({name:"ItemTypes",props:{itemType:{type:String,required:!1},onlyThing:{type:Boolean,default:!1},itemSubType:{type:String,required:!1},disableButtons:{type:Boolean,default:!1}},data(){return{errorMessage:null,typeOptions:w.map(e=>({value:e.key,text:e.name,icon:e.icon,primary:e.primary})),itype:void 0,istype:void 0,searchText:"",showOptions:!1}},mounted(){document.addEventListener("click",this.deselectMenu)},beforeUnmount(){document.removeEventListener("click",this.deselectMenu)},computed:{currentType(){return this.istype?m()[this.istype]:m()[this.itype]},typesToShow(){return this.searchText?this.typeOptions.filter(e=>e.text.toLowerCase().includes(this.searchText.toLowerCase())):this.typeOptions}},methods:{showOptionsNow(){this.showOptions=!0,this.$nextTick(()=>{this.$refs.searchText.focus()})},toggleShow(){this.showOptions=!this.showOptions},deselectMenu(e){e.target.closest(".ignoreDeselect")||e.target.closest(".lookupContainer")||(this.showOptions=!1)},selectType(e){this.errorMessage=null,e=="link"||e=="note"?(this.istype=e,this.itype=e):(this.itype="thing",this.istype=e),this.disableButtons&&this.update(),this.showOptions=!1},update(){this.errorMessage=null,this.$emit("update",{type:this.itype,subType:this.istype})},close(){this.$emit("close")}},created(){this.itype=this.itemType,this.istype=this.itemSubType}}),$={class:"lookupContainer"},S={key:1},x={key:0},B={key:1,class:"text-muted-extra"},M={key:0,class:"lookupResultsDropdown border shadow rounded p-3 me-3 pb-5"},N={class:"d-flex flex-gap-sm flex-wrap"},V=["onClick"],L={key:0,class:"text-muted"},D={key:0,class:"text-danger p-2 my-2"},E={key:1,class:"d-flex justify-content-between mt-3"};function z(e,t,I,U,j,q){var y,h;const v=u("b-form-input"),d=u("b-icon"),c=u("b-button");return o(),i("div",null,[n("div",$,[n("div",null,[e.showOptions?(o(),f(v,{key:0,autocorrect:"off",autocapitalize:"off",class:"ignoreDeselect py-2",modelValue:e.searchText,"onUpdate:modelValue":t[0]||(t[0]=s=>e.searchText=s),type:"search",ref:"searchText",placeholder:"Type to Search"},null,8,["modelValue"])):(o(),i("div",S,[n("div",{class:"px-2 py-2 border rounded ignoreDeselect hoverrow",role:"button",onClick:t[1]||(t[1]=s=>e.showOptionsNow())},[e.currentType!=null?(o(),i("div",x,[a(d,{icon:(y=e.currentType)==null?void 0:y.icon},null,8,["icon"]),l(" "+p((h=e.currentType)==null?void 0:h.name),1)])):(o(),i("div",B," [Select Type] "))])]))]),e.showOptions?(o(),i("div",M,[n("div",null,[n("div",N,[(o(!0),i(C,null,O(e.typesToShow,s=>(o(),i("div",{role:"button",class:T(["rounded px-2 py-1",s.value==e.istype?"btn btn-primary":"fillrow invborder"]),onClick:F=>e.selectType(s.value),key:s.value},[s.icon?(o(),f(d,{key:0,icon:s.icon},null,8,["icon"])):r("",!0),n("span",{class:T(["ms-1",s.primary?"font-weight-strong":""])},p(s.text),3)],10,V))),128))]),e.typesToShow.length==0?(o(),i("div",L,"No results found")):r("",!0)])])):r("",!0)]),e.errorMessage?(o(),i("div",D,p(e.errorMessage),1)):r("",!0),e.disableButtons?r("",!0):(o(),i("div",E,[a(c,{variant:"outline-secondary",onClick:t[2]||(t[2]=s=>e.close())},{default:k(()=>t[4]||(t[4]=[l("Cancel")])),_:1}),a(c,{variant:"primary",onClick:t[3]||(t[3]=s=>e.update())},{default:k(()=>t[5]||(t[5]=[l("Update")])),_:1})]))])}const P=b(_,[["render",z]]);export{P as I};
