import{A}from"./AddPublishedToLibraryCH8DTyVO.js";import{P as S}from"./PlaceholderListBUV05qM-.js";import{i as P,_ as I,a as G,G as q}from"./components.global5n24RCIC.js";import{F as C}from"./@egjsD-CUwjTO.js";import{d as _,j as s,k as l,K as o,s as r,m as b,R as p,Q as T,r as a,i as t,z as g,F as f,P as h}from"./@vueC3Nhqlrl.js";const x=_({name:"GalleryItem",components:{},props:{item:{type:Object,required:!0},selectedItemsIds:{type:Array,required:!1},isSelected:{type:Boolean,required:!1},galleryType:{type:String,required:!1}},data(){return{componentId:this.generateUniqueId(),showPopover:!1}},mounted(){},computed:{isMobile:P},methods:{generateUniqueId(){return"id-"+Math.random().toString(36).substr(2,9)},selectItem(){this.$emit("selectItem",this.item._id)}},created(){}}),F={key:0},L=["id"],M={class:"tImageWrapper d-flex justify-content-center"},j=["src"],V={key:0,class:"tImageOverlay"},R={class:"px-1"},z={class:"mt-3 d-flex"},B={class:"me-1 d-flex flex-gap-1"},N={class:"font-weight-strong"},E={class:"d-flex justify-content-between align-items-center small"},O={class:"d-flex align-items-center mt-1"},U={key:0,class:"white-color blue-bg py-0 px-2 small rounded"},D={class:"d-flex align-items-center my-1 flex-gap-sm mx-2"},H={key:0,class:"fillrow text-center me-1 px-1 rounded"},K={key:1,class:"me-1"},Q={class:"d-flex flex-gap-sm mx-2"},W={class:"d-flex align-items-center text-center"},J={key:0,class:"ms-1",title:"Item is in your library"},X={key:0},Y={key:1};function Z(e,i,v,k,$,w){var d;const n=a("b-icon");return e.item?(t(),s("div",F,[l("div",{id:e.componentId,class:"rounded galleryCard",role:"button",onClick:i[1]||(i[1]=c=>e.selectItem())},[l("div",M,[l("img",{class:"rounded fade-in-fast",src:e.item.imageFilename,alt:"",draggable:"false"},null,8,j),e.isSelected?(t(),s("div",V,[o(n,{icon:"check-lg",class:"largerx"})])):r("",!0)]),l("div",R,[l("div",z,[l("div",B,[e.item.curated?(t(),b(n,{key:0,icon:"patch-check-fill",class:"linkcolor",title:"Verified by a curator"})):r("",!0)]),l("div",N,p(e.item.name),1)]),l("div",E,[l("div",O,[e.item.type=="col"?(t(),s("div",U,[o(n,{icon:"collection-fill",class:"me-1"}),i[2]||(i[2]=T(" Collection "))])):r("",!0),l("div",D,[e.item.cost?(t(),s("div",H,p(e.item.cost&&e.item.cost.name&&e.item.cost.name.length>0?e.item.cost.name:"?"),1)):r("",!0),e.item.ads?(t(),s("div",K,p(e.item.ads&&e.item.ads.key=="ads_no"?"No Ads":e.item.ads?"Contains Ads":""),1)):r("",!0)])]),l("div",Q,[l("div",W,[(d=e.item.data)!=null&&d.inLibrary?(t(),s("div",J,[o(n,{icon:"bookmark-check-fill"})])):r("",!0)]),e.galleryType=="multiSelect"?(t(),s("div",{key:0,class:"blueBox ms-1 px-2 rounded tbtn d-flex justify-content-center align-items-center",role:"button",onClick:i[0]||(i[0]=c=>e.selectItem())},[e.isSelected?(t(),s("div",X,[o(n,{icon:"check-circle"})])):(t(),s("div",Y,[o(n,{icon:"circle"})]))])):r("",!0)])])])],8,L)])):r("",!0)}const ee=I(x,[["render",Z]]),te=_({name:"GaleryView",mixins:[G],components:{GalleryItem:ee,PlaceholderList:S,Flicking:C},props:{groupId:{type:String,required:!0},selectedItemsIds:{type:Array,required:!1},galleryType:{type:String,required:!0}},data(){return{group:void 0,errorMessage:null,loading:!0,title:void 0,items:[],style:void 0}},methods:{isSelected(e){return this.selectedItemsIds&&this.selectedItemsIds.includes(e)},async selectItem(e){this.$emit("selectItem",e)},async loadGroup(){const e=await this.sendReq("/published/getGalleryGroupAndItems",{groupId:this.groupId,pageInfo:{page:0,pageSize:3}});e.success?(this.group=e.result.group,this.items=q(e.result.items),this.errorMessage=null):(console.error("Error:",e.message),this.errorMessage=e.message),this.loading=!1}},created(){this.loadGroup()}}),se={key:0},le={key:1,class:"tsFadeInAnimationMed"};function ie(e,i,v,k,$,w){const n=a("GalleryItem"),d=a("Flicking"),c=a("PlaceholderList");return t(),s("div",null,[e.group?(t(),s("div",se,[o(d,{options:{align:"center",circular:!1,defaultIndex:3},class:"pt-3 pb-5 mx-5"},{default:g(()=>[(t(!0),s(f,null,h(e.items,(u,y)=>(t(),b(n,{key:y,item:u,isSelected:e.isSelected(u._id),onSelectItem:e.selectItem,galleryType:e.galleryType,class:"mx-2 rounded hoverGrow"},null,8,["item","isSelected","onSelectItem","galleryType"]))),128))]),_:1})])):r("",!0),e.loading?(t(),s("div",le,[o(c,{"num-of-items":5,size:"class",itemClass:"galleryItemPH",wrapperClass:"d-flex  justify-content-center flex-wrap flex-gap-1"})])):r("",!0)])}const re=I(te,[["render",ie]]),oe=_({name:"GaleryView",mixins:[G],components:{GalleryRow:re,AddPublishedToLibrary:A,PlaceholderList:S},props:{galleryId:{type:String,required:!0},galleryType:{type:String,required:!1,default:"addOneAtAtime"},showTitle:{type:Boolean,required:!1,default:!0}},data(){return{selectedItemId:void 0,errorMessage:null,loading:!0,groups:[],selectedItemsIds:[]}},mounted(){},computed:{},methods:{async loadGalleryGroups(){try{const e=await this.sendReq("/published/listGroupIdsForGallery",{galleryId:this.galleryId,pageInfo:{page:0,pageSize:3}});e.success?(this.groups=e.result,this.errorMessage=null):(this.groups=[{_id:"fallback",name:"Recently Added",showTitle:!0,query:"recent"}],console.error("Error, using dfault group recent:",e.message))}catch(e){console.error("Error:",e),this.errorMessage=e}finally{this.loading=!1}},async selectItem(e){this.galleryType=="addOneAtAtime"?this.$router.push("/v/"+e):this.galleryType=="multiSelect"?this.selectedItemsIds.includes(e)?this.selectedItemsIds=this.selectedItemsIds.filter(i=>i!=e):this.selectedItemsIds.push(e):this.galleryType=="emitSelect"&&this.$emit("selectItem",e)}},created(){this.loadGalleryGroups()}}),ne={class:"d-flex justify-content-center align-items-center"},ae={key:1,class:"text-center m-4"},de=["href"],ce=["href"],me={class:"d-flex flex-gap-1 justify-content-center no-overflow"},ue={key:0,class:"h4 mb-4 galleryTitle text-center"},pe={key:0,class:"tsFadeInAnimationMed mb-4"},ye={class:"mb-4",key:"i"};function ge(e,i,v,k,$,w){const n=a("router-link"),d=a("AddPublishedToLibrary"),c=a("b-modal"),u=a("GalleryRow"),y=a("PlaceholderList");return t(),s("div",null,[o(c,{lazy:"true",id:"addtolib-modal",size:"lg",title:"","hide-footer":""},{default:g(()=>[l("div",ne,[o(n,{class:"mb-2",to:`/v/${e.selectedItemId}`},{default:g(()=>i[0]||(i[0]=[T("View Item")])),_:1},8,["to"]),e.currentUser&&e.selectedItemId?(t(),b(d,{key:0,itemId:e.selectedItemId},null,8,["itemId"])):(t(),s("div",ae,[l("a",{class:"btn btn-lg btn-primary my-4 mx-2",href:`${e.appPrefix}#/register`}," Register ",8,de),l("a",{class:"btn btn-lg btn-outline-primary my-4 mx-2",href:e.appPrefix}," Sign-In ",8,ce)]))])]),_:1}),(t(!0),s(f,null,h(e.groups,m=>(t(),s("div",{key:m._id,class:"mb-4"},[l("div",me,[l("div",null,[m.showTitle&&e.showTitle?(t(),s("div",ue,p(m.name),1)):r("",!0),o(u,{groupId:m._id,onSelectItem:e.selectItem,selectedItemsIds:e.selectedItemsIds,galleryType:e.galleryType},null,8,["groupId","onSelectItem","selectedItemsIds","galleryType"])])])]))),128)),e.loading?(t(),s("div",pe,[(t(),s(f,null,h(3,m=>l("div",ye,[o(y,{"num-of-items":5,size:"class",itemClass:"galleryItemPH",wrapperClass:"d-flex justify-content-center flex-gap-1 flex-wrap"})])),64))])):r("",!0)])}const ve=I(oe,[["render",ge]]);export{ve as G};
