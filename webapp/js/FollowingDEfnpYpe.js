import{a as w,p as _,_ as g}from"./components.globalBic2x0kT.js";import{d as k,j as t,k as f,R as m,s as l,Q as r,F as b,P as y,r as c,ac as I,i as s,K as a,z as n,m as U,L as A}from"./@vueC3Nhqlrl.js";import"./vue3-toastifyDll2FbVh.js";import"./@capacitorCjBcbZvA.js";import"./bootstrap-vue-nextDnMzdrWQ.js";const C=k({name:"Following",mixins:[w],components:{},data(){return{viewAsUserId:void 0,viewAsUser:null,loading:!0,results:[],errorMessage:null}},mounted(){},computed:{},methods:{prettyTimePast:_,async loadViewAsUser(){if(!this.viewAsUserId)return;const e=await this.apiReq("/user/profile/get",{userProfileId:this.viewAsUserId});this.viewAsUser=e.result},async remove(e){await this.getRef("msgBoxConfirm").show("Stop following this item?",{title:"Confirm",okVariant:"danger",okTitle:"Yes",cancelTitle:"No",hideHeaderClose:!1})&&(await this.RemoveFromFollowing(e.refType,e.refId,this.viewAsUserId),this.loadData())},async loadData(){this.loading=!0;try{const e=await this.apiReq("/following/listWithDetailsByUserId",{userId:this.viewAsUserId});this.results=e.result}catch(e){this.errorMessage=e.message,console.error("Error:",e.message)}this.loading=!1}},created(){this.viewAsUserId=this.$route.params.userId,this.loadViewAsUser(),this.loadData()}}),$={class:"container-fluid-max1200"},D={class:"my-3"},V={key:0},F={class:"text-muted mb-4 small"},T={key:0},B={key:0},L={key:0},N={key:1},R=["onClick"],z={key:3,title:"",class:"ms-auto",size:"sm"},P={key:1},x={key:2};function q(e,i,E,M,S,Y){const d=c("router-link"),p=c("b-icon"),u=c("b-badge"),h=I("b-popover");return s(),t("div",$,[f("h2",D,[e.viewAsUser?(s(),t("span",V,m(e.viewAsUser.username)+"'s",1)):l("",!0),i[0]||(i[0]=r(" Following "))]),f("div",F,[e.viewAsUser?l("",!0):(s(),t("div",T,"You will be notified when items you follow are updated."))]),!e.loading&&e.results.length>0?(s(),t("div",B,[(s(!0),t(b,null,y(e.results,(o,v)=>(s(),t("div",{key:v,class:"d-flex flex-gap-1 border-top py-1 align-items-center"},[o.refType=="pub_col"?(s(),t("div",L,[a(d,{class:"default-text-color",to:`/v/${o.refId}`},{default:n(()=>[r(m(o.item.name),1)]),_:2},1032,["to"]),a(p,{class:"ms-1",title:"Published",icon:"cloud"}),o.inLibraryId?(s(),U(d,{key:0,class:"ms-1",to:`/collection/${o.inLibraryId}`,size:"sm",title:"View in library"},{default:n(()=>[a(u,{variant:"primary"},{default:n(()=>i[1]||(i[1]=[r("in library")])),_:1})]),_:2},1032,["to"])):l("",!0)])):o.refType=="col"?(s(),t("div",N,[a(d,{to:`/collection/${o.refId}`},{default:n(()=>[r(m(o.item.name),1)]),_:2},1032,["to"])])):l("",!0),o.inLibraryId?A((s(),t("div",z,[a(u,{variant:"secondary"},{default:n(()=>i[3]||(i[3]=[r("unfollow")])),_:1})])),[[h,"Cannot be unfollowed while in your library ",void 0,{hover:!0,right:!0}]]):(s(),t("button",{key:2,title:"remove",class:"btn btn-link ms-auto",size:"sm",onClick:j=>e.remove(o)},[a(u,{variant:"danger"},{default:n(()=>i[2]||(i[2]=[r("unfollow")])),_:1})],8,R))]))),128))])):!e.loading&&e.results.length==0?(s(),t("div",P,"No collections in follow list.")):e.loading?(s(),t("div",x,"Loading...")):l("",!0)])}const J=g(C,[["render",q]]);export{J as default};
