import{_ as P,p as k,a as C,b as z}from"./css-selectB-mTe8M1.js";import{u as K,a as Q,D as B,l as W,d as X,j as Y,m as L,o as Z}from"./domutilsDoyZNJC1.js";import{b as N,a as w}from"./boolbaseFcE-Bo6-.js";import{S as F,p as U,i as p,a as m,b as D,c as $}from"./css-whatBWHXJlxz.js";import{i as y,b as S}from"./domhandlerCjB8Dp5l.js";const nn=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function I(t){return t.type!=="pseudo"?!1:nn.has(t.name)?!0:t.name==="not"&&Array.isArray(t.data)?t.data.some(n=>n.some(I)):!1}function tn(t,n,e){const r=n!=null?parseInt(n,10):NaN;switch(t){case"first":return 1;case"nth":case"eq":return isFinite(r)?r>=0?r+1:1/0:0;case"lt":return isFinite(r)?r>=0?Math.min(r,e):1/0:0;case"gt":return isFinite(r)?1/0:0;case"odd":return 2*e;case"even":return 2*e-1;case"last":case"not":return 1/0}}function en(t){for(;t.parent;)t=t.parent;return t}function O(t){const n=[],e=[];for(const r of t)r.some(I)?n.push(r):e.push(r);return[e,n]}const rn={type:F.Universal,namespace:null},sn={type:F.Pseudo,name:"scope",data:null};function mn(t,n,e={}){return fn([t],n,e)}function fn(t,n,e={}){if(typeof n=="function")return t.some(n);const[r,i]=O(U(n));return r.length>0&&t.some(P(r,e))||i.some(s=>j(s,t,e).length>0)}function un(t,n,e,r){const i=typeof e=="string"?parseInt(e,10):NaN;switch(t){case"first":case"lt":return n;case"last":return n.length>0?[n[n.length-1]]:n;case"nth":case"eq":return isFinite(i)&&Math.abs(i)<n.length?[i<0?n[n.length+i]:n[i]]:[];case"gt":return isFinite(i)?n.slice(i+1):[];case"even":return n.filter((s,f)=>f%2===0);case"odd":return n.filter((s,f)=>f%2===1);case"not":{const s=new Set(M(e,n,r));return n.filter(f=>!s.has(f))}}}function In(t,n,e={}){return M(U(t),n,e)}function M(t,n,e){if(n.length===0)return[];const[r,i]=O(t);let s;if(r.length){const f=_(n,r,e);if(i.length===0)return f;f.length&&(s=new Set(f))}for(let f=0;f<i.length&&(s==null?void 0:s.size)!==n.length;f++){const u=i[f];if((s?n.filter(o=>y(o)&&!s.has(o)):n).length===0)break;const a=j(u,n,e);if(a.length)if(s)a.forEach(o=>s.add(o));else{if(f===i.length-1)return a;s=new Set(a)}}return typeof s<"u"?s.size===n.length?n:n.filter(f=>s.has(f)):[]}function j(t,n,e){var r;if(t.some(p)){const i=(r=e.root)!==null&&r!==void 0?r:en(n[0]),s={...e,context:n,relativeSelector:!1};return t.push(sn),A(i,t,s,!0,n.length)}return A(n,t,e,!1,n.length)}function An(t,n,e={},r=1/0){if(typeof t=="function")return H(n,t);const[i,s]=O(U(t)),f=s.map(u=>A(n,u,e,!0,r));return i.length&&f.push(T(n,i,e,r)),f.length===0?[]:f.length===1?f[0]:K(f.reduce((u,h)=>[...u,...h]))}function A(t,n,e,r,i){const s=n.findIndex(I),f=n.slice(0,s),u=n[s],h=n.length-1===s?i:1/0,a=tn(u.name,u.data,h);if(a===0)return[];const E=(f.length===0&&!Array.isArray(t)?Q(t).filter(y):f.length===0?(Array.isArray(t)?t:[t]).filter(y):r||f.some(p)?T(t,[f],e,a):_(t,[f],e)).slice(0,a);let c=un(u.name,E,u.data,e);if(c.length===0||n.length===s+1)return c;const l=n.slice(s+1),d=l.some(p);if(d){if(p(l[0])){const{type:g}=l[0];(g===F.Sibling||g===F.Adjacent)&&(c=k(c,B,!0)),l.unshift(rn)}e={...e,relativeSelector:!1,rootFunc:g=>c.includes(g)}}else e.rootFunc&&e.rootFunc!==N.trueFunc&&(e={...e,rootFunc:N.trueFunc});return l.some(I)?A(c,l,e,!1,i):d?T(c,[l],e,i):_(c,[l],e)}function T(t,n,e,r){const i=P(n,e,t);return H(t,i,r)}function H(t,n,e=1/0){const r=k(t,B,n.shouldTestNextSiblings);return W(i=>y(i)&&n(i),r,!0,e)}function _(t,n,e){const r=(Array.isArray(t)?t:[t]).filter(y);if(r.length===0)return r;const i=P(n,e);return i===N.trueFunc?r:r.filter(i)}const an=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function b(t){return t.type!=="pseudo"?!1:an.has(t.name)?!0:t.name==="not"&&Array.isArray(t.data)?t.data.some(n=>n.some(b)):!1}function cn(t,n,e){const r=n!=null?parseInt(n,10):NaN;switch(t){case"first":return 1;case"nth":case"eq":return isFinite(r)?r>=0?r+1:1/0:0;case"lt":return isFinite(r)?r>=0?Math.min(r,e):1/0:0;case"gt":return isFinite(r)?1/0:0;case"odd":return 2*e;case"even":return 2*e-1;case"last":case"not":return 1/0}}function ln(t){for(;t.parent;)t=t.parent;return t}function R(t){const n=[],e=[];for(const r of t)r.some(b)?n.push(r):e.push(r);return[e,n]}const on={type:m.Universal,namespace:null},hn={type:m.Pseudo,name:"scope",data:null};function bn(t,n,e={}){return gn([t],n,e)}function gn(t,n,e={}){if(typeof n=="function")return t.some(n);const[r,i]=R(D(n));return r.length>0&&t.some(C(r,e))||i.some(s=>G(s,t,e).length>0)}function dn(t,n,e,r){const i=typeof e=="string"?parseInt(e,10):NaN;switch(t){case"first":case"lt":return n;case"last":return n.length>0?[n[n.length-1]]:n;case"nth":case"eq":return isFinite(i)&&Math.abs(i)<n.length?[i<0?n[n.length+i]:n[i]]:[];case"gt":return isFinite(i)?n.slice(i+1):[];case"even":return n.filter((s,f)=>f%2===0);case"odd":return n.filter((s,f)=>f%2===1);case"not":{const s=new Set(V(e,n,r));return n.filter(f=>!s.has(f))}}}function vn(t,n,e={}){return V(D(t),n,e)}function V(t,n,e){if(n.length===0)return[];const[r,i]=R(t);let s;if(r.length){const f=q(n,r,e);if(i.length===0)return f;f.length&&(s=new Set(f))}for(let f=0;f<i.length&&(s==null?void 0:s.size)!==n.length;f++){const u=i[f];if((s?n.filter(o=>S(o)&&!s.has(o)):n).length===0)break;const a=G(u,n,e);if(a.length)if(s)a.forEach(o=>s.add(o));else{if(f===i.length-1)return a;s=new Set(a)}}return typeof s<"u"?s.size===n.length?n:n.filter(f=>s.has(f)):[]}function G(t,n,e){var r;if(t.some($)){const i=(r=e.root)!==null&&r!==void 0?r:ln(n[0]),s={...e,context:n,relativeSelector:!1};return t.push(hn),v(i,t,s,!0,n.length)}return v(n,t,e,!1,n.length)}function En(t,n,e={},r=1/0){if(typeof t=="function")return J(n,t);const[i,s]=R(D(t)),f=s.map(u=>v(n,u,e,!0,r));return i.length&&f.push(x(n,i,e,r)),f.length===0?[]:f.length===1?f[0]:X(f.reduce((u,h)=>[...u,...h]))}function v(t,n,e,r,i){const s=n.findIndex(b),f=n.slice(0,s),u=n[s],h=n.length-1===s?i:1/0,a=cn(u.name,u.data,h);if(a===0)return[];const E=(f.length===0&&!Array.isArray(t)?Y(t).filter(S):f.length===0?(Array.isArray(t)?t:[t]).filter(S):r||f.some($)?x(t,[f],e,a):q(t,[f],e)).slice(0,a);let c=dn(u.name,E,u.data,e);if(c.length===0||n.length===s+1)return c;const l=n.slice(s+1),d=l.some($);if(d){if($(l[0])){const{type:g}=l[0];(g===m.Sibling||g===m.Adjacent)&&(c=z(c,L,!0)),l.unshift(on)}e={...e,relativeSelector:!1,rootFunc:g=>c.includes(g)}}else e.rootFunc&&e.rootFunc!==w.trueFunc&&(e={...e,rootFunc:w.trueFunc});return l.some(b)?v(c,l,e,!1,i):d?x(c,[l],e,i):q(c,[l],e)}function x(t,n,e,r){const i=C(n,e,t);return J(t,i,r)}function J(t,n,e=1/0){const r=z(t,L,n.shouldTestNextSiblings);return Z(i=>S(i)&&n(i),r,!0,e)}function q(t,n,e){const r=(Array.isArray(t)?t:[t]).filter(S);if(r.length===0)return r;const i=C(n,e);return i===w.trueFunc?r:r.filter(i)}export{fn as a,En as b,bn as c,vn as d,gn as e,In as f,mn as i,An as s};
