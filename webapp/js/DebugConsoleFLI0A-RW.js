import{a as C,_ as w}from"./components.globalSAVxUKYX.js";import{d as R,j as m,k as o,K as e,z as a,s as b,r as n,i as p,Q as r,L as k,ab as S,R as i}from"./@vueC3Nhqlrl.js";import"./vue3-toastifyDll2FbVh.js";import"./@capacitorCjBcbZvA.js";import"./bootstrap-vue-nextDnMzdrWQ.js";const O=R({name:"DebugConsole",mixins:[C],data(){return{path:"/client/dbtest",data:null,logOutput:"",loading:!1,clientDebugInfo:null,currentTabs:null,output:null,url:null,userSystemTestResult:null,errorMessage:null,storageInfo:null}},mounted(){},computed:{},methods:{parsedData(){try{return JSON.parse(this.data)}catch(t){return console.error(t),null}},async getCurrentTabs(){let t={active:!0};this.currentTabs=await chrome.tabs.query(t)},async loadStorageInfo(){this.storageInfo=await navigator.storage.estimate()},async getMetaData(){this.url=this.url.trim(),this.url.startsWith("http")||(this.url="https://"+this.url);const t=await this.sendReq("/client/fetchMetadata",{url:this.url,force:!0});this.output=t.result},async getChanges(){const t=this.data?this.parsedData():null,s=await this.sendReq(this.path,t);s.success?(this.logOutput=s.result,this.loading=!1):(console.error("Error:",s.message),this.errorMessage=s.message,this.loading=!1)},async loadClientDebug(){const t=await this.sendReq("/client/debugInfo",{});this.clientDebugInfo=t.result,this.loadStorageInfo()},async runUserSystemTest(){const t=await this.sendReq("/user/debug/statusCheck",{});t.success?this.userSystemTestResult=t.result:this.errorMessage=t.message},async resetDBS(){await this.RefreshAll(!0,!1,!0)},async run(){this.loading=!0;const t=this.data?this.parsedData():null,s=await this.sendReq(this.path,t);s.success?(this.logOutput=s.result,this.loading=!1):(console.error("Error:",s.message),this.errorMessage=s.message,this.loading=!1)}},created(){}}),I={class:"container-fluid"},M={class:"my-2"},T={class:"my-2"},q={key:0},B={key:0,class:"mt-3"};function V(t,s,N,$,E,U){const h=n("b-icon"),u=n("b-button"),d=n("b-col"),c=n("b-row"),_=n("BFormInput"),g=n("b-container"),y=n("b-tab"),v=n("b-tabs"),D=n("b-alert");return p(),m("div",null,[o("div",I,[e(c,{class:"row"},{default:a(()=>[e(d,{class:"col"},{default:a(()=>[s[3]||(s[3]=o("h1",null,"Debug Console",-1)),e(u,{to:"/clienttests",variant:"link"},{default:a(()=>[e(h,{icon:"error"}),s[2]||(s[2]=r(" Test Runner "))]),_:1})]),_:1})]),_:1}),s[9]||(s[9]=o("div",{class:"mb-3"},null,-1)),e(c,{class:"row"},{default:a(()=>[e(d,{class:"col"},{default:a(()=>[e(v,{"content-class":"mt-3"},{default:a(()=>[e(y,{title:"Custom Request"},{default:a(()=>[e(g,{class:"container"},{default:a(()=>[e(c,{class:"mb-2"},{default:a(()=>[e(d,null,{default:a(()=>[o("div",null,[s[6]||(s[6]=o("div",{class:"my-2"},"Path",-1)),e(_,{modelValue:t.path,"onUpdate:modelValue":s[0]||(s[0]=l=>t.path=l),class:"my-2"},null,8,["modelValue"]),s[7]||(s[7]=o("div",{class:"my-2"},"Data (JSON formatted)",-1)),k(o("textarea",{"onUpdate:modelValue":s[1]||(s[1]=l=>t.data=l),class:"my-2"},null,512),[[S,t.data]]),o("div",M,[e(u,{disabled:t.loading,onClick:t.run},{default:a(()=>s[4]||(s[4]=[r("Run ")])),_:1},8,["disabled","onClick"])]),o("div",T,[e(u,{disabled:t.loading,onClick:t.resetDBS},{default:a(()=>s[5]||(s[5]=[r("Reset DBs ")])),_:1},8,["disabled","onClick"])])])]),_:1})]),_:1})]),_:1}),e(g,{class:"mt-5 justify-content-center"},{default:a(()=>{var l,f;return[r(" Loading:"+i(t.loading)+" ",1),s[8]||(s[8]=o("br",null,null,-1)),t.logOutput.results?(p(),m("pre",q,"ROWS:"+i((f=(l=t.logOutput)==null?void 0:l.results)==null?void 0:f.length),1)):b("",!0),o("pre",null,i(t.logOutput),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),t.errorMessage?(p(),m("div",B,[e(D,{variant:"danger","model-value":!0},{default:a(()=>[r(i(t.errorMessage),1)]),_:1})])):b("",!0)])}const z=w(O,[["render",V]]);export{z as default};
