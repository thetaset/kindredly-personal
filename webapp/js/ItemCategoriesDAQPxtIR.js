import{_ as f}from"./components.globalDizx_NTC.js";import{j as c,K as m,z as r,r as d,i as a,k as g,F as p,P as v,m as I,Q as u,R as _,p as C}from"./@vueC3Nhqlrl.js";const b={name:"ItemCategories",props:{itemId:{type:String,required:!0}},data(){return{itemDetails:null,categories:[],categoryOptions:[],loading:!1,errorMessage:null}},mounted(){},computed:{},methods:{toggleCategory(e){this.categories.includes(e)?this.categories=this.categories.filter(t=>t!==e):this.categories.push(e)},save(){this.sendReq("/client/item/update",{itemId:this.itemId,data:{categories:this.categories,encInfo:this.itemDetails.encInfo}}).then(e=>{e.success?(this.$emit("close",!0),this.errorMessage=null):(this.showToast("Unable to update",{variant:"danger",title:"Error",solid:!0}),this.errorMessage=e.message)})},loadCategories(){this.sendReq("/categories",{availOnly:!1}).then(e=>{e.success?(this.categoryOptions=e.result,this.errorMessage=null,this.loading=!1):(console.error("Error:",e.message),this.errorMessage=e.message)})},loadItemInfo(){this.sendReq("/client/item/info",{itemId:this.itemId,detailsOnly:!0}).then(e=>{var t,i;e.success?(this.itemDetails=((t=e.result)==null?void 0:t.details)||{},this.categories=((i=this.itemDetails)==null?void 0:i.categories)||[],this.errorMessage=null):(console.error("Error:",e.message),this.errorMessage=e.message)})},closeMe(){this.$emit("close",!1)}},created(){this.loadCategories(),this.loadItemInfo()}},k={class:"my-2"};function y(e,t,i,M,o,l){const n=d("b-button"),h=d("b-form");return a(),c("div",null,[m(h,{class:"mx-4"},{default:r(()=>[g("div",k,[(a(!0),c(p,null,v(o.categoryOptions,s=>(a(),I(n,{key:s,variant:"outline-primary",class:C(["me-2 mb-2",{active:o.categories.includes(s)}]),onClick:x=>l.toggleCategory(s)},{default:r(()=>[u(_(s),1)]),_:2},1032,["class","onClick"]))),128))]),t[2]||(t[2]=g("div",{class:"mb-4"},null,-1)),m(n,{variant:"primary",class:"float-right",onClick:t[0]||(t[0]=s=>l.save())},{default:r(()=>t[1]||(t[1]=[u("Save")])),_:1})]),_:1})])}const q=f(b,[["render",y]]);export{q as I};
