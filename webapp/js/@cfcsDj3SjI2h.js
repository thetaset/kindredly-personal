import{C as l}from"./@egjsD-CUwjTO.js";function O(t){return Object.keys(t)}var v="__observers__",c="__computed__",f=1,a="__CFCS_DETECTED_DEPENDENCIES__",_=function(t,r){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u])},_(t,r)};function C(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");_(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}function d(){Object[a]=Object[a]||{};var t=Object[a];return t[f]=t[f]||[],t[f]}function E(){var t=d();return t[t.length-1]}function D(t){var r=d(),e=[],n={host:t,observers:e,push:function(u){t!==u&&e.indexOf(u)===-1&&e.push(u)}};return r.push(n),n}function y(){var t=d();return t.pop()}var g=function(){function t(e){this._emitter=new l,this._current=e}var r=t.prototype;return Object.defineProperty(r,"current",{get:function(){var e=E();return e==null||e.push(this),this._current},set:function(e){this._setCurrent(e)},enumerable:!1,configurable:!0}),r.subscribe=function(e){return this.current,this._emitter.on("update",e),this},r.unsubscribe=function(e){return this._emitter.off("update",e),this},r._setCurrent=function(e){var n=this._current,u=e!==n;this._current=e,u&&this._emitter.trigger("update",e,n)},r.toString=function(){return"".concat(this.current)},r.valueOf=function(){return this.current},t}(),S=function(t){C(r,t);function r(n){var u=t.call(this)||this;return u._computedCallback=n,u._registered=[],u._onCheckUpdate=function(){u._setCurrent(u.current)},u._current=u.current,u}var e=r.prototype;return Object.defineProperty(e,"current",{get:function(){var n=this;D(this);var u=this._computedCallback(),s=y();return this._registered.forEach(function(i){i.unsubscribe(n._onCheckUpdate)}),s.observers.forEach(function(i){i.subscribe(n._onCheckUpdate)}),this._registered=s.observers,u},enumerable:!1,configurable:!0}),r}(g);function p(t,r,e){e===void 0&&(e=r);var n={configurable:!0,get:function(){return o(this,e).current},set:function(u){o(this,e,u).current=u}};Object.defineProperty(t,r,n),e!==r&&Object.defineProperty(t,e,{configurable:!0,get:function(){return o(this,e).current}})}function w(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.length>1?p(t[0],t[1]):function(e,n){return p(e,n,t[0])}}function j(t){t.subscribe=function(r,e){this[r],o(this,r).subscribe(e)},t.unsubscribe=function(r,e){var n=this;if(!r){O(h(this)).forEach(function(u){n.unsubscribe(u)});return}r in this&&o(this,r).unsubscribe(e)}}function R(t){var r=t.prototype;j(r)}function P(t){return new g(t)}function k(t){return new S(t)}function T(t){var r={};return Object.defineProperty(t,v,{get:function(){return r}}),r}function h(t,r){var e,n;t[v]||T(t);var u=t[v];if(!r){var s=(n=(e=t==null?void 0:t.constructor)===null||e===void 0?void 0:e.prototype)===null||n===void 0?void 0:n[c];s&&s.forEach(function(i){!(i in u)&&i in t&&t[i]})}return u}function o(t,r,e){var n=h(t);return n[r]||(n[r]=P(e)),n[r]}function A(t,r,e){var n=e.get;function u(){var b=h(this,!0);return r in b||(b[r]=k(n.bind(this))),o(this,r).current}var s={configurable:!0,get:u};t[c]||(t[c]=[]);var i=t[c];return i.indexOf(r)===-1&&i.push(r),Object.defineProperty(t,r,s),s}export{A as C,w as O,R,o as g};
