import{a as b,w as c,_ as g}from"./components.globalBic2x0kT.js";import C from"./VersionInfoDkquLWVM.js";import{d as h,j as i,k as t,K as n,Q as o,z as m,s as d,r as l,i as a}from"./@vueC3Nhqlrl.js";import"./vue3-toastifyDll2FbVh.js";import"./@capacitorCjBcbZvA.js";import"./bootstrap-vue-nextDnMzdrWQ.js";const y=h({name:"ServerSettings",mixins:[b],components:{VersionInfo:C},data(){return{enableCustomServer:!1,customServerURL:null}},mounted(){},computed:{},methods:{async loadSettings(){const e=(await this.sendReq("/client/serverSettings/get")).result;if((e==null?void 0:e.apiURL)==null){this.enableCustomServer=!1,this.customServerURL=null;return}this.enableCustomServer=e.apiURL!=null,this.customServerURL=e.apiURL},async saveUpdates(){await this.sendReq("/client/serverSettings/update",{enableServerSettings:this.enableCustomServer,serverSettings:{apiURL:this.enableCustomServer?this.customServerURL:null,isCustomServer:this.enableCustomServer}}),await this.loadSettings(),await c(!0),this.$router.push("/signin")},cancelChanges(){this.$router.push("/signin")}},created(){this.loadSettings()}}),U={class:"d-flex justify-content-center p-3"},R={class:"container-box"},k={class:"mt-4"},w={class:""},V={class:"mt-3 text-muted"},_={class:"text-center"},L=["href"],x={key:0,class:"mt-5"},$={class:"border rounded fillrow p-3 d-flex flex-gap-1 align-items-center"},B=["href"],E={class:"mt-5 text-center"},z={key:0},I={class:"d-flex flex-gap-1 align-items-center mb-4"},K={key:0,class:"mb-5"},N={class:"mt-5"},j={class:"d-flex justify-content-between mt-4"},q={key:0,class:"mt-5 text-center"};function T(s,e,D,H,Q,A){const v=l("b-icon"),u=l("b-button"),f=l("b-form-checkbox"),p=l("b-form-input"),S=l("VersionInfo");return a(),i("div",U,[t("div",R,[t("div",k,[t("h2",w,[n(v,{icon:"database-fill-gear"}),e[5]||(e[5]=o(" Kindredly Server Settings "))]),t("div",V,[e[11]||(e[11]=o(" Custom server allows users to host their own Kindredly server for their family and friends. ")),e[12]||(e[12]=t("br",null,null,-1)),e[13]||(e[13]=t("br",null,null,-1)),t("div",_,[e[6]||(e[6]=t("i",null,"This feature is still in testing and invite only.",-1)),e[7]||(e[7]=t("br",null,null,-1)),t("a",{href:`${s.config.serverHostname}/downloadServer`},"Download Server",8,L)]),s.isExtension?d("",!0):(a(),i("div",x,[t("div",$,[n(v,{icon:"info-circle-fill"}),t("div",null,[e[8]||(e[8]=o(" This feature is only available for the ")),t("a",{href:`${s.config.serverHostname}/download`},"Browser Extension",8,B),e[9]||(e[9]=o(" version of Kindredly. "))])]),t("div",E,[n(u,{variant:"outline-secondary",size:"lg",onClick:e[0]||(e[0]=r=>s.cancelChanges())},{default:m(()=>e[10]||(e[10]=[o("Back to Sign-In")])),_:1})])]))])]),s.isExtension?(a(),i("div",z,[t("div",null,[t("div",I,[n(f,{modelValue:s.enableCustomServer,"onUpdate:modelValue":e[1]||(e[1]=r=>s.enableCustomServer=r),value:!0,"unchecked-value":!1},null,8,["modelValue"]),e[14]||(e[14]=t("div",null,"Use a custom server",-1))]),s.enableCustomServer?(a(),i("div",K,[n(p,{id:"customServerURL",autofocus:"",modelValue:s.customServerURL,"onUpdate:modelValue":e[2]||(e[2]=r=>s.customServerURL=r),placeholder:"https://myseveripaddress/apipath",required:""},null,8,["modelValue"]),e[15]||(e[15]=t("div",{class:"mt-1 text-muted"},"Enter a custom server URL",-1))])):d("",!0)]),t("div",N,[t("div",j,[n(u,{variant:"outline-secondary",size:"lg",onClick:e[3]||(e[3]=r=>s.cancelChanges())},{default:m(()=>e[16]||(e[16]=[o("Cancel")])),_:1}),n(u,{variant:"primary",size:"lg",onClick:e[4]||(e[4]=r=>s.saveUpdates())},{default:m(()=>e[17]||(e[17]=[o("Save")])),_:1})])]),s.isCustomServer?(a(),i("div",q,[n(S)])):d("",!0)])):d("",!0)])])}const W=g(y,[["render",T]]);export{W as default};
