import{aw as g,_ as f}from"./components.globalBic2x0kT.js";import{d as h,j as a,k as s,p as _,K as l,z as o,s as y,r as n,i,Q as m,R as v}from"./@vueC3Nhqlrl.js";const I=h({name:"SelectImage",props:{maxSize:{type:Number,default:1200},smallImageSize:{type:Number,default:400},keepAspectRatio:{type:Boolean,default:!1},aspectRatio:{type:Number,default:2/1},circleWithPreview:{type:Boolean,default:!1},description:{type:String,default:"Select an image"},keepPrefix:{type:Boolean,default:!1}},data(){return{image:null,smallImage:null,loading:!1,originalImg:null,errorMessage:null}},mounted(){},computed:{},methods:{close(){this.$emit("close")},async selectImagePreview(e){try{this.errorMessage=null;const t=e.target.files[0];this.image=await g({file:t,maxSize:this.maxSize,keepAspectRatio:this.keepAspectRatio,aspectRatio:this.aspectRatio}),this.smallImage=await g({file:t,maxSize:this.smallImageSize,keepAspectRatio:this.keepAspectRatio,aspectRatio:this.aspectRatio})}catch(t){console.error(t),this.errorMessage=t}this.loading=!1},async selectImage(){if(!this.image){console.error("Image not specified");return}let e=this.smallImage.split(";")[0].split(":")[1];if(this.keepPrefix)this.$emit("select-image",this.image),this.$emit("select-image-data",{fileData:this.image,imagePreview:this.smallImage,imageType:e});else{const t=this.image.split(",")[1],r=this.smallImage.split(",")[1];this.$emit("select-image",t),this.$emit("select-image-data",{fileData:t,imagePreview:r,imageType:e})}this.$emit("close")}},created(){}}),k={class:"m-4 text-center"},S={key:0,class:"imageSelectContainer"},w=["src"],b={key:1},C={key:0,class:"text-muted"},R={key:1,class:"text-muted"},z={class:"mt-4"},P={class:""},$={class:"d-flex justify-content-between mt-4"},N={key:0,class:"my-4"};function A(e,t,r,B,M,x){const p=n("b-spinner"),c=n("b-button"),d=n("b-alert");return i(),a("div",null,[s("div",k,[e.image?(i(),a("div",S,[s("img",{src:e.image,class:_(["imagePreview",e.circleWithPreview?"circleAroundImageDefaultSize":""])},null,10,w)])):(i(),a("div",b,[e.loading?(i(),a("div",C,[l(p)])):(i(),a("div",R,"No Image Selected"))]))]),s("div",z,[s("div",P,[s("input",{class:"form-control",type:"file",onChange:t[0]||(t[0]=(...u)=>e.selectImagePreview&&e.selectImagePreview(...u)),accept:"image/jpg, image/jpeg, image/png, image/webp"},null,32)]),s("div",$,[l(c,{variant:"outline-secondary",onClick:e.close},{default:o(()=>t[1]||(t[1]=[m(" Cancel")])),_:1},8,["onClick"]),l(c,{class:"ms-auto",onClick:e.selectImage,variant:"outline-primary"},{default:o(()=>t[2]||(t[2]=[m(" Select ")])),_:1},8,["onClick"])])]),e.errorMessage?(i(),a("div",N,[l(d,{variant:"danger","model-value":!0},{default:o(()=>[m(v(e.errorMessage),1)]),_:1})])):y("",!0)])}const T=f(I,[["render",A]]);export{T as S};
