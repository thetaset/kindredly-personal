const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/ChatWidgetContentDHkUR2yu.js","js/components.globalDizx_NTC.js","js/@vueC3Nhqlrl.js","js/vue3-toastifyDll2FbVh.js","assets/vue3-toastify.css","js/@capacitorCjBcbZvA.js","js/bootstrap-vue-nextDnMzdrWQ.js","assets/bootstrap-vue-next.css","assets/components.css","js/markedJKvyS0Pp.js","js/TIIconDefaultB4jiNlod.js","assets/TIIconDefault.css","js/vue-routerB6Jsgi62.js","js/browserTabsB7943WCj.js","js/ItemImageDmIqiyLE.js","js/vue-plugin-load-scriptXwA-LyvJ.js","js/bootstrapDQG5F40S.js","js/@popperjsCCtJ9KiL.js","js/@mozillaCDB2aYYy.js","assets/ChatWidgetContent.css","js/TaskBarBLDKCGbl.js","assets/TaskBar.css","js/ItemListbLzdOtkP.js","js/TIFeedbackInfoPRQX6h6C.js","assets/TIFeedbackInfo.css","js/PopCollectionSelectorBW6dnAeB.js","js/CreateCollectionBbjx_AkR.js","js/ai_lookup_utilszDX_hcwM.js","assets/CreateCollection.css","assets/PopCollectionSelector.css","js/PlaceholderListCkZH-XIw.js","assets/ItemList.css","js/UserCollectionsDQOYVVhn.js","js/AddItemDHXh2dX9.js","js/CollectionButtonListD_vH1okg.js","assets/CollectionButtonList.css","js/ItemTypesCPyKWlmw.js","assets/ItemTypes.css","js/AddItemFromLibraryResultsBWbIwWSk.js","assets/AddItem.css","js/UserItemsDl40e9au.js","js/AppPopupB5sBkEdm.js","assets/AppPopup.css","js/SharePromptDWY20vhz.js","js/UploadAttachmentsToAddDKgyIDOW.js","js/upload.mixinCs4F8zrX.js","assets/UploadAttachmentsToAdd.css","js/item.storeCI0d-UrP.js","js/AddItemFromLibraryx4UGQJre.js","js/DebugBVrPaZ4b.js","js/IDBStoreobYAVGyT.js","assets/CurateItem.css","js/ClientTestszetQmNb5.js","js/DebugTestDpi_2InP.js","js/MyFeedsDdx8vZn4.js","js/menuItemsDbDrY6XJ.js","assets/MyFeeds.css","js/FeedHomeBabqom83.js","js/SharingFeedComponentD3lz-d6M.js","js/ViewPostDoqmI4e2.js","js/EmojiPicker7OEHLUTB.js","js/@iconifyDLzQZ07j.js","js/@iconify-iconsCsSCFVIT.js","assets/EmojiPicker.css","js/SelectUserscnA2spUZ.js","assets/SelectUsers.css","assets/ViewPost.css","js/ViewFeedItemFfjHeiqO.js","assets/ViewFeedItem.css","assets/SharingFeedComponent.css","js/SubscriptionFeedBMnTaBXx.js","js/ItemAttachmentViewerBdTn3_OR.js","js/textrenderD2sqh9-p.js","assets/ItemAttachmentViewer.css","js/subscription.storeBbBC37AO.js","js/uuidCtRu48qb.js","assets/SubscriptionFeed.css","js/RediscoverFeedComponentBQc9nNid.js","assets/RediscoverFeedComponent.css","js/SharingFeedCNq9Wg-b.js","js/RediscoverFeedBdEqFp0v.js","js/NewItemsMyX7ck38.js","js/ViewPostPagezjQk3HVl.js","js/AIChatCz6EvGiM.js","assets/AIChat.css","js/PeoplenOe1OEXC.js","js/UserFriendManagerBYG48dmm.js","js/UsersListCqGOth3O.js","js/AddUserBcqnlYBr.js","js/ProfileImageEditorDUcTiiTY.js","js/SelectImageB1vQtVs9.js","assets/SelectImage.css","js/UsageLimitsComponentDuaQTkYh.js","js/BonusTimeComponentCayYUZpH.js","assets/UsageLimitsComponent.css","assets/UsersList.css","js/NotificationsPageCRS-b4z3.js","js/NotificationsoSBzr05x.js","js/CollectionCtm91ePt.js","js/UploadItemImageD8_IjZcF.js","js/vue-advanced-cropperDRfTlVFt.js","assets/vue-advanced-cropper.css","assets/UploadItemImage.css","js/ItemPermissionEditorCw8sInBk.js","assets/ItemPermissionEditor.css","js/BuilderItemListCfJK1e3Q.js","js/AddItemDefaultsX2-MvzB.js","assets/Collection.css","js/CreatePostPage6lUdP1tC.js","js/CreatePostB-Mkk1Az.js","assets/CreatePost.css","js/PublishCollectionD4k3LGho.js","js/ItemTargetAudiencesgE7k_mzy.js","js/ItemCategoriesDAQPxtIR.js","js/PublicProfileEditBFuSujZu.js","js/FriendProfilecXreMVR5.js","js/AddItemPageDsBmnCov.js","js/AttachToItemPagej6M2cWUX.js","js/ItemAttachmentsDwgNz2q3.js","assets/ItemAttachments.css","assets/AttachToItemPage.css","js/BuilderItemListPageBaQzOq3c.js","js/MyLibraryMB6aqoUc.js","js/MySettingsCj1j7-pB.js","assets/MySettings.css","js/MyLoginPrefsBwpNBNBh.js","js/jwt-decodeVWaDGczM.js","js/UpdatePinDlIWZ4BD.js","js/UpdatePasswordBsdM44uH.js","js/PluginsCLWZ87nP.js","js/UpdateUserInfoD8fGLxSq.js","js/UpdateUsernameB7947L9Y.js","js/OptionsComponentDXUqmzr0.js","js/MyClientList3ICAS9-n.js","js/ClientListComponentDfmKYsTj.js","assets/ClientListComponent.css","js/MyEncryptionSettingsXpYpSGwr.js","js/UserEncryptionSettingsComponentCIhDIE0p.js","js/InfoModalDcwdMAST.js","js/VerifyPasswordmdxh9FnH.js","js/MyUIAppearancePagex4Seiqte.js","js/MyUIAppearancePAEWv8B2.js","assets/MyUIAppearance.css","js/PublicProfileSettings0u32_lcs.js","js/NotificationSettingsa0mf5sFl.js","js/TaskbarSettingsCdCbL9xS.js","js/FollowingwaRqGSkw.js","js/SubscriptionListCX4RoYt1.js","js/MyUsageCwrqteFp.js","js/UsageLogComponentBTGRUpif.js","js/UsageSummaryDmFfw-p5.js","assets/UsageSummary.css","js/usageBVbzi9Go.js","js/PermissionOverrideMUriI4Xw.js","js/MyUserFilesDSumH-vf.js","js/MyUsageLimitsCED6vZxD.js","js/MyActivityBgVsEYak.js","js/ActivityComponentCtmUSWCz.js","js/MyAccessRequestsCaX6IBkO.js","js/AccessRequestsForUserDn09056_.js","js/AccessRequestApprover6hQq2B1K.js","js/AccessRequestNewBEqpTTmD.js","assets/AccessRequestNew.css","js/AccessRequestManagerjeeDlT_w.js","js/ManageAccountChvdgB0S.js","js/ImportData6uGz5vdr.js","js/VersionInfoKmx8--vU.js","js/SpaceUsageDtI32s6v.js","js/ManageUsersDs-SL64O.js","js/DebugConsoler13vHIGP.js","js/ImportExporttUZdlbzV.js","js/ImportBookmarksvLYqS-b3.js","js/ImportBookmarksPage_MGWx319.js","js/UserSettingsN1jzs2A-.js","assets/UserSettings.css","js/UserLoginPrefsmSg3ld4A.js","js/UserUsageLimitsDVmPAJra.js","js/UserUsageCWcjPuuo.js","js/UserActivityBh-BooSA.js","js/UserEncryptionSettingsDY2uafCV.js","js/UserFriendsPageaca1lnNa.js","js/UserSharingFeedBqZfhBbi.js","assets/UserSharingFeed.css","js/UserClientListCcHc29iU.js","js/UserLibraryDW-MsH1p.js","assets/UserLibrary.css","js/UserProfileDrSKrsnP.js","js/PublishedCollectionsByUserDZwVUEKT.js","js/Archived4c5U_Z5z.js","js/CurationInfoB79izSTU.js","js/BlockedB6bOO7vU.js","js/OutOfTimeBiMeenDw.js","js/ItemDYf-bgEb.js","js/UpdateSubscribersCflRcEpZ.js","js/SelectAccountUsers1I4pmgqf.js","js/ItemContentTypeDW5dnUOn.js","js/ViewCommentsGXYnq22S.js","assets/ViewComments.css","assets/Item.css","js/WaitingListC-ZEGbD2.js","assets/WaitingList.css","js/HelpCMBRaUpS.js","js/SignInd66smV4E.js","js/ProviderSigninButtonJBet1T7K.js","assets/ProviderSigninButton.css","assets/SignIn.css","js/ServerSettingsPFukfG_X.js","js/RegisterBO_Wvc4m.js","assets/Register.css","js/JoinAccountCn9xIsWZ.js","assets/JoinAccount.css","js/UserMigrationDT4AXkSz.js","js/ForgotPasswordCNE2fuTj.js","js/WelcomeTourPageCEdia2Dm.js","js/WelcomeTourCJnejcgc.js","assets/WelcomeTour.css","js/AccountSetupPageCNfOWm6I.js","js/GalleryViewP--jbJFy.js","js/AddPublishedToLibrarygmjpNrfX.js","assets/AddPublishedToLibrary.css","js/@egjsD-CUwjTO.js","js/@cfcsDj3SjI2h.js","assets/@egjs.css","assets/GalleryView.css","js/ViewPublishedOWfp9EJr.js","assets/ViewPublished.css","assets/AccountSetupPage.css","js/PageNotFoundDb44v1Mh.js","js/CreateOrEditNoteBYH_oGnj.js","assets/CreateOrEditNote.css","js/SwitchUserk09ehrF_.js","js/WelcomeInfoDaf1UogT.js","js/BMsgModalC9KkVYSg.js"])))=>i.map(i=>d[i]);
import{f as pe,T as me,B as Ue,i as Ne,_ as Q,a as K,d as b,h as Re,t as Fe,j as qe,p as Be,o as ue,k as ie,I as He,l as de,n as We,q as je,r as ze,u as Oe,g as Te,s as Qe,b as Ke,S as Ye,m as Ge,L as Je,U as Ce,v as B,w as Xe,A as Ze,x as xe,y as et,z as tt,e as st}from"./js/components.globalDizx_NTC.js";import{a2 as Pe,d as Y,aa as A,r as y,i as n,j as a,K as i,s as c,L as R,M as it,k as s,z as o,m,p as k,l as z,ab as nt,n as ot,X as H,N as O,F as D,P as q,R as C,Q as g,ac as ce,A as Ee,a0 as $e,_ as rt}from"./js/@vueC3Nhqlrl.js";import{_ as d,A as fe,P as F}from"./js/@capacitorCjBcbZvA.js";import{T as Ae,P as at}from"./js/TIIconDefaultB4jiNlod.js";import{B as lt,_ as dt}from"./js/bootstrap-vue-nextDnMzdrWQ.js";import{c as ut,b as ct}from"./js/vue-routerB6Jsgi62.js";import{s as pt}from"./js/browserTabsB7943WCj.js";import{I as _e}from"./js/ItemImageDmIqiyLE.js";import{p as mt}from"./js/vue-plugin-load-scriptXwA-LyvJ.js";import"./js/bootstrapDQG5F40S.js";import{m as ft}from"./js/vue3-toastifyDll2FbVh.js";import"./js/@popperjsCCtJ9KiL.js";import"./js/@mozillaCDB2aYYy.js";const _=Pe({inputQueue:[],companionOpen:!1,sessionList:[],currentSessionId:null});function On(e){console.log("addToInputQueue",e),_.inputQueue.push(e),_.companionOpen=!0}function Pn(){_.inputQueue=[]}function ht(e){_.companionOpen=e}async function An(){let e=await pe("/client/ai/sessionList");e.success&&(_.sessionList=e.result)}async function _n(){let e=await pe("/client/ai/getCurrentSessionId");return e.success&&(_.currentSessionId=e.result),_.currentSessionId}async function Ln(e){_.currentSessionId=e,(await pe("/client/ai/setCurrentSessionId",{id:e})).success&&(_.currentSessionId=e)}const Mn={currentSessionId:()=>_.currentSessionId,aiInputQueue:()=>_.inputQueue,aiSessionList:()=>_.sessionList},yt=Y({name:"CompanionWidget",components:{TIcon:me,BIcon:Ue,ChatWidgetContent:A(()=>d(()=>import("./js/ChatWidgetContentDHkUR2yu.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])))},props:{icon:{type:String,required:!1}},data(){return{max:!1}},computed:{isOpen(){return _.companionOpen},isMobile(){return window.innerWidth<768||Ne()},pageType(){return document.location.href.startsWith("http")?"web":"extension"},appPopupURL(){return chrome.runtime.getURL("src/popup.html")}},methods:{toggleMaximize(){this.max=!this.max},toggleShow(){_.companionOpen=!_.companionOpen}},created(){}}),vt={class:"d-flex justify-content-end flex-gap-xs text-muted"};function gt(e,t,r,u,p,I){const S=y("b-icon"),l=y("BIcon"),f=y("b-button"),w=y("ChatWidgetContent");return n(),a("div",{class:k(["",(e.max||e.isMobile)&&e.isOpen?"companionContainerFS":"companionContainer"])},[!e.isOpen&&!e.isMobile?(n(),a("div",{key:0,role:"button",onClick:t[0]||(t[0]=$=>e.toggleShow()),class:"circle widgetbtn hoverrow rotateonhover shadow-sm wb-background dl-color companionIconHolder"},[i(S,{icon:"robot",class:"largerx"})])):c("",!0),R(s("div",{class:k(["rounded border p-0 expand-updown-animation shadow",e.max||e.isMobile?"companionOpenContainerFS":"companionOpenContainer"])},[i(w,null,{default:o(()=>[s("div",vt,[e.isMobile?c("",!0):(n(),m(f,{key:0,size:"sm",onClick:t[1]||(t[1]=$=>e.toggleMaximize()),class:"btn btn-link rounded hoverrow p-1"},{default:o(()=>[i(l,{icon:e.max?"arrows-angle-contract":"arrows-angle-expand"},null,8,["icon"])]),_:1})),i(f,{size:"sm",onClick:t[2]||(t[2]=$=>e.toggleShow()),class:"btn btn-link rounded hoverrow p-1"},{default:o(()=>[i(l,{icon:"x-lg"})]),_:1})])]),_:1})],2),[[it,e.isOpen]])],2)}const bt=Q(yt,[["render",gt]]),wt=Y({name:"TIListViewOptions",mixins:[K],props:{class:{type:String,default:""}},components:{},data(){return{}},computed:{},methods:{toggleViewType(){this.getViewType()=="row"?this.setViewType("row_c"):this.getViewType()=="row_c"?this.setViewType("tile"):this.getViewType()=="tile"&&this.setViewType("row")}},created(){}});function It(e,t,r,u,p,I){const S=y("b-icon"),l=y("b-button");return n(),m(l,{title:"'Toggle View'",variant:"link",class:k(e.class),onClick:t[0]||(t[0]=f=>e.toggleViewType())},{default:o(()=>[e.getViewType()=="row"?(n(),m(S,{key:0,icon:"view-stacked",class:"iconNonLinkColor1"})):e.getViewType()=="row_c"?(n(),m(S,{key:1,icon:"list-ul",class:"iconNonLinkColor1"})):e.getViewType()=="tile"?(n(),m(S,{key:2,icon:"grid",class:"iconNonLinkColor1"})):c("",!0),z(e.$slots,"default")]),_:3},8,["class"])}const kt=Q(wt,[["render",It]]),St=Y({name:"TypeAhead",mixins:[K],emits:["onInput","onFocus","onBlur","selectItem","selectInput"],inheritAttrs:!1,props:{id:{type:String},placeholder:{type:String,default:""},items:{type:Array,required:!0},defaultItem:{default:null},itemProjection:{type:Function,default(e){return e}},minInputLength:{type:Number,default:2,validator:e=>e>=0},minItemLength:{type:Number,default:0,validator:e=>e>=0},selectOnTab:{type:Boolean,default:!1},initInput:{type:String,default:""},outerClass:{type:String,default:""}},created(){this.input=this.initInput,this.initInput&&(this.hideSearchOptions=!0)},destroyed(){},mounted(){const e=setInterval(()=>{this.$refs.inputRef&&(this.$refs.inputRef.focus(),setTimeout(()=>{this.$refs.inputRef.value=" ",this.$nextTick(()=>{this.$refs.inputRef.value=""})},10),clearInterval(e))},50)},data(){return{inputId:this.id||`simple_typeahead_${(Math.random()*1e3).toFixed()}`,customStyle:"",input:"",originalInput:"",isInputFocused:!1,currentSelectionIndex:-1,hideSearchOptions:!1,isSearchOptionsFocused:!1,selectedSearchOption:0,searchOptionsListRaw:[{name:"searchweb",displayedName:"Search the Web",iconName:"globe"}]}},methods:{async searchExternalOptionSelection(){const e=this.searchOptionsList[this.selectedSearchOption].name;await this.searchExternalOption(e)},async searchExternalOption(e){b("Searching external option",e);const t=encodeURIComponent(this.input);if(b("Encoding input:",t),e=="searchweb")if(this.isExtension){chrome.search.query({text:this.input});return}else{const r=`https://www.google.com/search?q=${t}`;window.location.href=r;return}},onInput(){this.hideSearchOptions=!1,this.isInputFocused=!0,this.currentSelectionIndex=-1;const e=this.$refs.inputRef;e.style.height=e.scrollHeight+"px",this.$emit("onInput",{input:this.input,items:this.filteredItems})},onFocus(){this.isInputFocused=!0,this.$emit("onFocus",{input:this.input,items:this.filteredItems})},onBlur(){this.isSearchOptionsFocused||(this.isInputFocused=!1,this.$emit("onBlur",{input:this.input,items:this.filteredItems}))},onFocusSearch(){b("onFocusSearch"),this.isSearchOptionsFocused=!0,this.isInputFocused=!0},onBlurSearch(){this.isSearchOptionsFocused=!1,this.isInputFocused=!0},onArrowDown(e){this.hideSearchOptions=!1,this.isInputFocused=!0,(this.currentSelectionIndex==-1||this.isListVisible&&this.currentSelectionIndex<this.filteredItems.length)&&(this.currentSelectionIndex==-1&&!this.searchOptionsEnabled?this.currentSelectionIndex=1:this.currentSelectionIndex++),this.currentSelectionIndex>=1&&this.scrollSelectionIntoView()},onArrowUp(e){this.isInputFocused=!0,this.isListVisible&&this.currentSelectionIndex>-1&&(this.currentSelectionIndex==1&&!this.searchOptionsEnabled?this.currentSelectionIndex=-1:this.currentSelectionIndex--),this.currentSelectionIndex>=1&&this.scrollSelectionIntoView()},onArrowRight(e){this.isInputFocused=!0,this.currentSelectionIndex!=-1&&(!this.currentSelectedIndex||this.currentSelectedIndex<1)&&(e.preventDefault(),this.selectedSearchOption=(this.selectedSearchOption+1)%this.searchOptionsList.length)},onArrowLeft(e){if(this.isInputFocused=!0,this.currentSelectionIndex==-1){b("HI");return}else if(!this.currentSelectedIndex||this.currentSelectedIndex<1){e.preventDefault();let t=(this.selectedSearchOption-1)%this.searchOptionsList.length;t<0&&(t=this.searchOptionsList.length-1),this.selectedSearchOption=t}},scrollSelectionIntoView(){setTimeout(()=>{const e=document.querySelector(`#${this.wrapperId} .simple-typeahead-list`),t=document.querySelector(`#${this.wrapperId} .simple-typeahead-list-item.simple-typeahead-list-item-active`);if(t&&!(t.offsetTop>=e.scrollTop&&t.offsetTop+t.offsetHeight<e.scrollTop+e.offsetHeight)){let r=0;t.offsetTop>e.scrollTop?r=t.offsetTop+t.offsetHeight-e.offsetHeight:t.offsetTop<e.scrollTop&&(r=t.offsetTop),e.scrollTo(0,r)}})},selectCurrentSelection(){if(b("selectCurrentSelection",this.currentSelectionIndex,this.input),this.currentSelectionIndex==0){this.searchExternalOptionSelection(),this.isSearchOptionsFocused=!1;return}this.currentSelection&&this.currentSelectionIndex>=1?this.selectItem(this.currentSelection):(this.hideSearchOptions=!0,this.isInputFocused=!1,this.$emit("selectInput",{resultType:"raw",value:this.input}))},selectWithTab(e){const t=e.shiftKey;this.selectOnTab?this.selectCurrentSelection():t?this.currentSelectionIndex==0&&this.selectedSearchOption!=0?this.onArrowLeft():this.onArrowUp():this.currentSelectionIndex==0&&this.selectedSearchOption!=this.searchOptionsList.length-1?this.onArrowRight():this.onArrowDown()},selectItem(e){this.isSearchOptionsFocused=!1,this.input=this.itemProjection(e),this.currentSelectionIndex=-1,this.$refs.inputRef.blur(),this.$emit("selectItem",e)},escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},boldMatchText(e){const t=new RegExp(`(${this.escapeRegExp(this.input)})`,"ig");return e.replace(t,"<strong>$1</strong>")},clearInput(){this.input=""},getInput(){return this.$refs.inputRef},focusInput(){this.$refs.inputRef.focus(),this.onFocus()},blurInput(){this.$refs.inputRef.blur(),this.onBlur()}},computed:{searchOptionsList(){return this.isExtension?this.searchOptionsListRaw:this.searchOptionsListRaw.filter(e=>!e.extensionOnly)},searchOptionsEnabled(){return this.isExtension&&this.manifestType=="chrome"&&this.isAdminUser},nrows(){return 0},showSearchOptions(){return!this.hideSearchOptions&&this.input&&this.input!=""&&this.input.length>0&&(this.isInputFocused||this.isSearchOptionsFocused)&&this.searchOptionsEnabled},wrapperId(){return`${this.inputId}_wrapper`},filteredItems(){const e=new RegExp(this.escapeRegExp(this.input),"i");return this.items.filter(t=>this.itemProjection(t).match(e))},isListVisible(){return this.isInputFocused&&this.input.length>=this.minInputLength&&this.filteredItems.length>this.minItemLength},currentSelection(){return this.isListVisible&&this.currentSelectionIndex-1<this.filteredItems.length?this.filteredItems[this.currentSelectionIndex-1]:void 0}}}),Tt={class:"d-flex align-items-center px-1"},Ct=["id"],Et=["id","placeholder"],$t={class:"simple-typeahead-results"},Rt={class:"simple-typeahead-content shadow rounded"},Ot=["onClick"],Pt={key:0},At={key:1,class:"simple-typeahead-list"},_t={key:0,class:"simple-typeahead-list-header"},Lt=["onClick","onMouseenter"],Mt=["data-text"],Dt=["data-text","innerHTML"],Vt={key:1,class:"simple-typeahead-list-footer"};function Ut(e,t,r,u,p,I){const S=y("b-icon");return n(),a("div",{class:k(["searchBox shadow",e.outerClass])},[s("div",Tt,[s("div",null,[z(e.$slots,"searchboxprefix",{},void 0,!0)]),s("div",{id:e.wrapperId,class:"simple-typeahead"},[R(s("textarea",ot(e.$attrs,{ref:"inputRef",id:e.inputId,class:["simple-typeahead-input allowResize",(e.isInputFocused,"")],style:e.customStyle,type:"text",placeholder:e.placeholder,"onUpdate:modelValue":t[0]||(t[0]=l=>e.input=l),onInput:t[1]||(t[1]=(...l)=>e.onInput&&e.onInput(...l)),onFocus:t[2]||(t[2]=(...l)=>e.onFocus&&e.onFocus(...l)),onBlur:t[3]||(t[3]=(...l)=>e.onBlur&&e.onBlur(...l)),autofocus:!0,onKeydown:[t[4]||(t[4]=H(O((...l)=>e.onArrowDown&&e.onArrowDown(...l),["prevent"]),["down"])),t[5]||(t[5]=H(O((...l)=>e.onArrowUp&&e.onArrowUp(...l),["prevent"]),["up"])),t[6]||(t[6]=H((...l)=>e.onArrowRight&&e.onArrowRight(...l),["right"])),t[7]||(t[7]=H((...l)=>e.onArrowLeft&&e.onArrowLeft(...l),["left"])),t[8]||(t[8]=H(O((...l)=>e.blurInput&&e.blurInput(...l),["prevent"]),["esc"])),t[9]||(t[9]=H(O((...l)=>e.selectCurrentSelection&&e.selectCurrentSelection(...l),["prevent"]),["enter"])),t[10]||(t[10]=H(O((...l)=>e.selectWithTab&&e.selectWithTab(...l),["prevent"]),["tab"]))],rows:1,autocomplete:"off"}),null,16,Et),[[nt,e.input]])],8,Ct),s("div",null,[z(e.$slots,"searchboxpostfix",{},void 0,!0)])]),s("div",$t,[s("div",Rt,[e.showSearchOptions?(n(),a("div",{key:0,class:k(["searchOptions rounded p-2",{"options-active":e.currentSelectionIndex==0}]),onMouseenter:t[11]||(t[11]=(...l)=>e.onFocusSearch&&e.onFocusSearch(...l)),onMouseleave:t[12]||(t[12]=(...l)=>e.onBlurSearch&&e.onBlurSearch(...l))},[(n(!0),a(D,null,q(e.searchOptionsList,(l,f)=>(n(),a("div",{key:f,role:"button",class:k(["d-flex align-items-center flex-gap-sm small p-2 rounded searchOption",{activeSearchOption:e.selectedSearchOption==f&&e.currentSelectionIndex==0}]),onClick:w=>e.searchExternalOption(l.name)},[i(S,{icon:l.iconName,height:"24"},null,8,["icon"]),e.isMobile?c("",!0):(n(),a("div",Pt,C(l.displayedName),1))],10,Ot))),128))],34)):c("",!0),e.isListVisible?(n(),a("div",At,[e.$slots["list-header"]?(n(),a("div",_t,[z(e.$slots,"list-header",{},void 0,!0)])):c("",!0),(n(!0),a(D,null,q(e.filteredItems,(l,f)=>(n(),a("div",{class:k(["simple-typeahead-list-item rounded",{"simple-typeahead-list-item-active":e.currentSelectionIndex==f+1}]),key:l.id,onMousedown:t[13]||(t[13]=O(()=>{},["prevent"])),onClick:w=>e.selectItem(l),onMouseenter:w=>e.currentSelectionIndex=f+1},[e.$slots["list-item-text"]?(n(),a("span",{key:0,class:"simple-typeahead-list-item-text","data-text":e.itemProjection(l)},[z(e.$slots,"list-item-text",{item:l,itemProjection:e.itemProjection,boldMatchText:e.boldMatchText},void 0,!0)],8,Mt)):(n(),a("span",{key:1,class:"simple-typeahead-list-item-text","data-text":e.itemProjection(l),innerHTML:e.boldMatchText(e.itemProjection(l))},null,8,Dt))],42,Lt))),128)),e.$slots["list-footer"]?(n(),a("div",Vt,[z(e.$slots,"list-footer",{},void 0,!0)])):c("",!0)])):c("",!0)])])],2)}const Nt=Q(St,[["render",Ut],["__scopeId","data-v-a5c92ebf"]]),Ft=Y({name:"Quickbar",components:{TIIconDefault:Ae,ItemImage:_e},mixins:[K],props:{collectionId:{type:String,required:!0},items:{type:Array,required:!0}},data(){return{useCriteria:null,showDetails:!1,selectedItem:null,isHeld:!1,activeHoldTimer:null,showOptions:!1,holdStart:null}},mounted(){},computed:{},methods:{onDrop(e){b("DROPPED")},onDrag(){this.holdStart=null,b("DRAGGING")},onSelectHold(e){b("SELECTED"),this.selectedItem=e,this.isHeld=!0,this.holdStart=new Date,this.activeHoldTimer=setTimeout(()=>{this.isHeld&&(b("HOLDING"),this.showOptions=!0)},1e3)},onHoldEnd(){b("HOLD END"),this.selectedItem=null,this.isHeld=!1,clearTimeout(this.activeHoldTimer),this.holdStart&&new Date().getTime()-this.holdStart.getTime()<20&&(b("CLICKED"),this.showOptions=!1,this.visit(this.selectedItem)),this.holdStart=null}},created(){}}),qt={class:"t-quickbar-container"},Bt={key:0,class:"clickOptionsMenu text-muted m-4 border rounded ani-slide-down shadow dl-background p-2 d-flex align-items-center flex-gap-2 justify-content-between"},Ht={class:"t-quickbar-item-container"},Wt=["title","onClick"],jt={key:0,class:"mt-1-5 linklike-bw xsmall"},zt=["href","title","onClick"],Qt={key:0,class:"mt-1-5 linklike-bw small"},Kt=["title","onClick"],Yt={key:0,class:"mt-1-5 linklike-bw small"};function Gt(e,t,r,u,p,I){const S=y("b-link"),l=y("b-icon"),f=y("ItemImage");return n(),a("div",qt,[e.showOptions?(n(),a("div",Bt,[i(S,{to:`/collection/${e.collectionId}`},{default:o(()=>t[8]||(t[8]=[g("edit quickbar")])),_:1},8,["to"]),s("div",{role:"button",onClick:t[0]||(t[0]=w=>e.showOptions=!1),class:"text-white p-1"},[i(l,{class:"text-muted",icon:"x"})])])):c("",!0),e.items&&e.items.length>0?(n(),a("div",{key:1,class:k([e.showOptions?"border fillrow":"","t-quickbar"]),onDrop:t[1]||(t[1]=w=>e.onDrop("quickbar")),onDragover:t[2]||(t[2]=O(()=>{},["prevent"]))},[s("div",Ht,[(n(!0),a(D,null,q(e.items,(w,$)=>(n(),a("div",{class:k(["ani-fade-in-fast qbarItemWrapper rounded",e.isMobile?"dl1-background ":""]),key:$},[w.type=="col"?(n(),a("div",{key:0,role:"button",class:"qbarItem d-flex flex-column justify-content-center align-items-center hoverrowlight rounded",title:w.name,onClick:O(E=>e.visit(w),["prevent"])},[i(f,{item:w,class:k(["rounded imageResultMini",e.isMobile?"":"shadow"])},null,8,["item","class"]),e.isMobile?(n(),a("div",jt,C(e.textTruncate(w.name,10)),1)):c("",!0)],8,Wt)):w.type=="link"?(n(),a("a",{key:1,role:"button",href:w.url,title:w.name||w.url,onClick:O(E=>e.visit(w),["prevent"]),class:"qbarItem d-flex flex-column justify-content-center align-items-center hoverrowlight rounded"},[i(f,{item:w,class:k(["rounded imageResultMini",e.isMobile?"":"shadow"])},null,8,["item","class"]),e.isMobile?(n(),a("div",Qt,C(e.textTruncate(w.name,10)),1)):c("",!0)],8,zt)):(n(),a("div",{key:2,role:"button",class:"qbarItem d-flex flex-column justify-content-center align-items-center hoverrowlight rounded",title:w.name||w.url,onClick:O(E=>e.visit(w),["prevent"])},[i(f,{item:w,class:k(["rounded imageResultMini",e.isMobile?"":"shadow"])},null,8,["item","class"]),e.isMobile?(n(),a("div",Yt,C(e.textTruncate(w.name,10)),1)):c("",!0)],8,Kt))],2))),128))])],34)):(n(),a("div",{key:2,class:"hoverfill p-4 w-100",onMousedown:t[3]||(t[3]=O(w=>e.onSelectHold(null),["prevent"])),onTouchstart:t[4]||(t[4]=O(w=>e.onSelectHold(null),["prevent"])),onMouseleave:t[5]||(t[5]=w=>e.onHoldEnd()),onMouseup:t[6]||(t[6]=w=>e.onHoldEnd()),onTouchend:t[7]||(t[7]=w=>e.onHoldEnd())},null,32))])}const Jt=Q(Ft,[["render",Gt]]),Xt=Y({mixins:[K],name:"SearchHome",components:{TIListViewOptions:kt,TypeAhead:Nt,TaskBar:A(()=>d(()=>import("./js/TaskBarBLDKCGbl.js"),__vite__mapDeps([20,1,2,3,4,5,6,7,8,21]))),TIcon:me,TIIconDefault:Ae,Quickbar:Jt,ItemImage:_e,ItemList:A(()=>d(()=>import("./js/ItemListbLzdOtkP.js").then(e=>e.b),__vite__mapDeps([22,1,2,3,4,5,6,7,8,13,10,11,23,24,14,25,26,27,28,29,30,31])))},data(){return{showDetails:!0,startSearchMode:!1,loading:!0,loadingError:!1,errorMessage:void 0,autoItems:[],timeoutSet:!1,searchDisplayedValue:void 0,searchText:void 0,selectedSearchText:void 0,searchValue:void 0,searchType:void 0,loadingSearch:!1,results:[],loadAmount:25,libraryRoot:[],searchComplete:!1,orderBy:{value:"relevance",text:"Relevance"},orderByOptions:[{value:"relevance",text:"Relevance"},{value:"lastVisited",text:"Last Visited"},{value:"mostVisited",text:"Frequently Visited"},{value:"name",text:"Name"},{value:"recentlyAdded",text:"New to you"}],filters:[],searchTerms:[],searchTermType:null,quickBarCollectionId:void 0,quickBarItems:void 0,eventCounter:0,chunkSize:20,dropList:[],loadingDropdown:!1,selectedColToDrag:void 0,quickBarItemsLoading:!0}},computed:{...Re,searchTermsList(){return this.searchTerms&&this.searchTerms.length>0?this.searchTerms:[]},showTaskBar(){let e=this.userPrefs.loaded&&!this.isMobile&&!this.searchType&&!this.isNativeClient&&this.browserName!="safari";return console.log("showTaskBar",e,{userPrefs:this.userPrefs,isMobile:this.isMobile,searchType:this.searchType,isNativeClient:this.isNativeClient,browserName:this.browserName}),e},chunks(){const e=[];let t=[];return this.searchTermsList.forEach((r,u)=>{t.push(r),((u+1)%this.chunkSize===0||u===this.searchTermsList.length-1)&&(e.push(t),t=[])}),e},classesForSearch(){return{searchStart:!this.searchType,searchEnd:this.searchType,searchHomeDesktop:!this.searchType&&!this.isMobile}},searchTermTypeName(){return this.searchTermType?this.searchTermType=="domains"?"Website domain":this.searchTermType.charAt(0).toUpperCase()+this.searchTermType.slice(1):""}},methods:{textTruncate:Fe,toURL:qe,prettyTimePast:Be,async filterToggle(e){this.filters.includes(e)?this.filters.splice(this.filters.indexOf(e),1):this.filters.push(e),await this.search(!1,!0)},async filterAdd(e){e=="collections"&&this.filters.includes("excollections")?this.filters.splice(this.filters.indexOf("excollections"),1):e=="excollections"&&this.filters.includes("collections")&&this.filters.splice(this.filters.indexOf("collections"),1),this.filters.push(e),await this.search(!1,!0)},async filtersRemove(e){e.forEach(t=>{this.filters.includes(t)&&this.filters.splice(this.filters.indexOf(t),1)}),await this.search(!1,!0)},async filterRemove(e){this.filters.includes(e)&&this.filters.splice(this.filters.indexOf(e),1),await this.search(!1,!0)},resetSearch(){b("Reset search"),this.searchValue=void 0,this.results=[],this.search(!0)},filterResults(e){let t=[...e];const r=this.filters.includes("heart"),u=this.filters.includes("readlater"),p=this.filters.includes("collections"),I=this.filters.includes("excollections");return this.filters.length>0&&(b("filter by",this.filters),t=t.filter(S=>{var l,f;return r&&((l=S==null?void 0:S.feedback)==null?void 0:l.reaction)!="heart"||u&&!((f=S==null?void 0:S.feedback)!=null&&f.isReadLaterDate)||p&&(S==null?void 0:S.type)!="col"?!1:!(I&&(S==null?void 0:S.type)=="col")})),t},selectOrderBy(e){this.orderBy=e;let t=this.results;if(this.results=[],this.orderBy.value=="lastVisited"?t.sort((r,u)=>{const p=u.lastVisit?new Date(u.lastVisit).getTime():0,I=r.lastVisit?new Date(r.lastVisit).getTime():0;return p-I}):this.orderBy.value=="mostVisited"?t.sort((r,u)=>u.visitCount-r.visitCount):this.orderBy.value=="name"?t.sort((r,u)=>{const p=r.name?r.name:"",I=u.name?u.name:"";return p.localeCompare(I)}):this.orderBy.value=="recentlyAdded"?t.sort((r,u)=>{const p=u.createdAt?new Date(u.createdAt).getTime():0,I=r.createdAt?new Date(r.createdAt).getTime():0;return p-I}):this.searchType=="text"?t.sort((r,u)=>{const p=r.finalRelScore?r.finalRelScore:0;return(u.finalRelScore?u.finalRelScore:0)-p}):t.sort((r,u)=>{const p=r.orderIdx||0,I=u.orderIdx||0;return p-I}),!this.isBrowserMode){const r=t.filter(p=>p.type=="tab"),u=t.filter(p=>p.type!="tab");t=[...r,...u]}this.results=this.filterResults(t)},async updateQuickBar(e){e&&(this.quickBarItems=e)},async reloadSearch(){this.searchType&&this.searchValue&&this._runSearch(this.searchType,this.searchValue)},async selectSearch(e){if(b("Select Search0:",e),e.data){let t=e.data;if(t.type=="tab"){this.openTab(t.index,t.windowId);return}if(t.type=="col"){this.$router.push(`/collection/${t._id}`);return}if(t.type=="link"){ue(t.url,"_blank");return}else this.$router.push(`/item/${t._id}`)}this.searchText=e.value,this.autoItems=[],await this.search(!0)},async search(e=!0,t=!1){if(b("Select Search1: ",this.selectedSearchText," modal search text:",this.searchText),e&&(this.filters=[],this.orderBy={value:"relevance",text:"Relevance"}),!this.searchText||this.searchText.length==0){this.runSearch("time","latest",t);return}this.searchType="text",this.runSearch(this.searchType,this.searchText,t)},getDisplayValue(e,t){if(e=="visit"){if(t=="most")return"Frequently Visited";if(t=="latest")return"Recently Visited"}else return e=="latest"?"Recently Visited":e=="time"?"New to you":e=="terms"?"Youtube Channels":e=="text"?t:e=="tabs"?"Current Tabs":t},async _runSearch(e,t){b("HISTORY: RUNNING SEARCH:",e,t),this.loadingSearch=!0,this.results=[],this.searchComplete=!1,this.loadAmount=25,this.searchDisplayedValue=this.getDisplayValue(e,t),this.searchType=e,this.searchValue=t,this.searchText=this.searchType=="text"?t:void 0;try{if(e=="tabs"){if(ie.browser_mode)return;chrome.tabs.query({},r=>{const u=r.filter(p=>p.url.startsWith("http"));for(const p of u){const I={url:p.url,type:He.tab,name:p.title,tabId:p.id,windowId:p.windowId,index:p.index,tabInfo:p};this.results.push(I)}this.loadingSearch=!1,this.searchComplete=!0})}else{const r=await this.sendReq("/client/searchMain",{searchType:e,searchLookupValue:t});r&&r.success?(!this.isBrowserMode&&!this.isNativeClient&&this.searchType=="text"&&this.searchText!=null&&(this.results=(await pt(this.searchText)).slice(0,5)),this.results.push(...de(r.result,170)),this.selectOrderBy(this.orderBy)):this.errorMessage=r.message,this.loadingSearch=!1,this.searchComplete=!0}}catch(r){this.loadingSearch=!1,this.searchComplete=!0,console.error("Error running search",r),this.errorMessage="Error running search, :( We are very sorry about this. "}},async runSearch(e,t,r=!1){this.eventCounter++,this.results=[];var u=window.location.protocol+"//"+window.location.host+`${this.appPrefix}#?type=${e}&value=${encodeURIComponent(t)}`;b("HISTORY: PUSH STATE",u),history.pushState({path:u,data:{searchType:e,searchLookupValue:t},eventCounter:this.eventCounter},`Thetaset: Searching ${e} ${t}`,u),r?await this._runSearch(e,t):this._runSearch(e,t)},async loadPopState(){window.onpopstate=e=>{var t,r;if(b("HISTORY: POP STATE"),e.state&&e.state.data){b("Running search from popstate");const{searchType:u,searchLookupValue:p}=e.state.data;this._runSearch(u,p)}else{const u=(r=(t=e==null?void 0:e.target)==null?void 0:t.location)==null?void 0:r.href;if(u&&u.includes("ref=omnibox")){const p=new URL(u),I=new URLSearchParams(p.hash.split("?")[1]);this._runSearch(I.get("type"),I.get("value"))}else this.searchType=void 0,this.searchText=void 0,this.searchValue=void 0,this.searchDisplayedValue=void 0,this.searchComplete=!1,this.results=[]}}},async loadPageInfo(){await this.loadParams(),await this.loadPopState()},dragColStart(e){b("Drag start event",e),this.selectedColToDrag=e},async dragColOver(e){b("Drag over event",e),await this.updateColOrder(e)},async dropCol(e){b("Drag over event",e),await this.updateColOrder(e)},async updateColOrder(e){if(e._id!=this.selectedColToDrag._id){const t=this.pinnedToHomeItems.findIndex(p=>p._id==e._id),r=this.pinnedToHomeItems.filter(p=>p._id!=this.selectedColToDrag._id),u=[...r.slice(0,t),this.selectedColToDrag,...r.slice(t)];await this.ReplaceAllPinnedToHome(u)}},async refreshUI(){await this.RefreshAll(!0,!1,!0,!0),this.UpdateTaskBar()},async searchExternalOption(e){if(b("Searching external option",e),e=="chatgpt"){const t=`https://chat.openai.com/?kquery=${this.searchText}`;await ue(t,"_blank")}},async loadParams(){const e=new URL(window.location.href);b("QUERY urlObj:",e);const t=window.location.href.split("?")[1];if(!t||t.length==0)return b("No search params"),!1;const r=new URLSearchParams(t);return this.searchType=r.get("type"),this.searchType?(this.searchValue=r.get("value"),await this._runSearch(this.searchType,this.searchValue),!0):!1},async autoSearch(e){const t=(e.input||"").trim();if(this.searchText=t,!t||t.length<1)return this.autoItems=[],[];this.sendReq("/client/searchAuto",{searchQuery:t}).then(async r=>{b("Auto search response",r);const u=[];r&&r.success&&u.push(...r.result||[]),this.autoItems=[...u.filter(p=>!!p).map(p=>{let I=p[1]?We(p[1]):null,S=I==null?void 0:I.type;return{text:p[0],value:p[0],image:null,itemType:S,resultType:"search",data:I,id:p[0]+S}})]}),b("Auto search",this.autoItems)},async defaultTab(){await this.sendReq("/client/hometab")},async loadQuickbar(){if(!this.quickBarCollectionId){this.quickBarItemsLoading=!1;return}b("LOADING QUICKBAR",this.quickBarCollectionId);const e=await je("QUICKBAR");if(e!=null&&e.data&&e.timestamp>Date.now()-1e3*60*60*24)this.updateQuickBar(e==null?void 0:e.data);else{const t=await this.sendReq("/client/collection/listItemsWithInfoByUser",{collectionId:this.quickBarCollectionId});if(t&&t.success){let r=de(t.result);ze("QUICKBAR",r),this.updateQuickBar(r)}else console.error(t.message||":( sorry, something isn't working properly.")}this.quickBarItemsLoading=!1},loadMore(){this.loadAmount+=50},async viewLibrary(){const e=await this.apiReq("/client/library/root",{includeUserPermissions:!1,limit:100});let t=de(e.result,50,!1);t.sort((r,u)=>{const p=r.name?r.name:"",I=u.name?u.name:"";return p.localeCompare(I)}),t=t.filter(r=>(r==null?void 0:r.permissionUserId)==this.currentUserId),this.libraryRoot=t},visitPage(e){e=="quickbar"?this.$router.push(`/collection/${this.quickBarCollectionId}`):e=="hearted"?this.$router.push("/library/items/feedback/reactionDate"):e=="starred"?this.$router.push("/library/items/feedback/starredDate"):e=="subscriptions"?this.$router.push("/feeds/subscriptions"):e=="rediscover"?this.$router.push("/feeds/rediscover"):e=="new"&&this.$router.push("/library/new")},async getSearchTerms(e){this.searchTermType=e;const t=await this.sendReq("/client/searchTerms",{type:e});t&&t.success?this.searchTerms=t.result:this.errorMessage=t.message||":( sorry, something isn't working properly.",this.showModal("searchTermsModal")}},mounted(){b("Mounted"),this.setBackground(),this.$route.query.firstLogin=="true"&&(this.showModal("welcome-modal"),this.$router.replace("/"))},unmounted(){this.removeBackground()},watch:{"clientSettings.background":function(e,t){this.setBackground()}},created(){b("ENTERING HOME",this.$route.query),this.currentUser&&(this.quickBarCollectionId=this.currentUser.quickBarCollectionId,this.loadQuickbar()),this.RefreshPinnedToHomeItems(),this.loadPageInfo(),this.$route.query.startSearch=="true"&&(this.startSearchMode=!0)}}),Zt={class:"d-flex flex-wrap justify-content-center flex-gap-1 truncateme"},xt=["onClick","title"],es={key:0,class:"my-2"},ts={key:0,class:"t-topnav-container-box d-flex justify-content-center hoverToolContainer mb-1 completelyOpac"},ss={style:{"min-width":"30px"},class:"d-flex align-items-center flex-gap-1"},is={id:"mainSearch",class:"container-fluid reContentContainer"},ns={class:"d-flex justify-content-between align-items-center"},os={class:"d-flex flex-gap-sm align-items-center"},rs={class:"miniItemImageContainer text-center"},as={key:1,class:"miniItemImage"},ls=["innerHTML"],ds={class:"d-flex flex-gap-1 small"},us={class:"d-flex align-items-center"},cs={key:0,class:"mx-2 hide-label-md"},ps={key:0,class:"mx-2 hide-label-md"},ms={key:0,class:"mx-2 hide-label-md"},fs={key:0},hs=["innerHTML"],ys={key:2,class:"mt-4"},vs={class:"pinnedItemsContainer ani-fade-in-fast"},gs={class:"card-image-container"},bs={class:"card-body-auto p-1 align-items-center d-flex justify-content-center small"},ws=["title"],Is={key:4,class:"mt-4"},ks={class:"d-flex px-2 justify-content-center flex-gap-1 flex-wrap"},Ss={key:0,class:"pinnedItemsContainer ani-slide-up mt-3"},Ts={class:"card-image-container"},Cs={class:"card-body-auto p-1 align-items-center d-flex justify-content-center small"},Es=["title"],$s={class:"d-flex justify-content-center my-3"},Rs={key:0},Os={key:5,class:"text-center allResults shadow py-2 mt-2"},Ps={key:0,class:"mt-2 text-center"},As={class:"d-flex"},_s={key:0,class:"mt-3 mb-5 allResults shadow w-100 pt-2"},Ls={class:"mt-3 mb-2 reContainer reverseWrap px-2"},Ms={class:"recol small text-muted"},Ds={key:0},Vs={key:1},Us={class:"recol ms-auto d-flex align-items-center small"},Ns={class:"d-flex align-items-center me-1"},Fs={key:0},qs={key:1},Bs={key:2},Hs={key:2,class:"ms-auto showOnLargeScreen"},Ws={key:0,class:"mt-3 mb-5 allResults shadow ms-2"},js={class:"pt-4 mb-2 reverseWrap px-2"},zs={key:0};function Qs(e,t,r,u,p,I){const S=y("b-modal"),l=y("Quickbar"),f=y("b-icon"),w=y("router-link"),$=y("b-button"),E=y("TIcon"),U=y("ItemImage"),ne=y("TypeAhead"),G=y("b-dropdown"),W=y("b-dropdown-item"),oe=y("TIListViewOptions"),re=y("ItemList");y("b-dropdown-divider");const ae=y("TaskBar");return ce("b-modal"),n(),a("div",null,[i(S,{lazy:"true",id:"searchTermsModal",title:e.searchTermTypeName,size:"xl"},{default:o(()=>[s("div",Zt,[(n(!0),a(D,null,q(e.chunks,(h,M)=>(n(),a("div",{key:M,style:{width:"250px"},class:"p-1 truncateme"},[(n(!0),a(D,null,q(h,(L,x)=>(n(),a("div",{key:x},[s("div",{role:"button",onClick:O(j=>{e.runSearch(e.searchTermType,L.key,L.text),e.closeModal("searchTermsModal")},["prevent"]),class:"btn-link truncateme linklike",title:`${L.text} (${L.count})`},C(L.text)+" ("+C(L.count)+") ",9,xt)]))),128))]))),128)),e.chunks&&e.chunks.length==0?(n(),a("div",es,"None found")):c("",!0)])]),_:1},8,["title"]),!e.isMobile&&!e.searchType?(n(),a("div",ts,[t[27]||(t[27]=s("div",{style:{"min-width":"30px"}},null,-1)),e.quickBarItems?(n(),m(l,{key:0,class:"ani-fade-in-fast",items:e.quickBarItems,"collection-id":e.quickBarCollectionId},null,8,["items","collection-id"])):c("",!0),s("div",ss,[i(w,{class:"toolBtn text-muted small p-0 m-0 mx-2",to:`/collection/${e.quickBarCollectionId}`,title:"Edit Quickbar"},{default:o(()=>[i(f,{icon:"pencil-square"})]),_:1},8,["to"])])])):c("",!0),s("div",{id:"homeConfigButton",class:k(e.isMobile?"mb-5 pb-3":"")},[e.isMobile?c("",!0):(n(),m($,{key:0,variant:"link",class:"text-muted-extra",to:"/settings/uiappearance",title:"Change Appearance"},{default:o(()=>[i(f,{icon:"gear"})]),_:1}))],2),s("div",is,[s("div",{class:k(["d-flex",e.classesForSearch])},[e.startSearchMode||e.searchType?(n(),m(ne,{key:0,outerClass:"ani-slide-in-from-left ",ref:"homeSearchBox",items:e.autoItems,onSelectItem:e.selectSearch,onSelectInput:e.selectSearch,onOnInput:e.autoSearch,defaultItem:null,initInput:e.searchText,minInputLength:1,placeholder:"Search Library",itemProjection:h=>h.value},{searchboxprefix:o(()=>[i(w,{to:"/",class:"ms-1"},{default:o(()=>[e.isMobile?(n(),m(E,{key:0,class:"rotateonhover",name:"kindred-simple2",width:32})):c("",!0)]),_:1})]),"list-item-text":o(h=>{var M,L;return[s("div",ns,[s("div",os,[s("div",rs,[(L=(M=h==null?void 0:h.item)==null?void 0:M.data)!=null&&L.type?(n(),m(U,{key:0,item:h.item.data,class:"miniItemImage"},null,8,["item"])):(n(),a("div",as,[i(f,{icon:"search"})]))]),s("div",null,[h.item.itemType=="col"&&h.item.data?(n(),m(f,{key:0,icon:"collection",class:"me-1"})):c("",!0),s("span",{innerHTML:h.boldMatchText(h.itemProjection(e.textTruncate(h.item)))},null,8,ls)])]),s("div",ds,[h.item.data?(n(),m(f,{key:0,role:"button",onClick:O(x=>e.visitItemPage(h.item.data),["stop"]),icon:"info-circle"},null,8,["onClick"])):c("",!0),h.item.data?(n(),m(f,{key:1,icon:"chevron-right"})):c("",!0)])])]}),searchboxpostfix:o(()=>[s("div",us,[s("button",{title:"Search",class:"btn p-2",type:"button",onClick:t[0]||(t[0]=h=>e.search())},[i(f,{icon:"search"})]),s("button",{title:"Search",class:"btn p-2",type:"button",onClick:t[1]||(t[1]=h=>{e.searchText="",e.startSearchMode=!1})},[i(f,{icon:"x-lg"})])])]),_:1},8,["items","onSelectItem","onSelectInput","onOnInput","initInput","itemProjection"])):c("",!0)],2),!e.searchType&&!e.startSearchMode?(n(),a("div",{key:0,class:k(["ani-fade-in-fast d-flex align-items-center flex-gap-1 flex-wrap searchHomeMainBox header-top",e.isMobile?"justify-content-between mx-3 my-4":"justify-content-center my-4"])},[i($,{class:"btn-outline-secondary2 py-2 px-3 d-flex align-items-center justify-content-center bw-color hoverrow2",title:"New to you ",onClick:t[2]||(t[2]=h=>e.startSearchMode=!0)},{default:o(()=>[i(f,{icon:"search"}),e.isMobile?c("",!0):(n(),a("span",cs,"Search Library"))]),_:1}),i($,{class:"btn-outline-secondary2 py-2 px-3 d-flex align-items-center justify-content-center bw-color hoverrow2",title:"New to you ",onClick:t[3]||(t[3]=h=>e.visitPage("new"))},{default:o(()=>[i(f,{icon:"inbox"}),e.isMobile?c("",!0):(n(),a("span",ps,"New to you"))]),_:1}),i($,{class:"btn-outline-secondary2 py-2 px-3 d-flex align-items-center justify-content-center bw-color hoverrow2",title:"Recently Visited",onClick:t[4]||(t[4]=h=>e.runSearch("visit","latest"))},{default:o(()=>[i(f,{icon:"clock-history"}),e.isMobile?c("",!0):(n(),a("span",ms,"Recent"))]),_:1}),i(G,{end:"","no-caret":"",variant:"link","toggle-class":" btn-outline-secondary2 py-2 px-3  ",title:"Menu "},{"button-content":o(()=>[i(f,{icon:"three-dots-vertical"})]),default:o(()=>[e.appType=="extension"?(n(),a("div",fs,[s("button",{class:"dropdown-item link",onClick:t[5]||(t[5]=h=>e.runSearch("tabs","tabs"))},[i(f,{icon:"window"}),t[28]||(t[28]=s("span",null," Current Tabs",-1))]),t[29]||(t[29]=s("div",{class:"dropdown-divider"},null,-1))])):c("",!0),i(w,{class:"dropdown-item link",to:"/library/collections"},{default:o(()=>[i(E,{name:"library",width:20}),t[30]||(t[30]=g(" Collections "))]),_:1}),i(w,{class:"dropdown-item link",to:"/library/items/sharedWithMe"},{default:o(()=>[i(f,{icon:"share"}),t[31]||(t[31]=g(" Shared with Me"))]),_:1}),i(w,{class:"dropdown-item link",to:"/library/items/uncategorized"},{default:o(()=>[i(f,{icon:"ui-radios-grid "}),t[32]||(t[32]=g(" Uncategorized"))]),_:1}),i(w,{class:"dropdown-item link",to:"/library/items/feedback/reactionDate"},{default:o(()=>[i(f,{icon:"heart"}),t[33]||(t[33]=g(" With Reaction List"))]),_:1}),i(w,{class:"dropdown-item link",to:"/library/items/feedback/isReadLaterDate"},{default:o(()=>[i(f,{icon:"book"}),t[34]||(t[34]=g(" Read Later List"))]),_:1}),t[41]||(t[41]=s("div",null,[s("div",{class:"dropdown-divider"})],-1)),i(w,{class:"dropdown-item link",to:"/library/new"},{default:o(()=>[i(f,{icon:"inbox"}),t[35]||(t[35]=g(" New to you"))]),_:1}),s("a",{class:"dropdown-item link",onClick:t[6]||(t[6]=h=>e.runSearch("visit","latest"))},[i(f,{icon:"clock-history"}),t[36]||(t[36]=g(" Recently Visited"))]),s("a",{class:"dropdown-item link",onClick:t[7]||(t[7]=h=>e.runSearch("visit","most"))},[i(f,{icon:"graph-up"}),t[37]||(t[37]=g(" Frequently Visited "))]),t[42]||(t[42]=s("div",null,[s("div",{class:"dropdown-divider"})],-1)),s("a",{class:"dropdown-item link",onClick:t[8]||(t[8]=h=>e.runSearch("terms","ytchannel"))},[i(f,{icon:"youtube"}),t[38]||(t[38]=g(" Youtube Channels "))]),s("a",{class:"dropdown-item link",onClick:t[9]||(t[9]=h=>e.getSearchTerms("tags"))},[i(f,{icon:"tags"}),t[39]||(t[39]=g(" Tags "))]),s("a",{class:"dropdown-item link",onClick:t[10]||(t[10]=h=>e.getSearchTerms("domains"))},[i(f,{icon:"cloud"}),t[40]||(t[40]=g(" Websites "))])]),_:1})],2)):c("",!0),e.errorMessage?(n(),a("div",{key:1,class:"m-2 p-2 text-center errorMessageBox",innerHTML:e.errorMessage},null,8,hs)):c("",!0),e.isMobile&&!e.searchType?(n(),a("div",ys,[e.quickBarItems?(n(),m(l,{key:0,items:e.quickBarItems,"collection-id":e.quickBarCollectionId},null,8,["items","collection-id"])):c("",!0)])):c("",!0),!e.searchType&&e.clientSettings.showCollections&&!e.quickBarItemsLoading&&e.pinnedToHomeItems&&e.pinnedToHomeItems.length>0?(n(),a("div",{key:3,class:k(e.isMobile?"mt-4":"mt-5")},[s("div",vs,[(n(!0),a(D,null,q(e.pinnedToHomeItems,(h,M)=>(n(),m(w,{key:M,to:"/collection/"+h._id,class:"shadow colItem rounded",draggable:"true",onDragstart:L=>e.dragColStart(h),onDragover:t[11]||(t[11]=O(()=>{},["prevent"])),onDrop:L=>e.dropCol(h)},{default:o(()=>[s("div",gs,[i(U,{item:h,class:"card-image-top rounded-top card-image-cls ani-fade-in-fast"},null,8,["item"])]),s("div",bs,[s("div",{class:"m-0 text-center truncateme bw-color",title:h.name},C(e.textTruncate(h.name,28)),9,ws)])]),_:2},1032,["to","onDragstart","onDrop"]))),128))])],2)):c("",!0),!e.searchType&&!e.quickBarItemsLoading?(n(),a("div",Is,[s("div",ks,[e.libraryRoot.length==0?(n(),m($,{key:0,class:"btn-outline-secondary2 p-2 d-flex align-items-center justify-content-center bw-color",title:"View Library",onClick:t[12]||(t[12]=h=>e.viewLibrary())},{default:o(()=>[i(E,{name:"library",width:26,class:"larger"})]),_:1})):(n(),a("div",{key:1,role:"button",class:"hoverrow rounded px-2 py-1 d-flex align-items-center justify-content-center bw-color",title:"View Library",onClick:t[13]||(t[13]=h=>e.libraryRoot=[])},[i(f,{icon:"chevron-up"})]))]),e.libraryRoot.length>0?(n(),a("div",Ss,[(n(!0),a(D,null,q(e.libraryRoot,(h,M)=>(n(),m(w,{key:M,to:"/collection/"+h._id,class:"shadow colItem rounded"},{default:o(()=>[s("div",Ts,[i(U,{item:h,class:"card-image-top rounded-top card-image-cls ani-fade-in-fast"},null,8,["item"])]),s("div",Cs,[s("div",{class:"m-0 text-center truncateme bw-color",title:h.name},C(e.textTruncate(h.name,28)),9,Es)])]),_:2},1032,["to"]))),128))])):c("",!0),s("div",$s,[e.libraryRoot.length>20?(n(),a("div",Rs,[i($,{to:"/library",class:"fillrow btn-link d-flex align-items-center justify-content-center bw-color"},{default:o(()=>[i(f,{icon:"three-dots"})]),_:1})])):c("",!0)])])):c("",!0),e.loadingSearch?(n(),a("div",Os,[s("div",null,[t[44]||(t[44]=s("div",{class:"h1"},null,-1)),e.indexRebuilding?(n(),a("div",Ps,t[43]||(t[43]=[s("div",{class:"mt-2"},"updating search...",-1)]))):c("",!0)])])):c("",!0),s("div",As,[e.searchComplete?(n(),a("div",_s,[s("div",null,[s("div",Ls,[s("div",Ms,[e.searchType=="text"?(n(),a("div",Ds,[s("span",null,' Showing results for "'+C(e.searchValue)+'" ',1)])):(n(),a("div",Vs,[s("span",null," Showing "+C(e.searchDisplayedValue),1)]))]),s("div",Us,[s("div",Ns,[t[45]||(t[45]=s("div",{class:"text-muted"},"Order by",-1)),i(G,{"toggle-class":"mx-2",variant:"outline-secondary",size:"sm",lazy:!0},{"button-content":o(()=>[s("span",null,C(e.orderBy?e.orderBy.text:"Select"),1)]),default:o(()=>[(n(!0),a(D,null,q(e.orderByOptions,(h,M)=>(n(),m(W,{key:M,onClick:L=>e.selectOrderBy(h)},{default:o(()=>[g(C(h.text),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),s("div",{role:"button",class:"p-1 larger me-1",title:"Filter to Hearted",onClick:t[14]||(t[14]=h=>e.filterToggle("heart"))},[e.filters.includes("heart")?(n(),m(f,{key:0,icon:"heart-fill"})):(n(),m(f,{key:1,icon:"heart"}))]),s("div",{role:"button",class:"p-1 larger me-1",title:"Filter to Read Later",onClick:t[15]||(t[15]=h=>e.filterToggle("readlater"))},[e.filters.includes("readlater")?(n(),m(f,{key:0,icon:"book-fill"})):(n(),m(f,{key:1,icon:"book"}))]),i(G,{"toggle-class":"mx-2",variant:"link",lazy:!0},{"button-content":o(()=>[e.filters.includes("collections")?(n(),a("span",Fs,[i(f,{icon:"check-square",class:"me-1"}),i(f,{icon:"collection-fill"})])):e.filters.includes("excollections")?(n(),a("span",qs,[i(f,{icon:"slash-square",class:"me-1"}),i(f,{icon:"collection-fill"})])):(n(),a("span",Bs,[i(f,{icon:"collection"})]))]),default:o(()=>[i(W,{onClick:t[16]||(t[16]=h=>e.filterAdd("collections"))},{default:o(()=>t[46]||(t[46]=[g(" Only Collections")])),_:1}),i(W,{onClick:t[17]||(t[17]=h=>e.filterAdd("excollections"))},{default:o(()=>t[47]||(t[47]=[g(" Exclude Collections")])),_:1}),i(W,{onClick:t[18]||(t[18]=h=>e.filtersRemove(["collections","excollections"]))},{default:o(()=>t[48]||(t[48]=[g(" Include Collections")])),_:1})]),_:1}),i(oe,{class:"ms-auto"})])]),t[49]||(t[49]=s("div",null,null,-1))]),s("div",null,[t[50]||(t[50]=s("hr",{class:"my-1"},null,-1)),i(re,{loading:e.loadingSearch,items:e.results,onUpdate:t[19]||(t[19]=h=>e.reloadSearch())},null,8,["loading","items"])])])):c("",!0),c("",!0),e.isMobile?c("",!0):(n(),a("div",Hs,[e.searchComplete?(n(),a("div",Ws,[s("div",null,[s("div",js,[e.appType=="extension"?(n(),a("div",zs,[s("button",{class:"dropdown-item link",onClick:t[20]||(t[20]=h=>e.runSearch("tabs","tabs"))},[i(f,{icon:"window"}),t[56]||(t[56]=s("span",null," Current Tabs",-1))]),t[57]||(t[57]=s("div",{class:"dropdown-divider"},null,-1))])):c("",!0),s("a",{class:"dropdown-item link",onClick:t[21]||(t[21]=h=>e.runSearch("time","latest"))}," New to you "),s("a",{class:"dropdown-item link",onClick:t[22]||(t[22]=h=>e.runSearch("visit","latest"))}," Recently Visited"),s("a",{class:"dropdown-item link",onClick:t[23]||(t[23]=h=>e.runSearch("visit","most"))}," Most Frequently Visited "),t[61]||(t[61]=s("div",null,[s("div",{class:"dropdown-divider"})],-1)),s("a",{class:"dropdown-item link",onClick:t[24]||(t[24]=h=>e.runSearch("terms","ytchannel"))},[i(f,{icon:"youtube"}),t[58]||(t[58]=g(" Youtube Channels "))]),s("a",{class:"dropdown-item link",onClick:t[25]||(t[25]=h=>e.getSearchTerms("tags"))},[i(f,{icon:"tags"}),t[59]||(t[59]=g(" Tags "))]),s("a",{class:"dropdown-item link",onClick:t[26]||(t[26]=h=>e.getSearchTerms("domains"))},[i(f,{icon:"cloud"}),t[60]||(t[60]=g(" Websites "))])])])])):c("",!0)]))])]),e.showTaskBar?(n(),m(ae,{key:1})):c("",!0)])}const Ks=Q(Xt,[["render",Qs]]),Z={UserCollections:()=>d(()=>import("./js/UserCollectionsDQOYVVhn.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,8,26,10,11,27,28,33,25,14,29,34,35,36,37,38,39,22,13,23,24,30,31,12,15,16,17,18])),UserItems:()=>d(()=>import("./js/UserItemsDl40e9au.js"),__vite__mapDeps([40,1,2,3,4,5,6,7,8,22,13,10,11,23,24,14,25,26,27,28,29,30,31,12,15,16,17,18]))},Ys=[...Qe,{path:"/",alias:"/index.html",name:"Home",component:Ks,meta:{title:"Home",metaTags:[{name:"description",content:"Kindredly Home and Search"},{property:"og:description",content:"Kindredly Home and Search"}]}},{path:"/share",name:"Share",component:()=>d(()=>import("./js/AppPopupB5sBkEdm.js"),__vite__mapDeps([41,5,1,2,3,4,6,7,8,23,24,10,11,36,37,14,42]))},{path:"/sharePrompt",name:"SharePrompt",component:()=>d(()=>import("./js/SharePromptDWY20vhz.js"),__vite__mapDeps([43,1,2,3,4,5,6,7,8,44,45,46,47,48,14,10,11,38]))},{path:"/debug",name:"Debug",component:()=>d(()=>import("./js/DebugBVrPaZ4b.js"),__vite__mapDeps([49,50,1,2,3,4,5,6,7,8,51]))},{path:"/clienttests",name:"ClientTests",component:()=>d(()=>import("./js/ClientTestszetQmNb5.js"),__vite__mapDeps([52,1,2,3,4,5,6,7,8,51]))},{path:"/debugtest",name:"DebugTest",component:()=>d(()=>import("./js/DebugTestDpi_2InP.js"),__vite__mapDeps([53,2,1,3,4,5,6,7,8,51]))},{path:"/feeds",name:"MyFeedHome",component:()=>d(()=>import("./js/MyFeedsDdx8vZn4.js"),__vite__mapDeps([54,26,1,2,3,4,5,6,7,8,10,11,27,28,33,25,14,29,34,35,36,37,38,39,55,12,13,15,16,17,18,56])),redirect:e=>({path:"/feeds/sharing"}),children:[{path:"home",name:"HomeFeed",component:()=>d(()=>import("./js/FeedHomeBabqom83.js"),__vite__mapDeps([57,1,2,3,4,5,6,7,8,58,59,60,61,62,63,10,11,64,65,14,66,67,68,30,69,70,23,24,71,72,9,73,74,75,12,13,15,16,17,18,76,77,78]))},{path:"sharing",name:"ShareFeed",component:()=>d(()=>import("./js/SharingFeedCNq9Wg-b.js"),__vite__mapDeps([79,1,2,3,4,5,6,7,8,58,59,60,61,62,63,10,11,64,65,14,66,67,68,30,69]))},{path:"subscriptions",name:"SubscriptionFeed",component:()=>d(()=>import("./js/SubscriptionFeedBMnTaBXx.js"),__vite__mapDeps([70,5,1,2,3,4,6,7,8,23,24,71,14,10,11,72,9,73,30,74,75,12,13,15,16,17,18,76]))},{path:"rediscover",name:"RediscoverFeed",component:()=>d(()=>import("./js/RediscoverFeedBdEqFp0v.js"),__vite__mapDeps([80,1,2,3,4,5,6,7,8,77,14,10,11,23,24,78]))},{path:"new",name:"NewFeed",component:()=>d(()=>import("./js/NewItemsMyX7ck38.js"),__vite__mapDeps([81,5,1,2,3,4,6,7,8]))}],meta:{title:"My Feed"}},{path:"/p/:id",name:"ViewPostPage",component:()=>d(()=>import("./js/ViewPostPagezjQk3HVl.js"),__vite__mapDeps([82,1,2,3,4,5,6,7,8,59,60,61,62,63,10,11,64,65,14,66])),meta:{isKindred:!0,title:"Viewing Post"}},{path:"/aichat",name:"AIChat",component:()=>d(()=>import("./js/AIChatCz6EvGiM.js"),__vite__mapDeps([83,1,2,3,4,5,6,7,8,84]))},{path:"/listUserItems",name:"ListUserItems",component:()=>d(()=>import("./js/UserItemsDl40e9au.js"),__vite__mapDeps([40,1,2,3,4,5,6,7,8,22,13,10,11,23,24,14,25,26,27,28,29,30,31,12,15,16,17,18]))},{path:"/people",name:"People",component:()=>d(()=>import("./js/PeoplenOe1OEXC.js"),__vite__mapDeps([85,86,1,2,3,4,5,6,7,8,87,88,89,10,11,90,91,51,92,93,94,95]))},{path:"/notifications",name:"notifications",component:()=>d(()=>import("./js/NotificationsPageCRS-b4z3.js"),__vite__mapDeps([96,97,1,2,3,4,5,6,7,8]))},{path:"/collection/:collectionId",name:"Collection",component:()=>d(()=>import("./js/CollectionCtm91ePt.js"),__vite__mapDeps([98,5,33,25,26,1,2,3,4,6,7,8,10,11,27,28,14,29,34,35,36,37,38,39,48,22,13,23,24,30,31,99,47,100,101,102,103,104,74,105,51,106,44,45,46,12,15,16,17,18,107]))},{path:"/post/create",name:"CreatePost",component:()=>d(()=>import("./js/CreatePostPage6lUdP1tC.js"),__vite__mapDeps([108,109,1,2,3,4,5,6,7,8,90,91,14,10,11,33,25,26,27,28,29,34,35,36,37,38,39,64,65,60,61,62,63,47,110]))},{path:"/publishCollection/:itemId",name:"PublishCollection",component:()=>d(()=>import("./js/PublishCollectionD4k3LGho.js"),__vite__mapDeps([111,112,1,2,3,4,5,6,7,8,51,113,114,14,10,11,99,47,100,101,102]))},{path:"/friend/:friendUserId",name:"FriendProfile",component:()=>d(()=>import("./js/FriendProfilecXreMVR5.js"),__vite__mapDeps([115,1,2,3,4,5,6,7,8]))},{path:"/item/add",name:"AddItempage",component:()=>d(()=>import("./js/AddItemPageDsBmnCov.js"),__vite__mapDeps([116,106,1,2,3,4,5,6,7,8,34,35,36,37,25,26,10,11,27,28,14,29,44,45,46,47]))},{path:"/item/attach/:itemId",name:"ItemAttach",component:()=>d(()=>import("./js/AttachToItemPagej6M2cWUX.js"),__vite__mapDeps([117,118,1,2,3,4,5,6,7,8,47,45,14,10,11,99,100,101,102,18,119,120]))},{path:"/library/builderItemList",name:"BuilderItemList",component:()=>d(()=>import("./js/BuilderItemListPageBaQzOq3c.js"),__vite__mapDeps([121,1,2,3,4,5,6,7,8,105,36,37,25,26,10,11,27,28,14,29,51]))},{path:"/library",name:"Library",component:()=>d(()=>import("./js/MyLibraryMB6aqoUc.js"),__vite__mapDeps([122,10,1,2,3,4,5,6,7,8,11,55,12,13,14,15,16,17,18,56])),redirect:e=>({path:"/library/collections"}),children:[{path:"collections",name:"MyCollections",component:Z.UserCollections},{path:"new",name:"NewFeed",component:()=>d(()=>import("./js/NewItemsMyX7ck38.js"),__vite__mapDeps([81,5,1,2,3,4,6,7,8]))},{path:"items/:listType/:field?",name:"MyItems",component:Z.UserItems}],meta:{title:"Library"}},{path:"/settings",name:"Settings",component:()=>d(()=>import("./js/MySettingsCj1j7-pB.js"),__vite__mapDeps([123,1,2,3,4,5,6,7,8,16,17,18,124])),redirect:e=>({path:"/settings/loginprefs"}),children:[{path:"loginprefs",name:"MyLoginPrefs",component:()=>d(()=>import("./js/MyLoginPrefsBwpNBNBh.js"),__vite__mapDeps([125,1,2,3,4,5,6,7,8,126,89,10,11,90,91,51,127,128,129,114,130,131,132]))},{path:"clients",name:"MyClients",component:()=>d(()=>import("./js/MyClientList3ICAS9-n.js"),__vite__mapDeps([133,134,1,2,3,4,5,6,7,8,135]))},{path:"encryption",name:"MyEncryptionSettings",component:()=>d(()=>import("./js/MyEncryptionSettingsXpYpSGwr.js"),__vite__mapDeps([136,137,6,2,7,1,3,4,5,8,128,138,139]))},{path:"uiappearance",name:"MyUIAppearance",component:()=>d(()=>import("./js/MyUIAppearancePagex4Seiqte.js"),__vite__mapDeps([140,141,90,1,2,3,4,5,6,7,8,91,142]))},{path:"publicprofile",name:"MyPublicProfile",component:()=>d(()=>import("./js/PublicProfileSettings0u32_lcs.js"),__vite__mapDeps([143,114,1,2,3,4,5,6,7,8,90,91]))},{path:"notifications",name:"MyNotifications",component:()=>d(()=>import("./js/NotificationSettingsa0mf5sFl.js"),__vite__mapDeps([144,1,2,3,4,5,6,7,8]))},{path:"taskbar",name:"MyTaskbar",component:()=>d(()=>import("./js/TaskbarSettingsCdCbL9xS.js"),__vite__mapDeps([145,1,2,3,4,5,6,7,8,33,25,26,10,11,27,28,14,29,34,35,36,37,38,39,20,21]))},{path:"following",name:"MyFollowing",component:()=>d(()=>import("./js/FollowingwaRqGSkw.js"),__vite__mapDeps([146,1,2,3,4,5,6,7,8]))},{path:"mysubscriptionlist",name:"MysubscriptionList",component:()=>d(()=>import("./js/SubscriptionListCX4RoYt1.js"),__vite__mapDeps([147,1,2,3,4,5,6,7,8,74]))},{path:"usage",name:"MyUsage",component:()=>d(()=>import("./js/MyUsageCwrqteFp.js"),__vite__mapDeps([148,92,1,2,3,4,5,6,7,8,93,94,149,150,151,152,153,10,11,127]))},{path:"userfiles",name:"MyUserFiles",component:()=>d(()=>import("./js/MyUserFilesDSumH-vf.js"),__vite__mapDeps([154,134,1,2,3,4,5,6,7,8,135]))},{path:"usagelimits",name:"MyUsageLimits",component:()=>d(()=>import("./js/MyUsageLimitsCED6vZxD.js"),__vite__mapDeps([155,92,1,2,3,4,5,6,7,8,93,94]))},{path:"activity",name:"MyActivity",component:()=>d(()=>import("./js/MyActivityBgVsEYak.js"),__vite__mapDeps([156,1,2,3,4,5,6,7,8,157,132]))},{path:"accessrequests",name:"MyAccessRequests",component:()=>d(()=>import("./js/MyAccessRequestsCaX6IBkO.js"),__vite__mapDeps([158,159,1,2,3,4,5,6,7,8,153,10,11,127,160,25,26,27,28,14,29,51,161,162]))},{path:"useraccessrequests",name:"ManageAccessRequests",component:()=>d(()=>import("./js/AccessRequestManagerjeeDlT_w.js"),__vite__mapDeps([163,1,2,3,4,5,6,7,8,160,25,26,10,11,27,28,14,29,51]))},{path:"account",name:"ManageAccount",component:()=>d(()=>import("./js/ManageAccountChvdgB0S.js"),__vite__mapDeps([164,165,1,2,3,4,5,6,7,8,51,166]))},{path:"spaceUsage",name:"SpaceUsage",component:()=>d(()=>import("./js/SpaceUsageDtI32s6v.js"),__vite__mapDeps([167,2,1,3,4,5,6,7,8]))},{path:"manageusers",name:"ManageUsers",component:()=>d(()=>import("./js/ManageUsersDs-SL64O.js"),__vite__mapDeps([168,88,89,10,1,2,3,4,5,6,7,8,11,90,91,51,92,93,94]))},{path:"debugconsole",name:"DebugConsole",component:()=>d(()=>import("./js/DebugConsoler13vHIGP.js"),__vite__mapDeps([169,1,2,3,4,5,6,7,8,51]))},{path:"importexport",name:"ImportExport",component:()=>d(()=>import("./js/ImportExporttUZdlbzV.js"),__vite__mapDeps([170,171,5,1,2,3,4,6,7,8,51,165]))},{path:"importbookmarks",name:"ImportBookmarksPage",component:()=>d(()=>import("./js/ImportBookmarksPage_MGWx319.js"),__vite__mapDeps([172,171,5,1,2,3,4,6,7,8,51]))}],meta:{title:"Settings"}},{path:"/manage/user/:userId",name:"ManageUser",redirect:e=>({path:`/manage/user/${e.params.userId}/loginprefs`}),component:()=>d(()=>import("./js/UserSettingsN1jzs2A-.js"),__vite__mapDeps([173,1,2,3,4,5,6,7,8,10,11,16,17,18,174])),children:[{path:"loginprefs",name:"UserLoginPrefs",component:()=>d(()=>import("./js/UserLoginPrefsmSg3ld4A.js"),__vite__mapDeps([175,127,1,2,3,4,5,6,7,8,129,10,11,89,90,91,51,128,132,130]))},{path:"usagelimits",name:"UsageLimits",component:()=>d(()=>import("./js/UserUsageLimitsDVmPAJra.js"),__vite__mapDeps([176,92,1,2,3,4,5,6,7,8,93,94]))},{path:"usage",name:"UserUsage",component:()=>d(()=>import("./js/UserUsageCWcjPuuo.js"),__vite__mapDeps([177,149,1,2,3,4,5,6,7,8,150,151,93,152,10,11]))},{path:"activity",name:"UserActivity",component:()=>d(()=>import("./js/UserActivityBh-BooSA.js"),__vite__mapDeps([178,157,1,2,3,4,5,6,7,8,132,149,150,151,93,152,10,11]))},{path:"encryption",name:"UserEncryptionSettings",component:()=>d(()=>import("./js/UserEncryptionSettingsDY2uafCV.js"),__vite__mapDeps([179,137,6,2,7,1,3,4,5,8,128]))},{path:"accessrequests",name:"UserAccessRequests",component:()=>d(()=>import("./js/AccessRequestManagerjeeDlT_w.js"),__vite__mapDeps([163,1,2,3,4,5,6,7,8,160,25,26,10,11,27,28,14,29,51]))},{path:"friends",name:"UserFriends",component:()=>d(()=>import("./js/UserFriendsPageaca1lnNa.js"),__vite__mapDeps([180,86,1,2,3,4,5,6,7,8,87,88,89,10,11,90,91,51,92,93,94,95]))},{path:"sharefeed",name:"UserShareFeed",component:()=>d(()=>import("./js/UserSharingFeedBqZfhBbi.js"),__vite__mapDeps([181,59,1,2,3,4,5,6,7,8,60,61,62,63,10,11,64,65,14,66,67,68,182]))},{path:"clients",name:"UserClientList",component:()=>d(()=>import("./js/UserClientListCcHc29iU.js"),__vite__mapDeps([183,134,1,2,3,4,5,6,7,8,135]))},{path:"following",name:"Following",component:()=>d(()=>import("./js/FollowingwaRqGSkw.js"),__vite__mapDeps([146,1,2,3,4,5,6,7,8]))},{path:"subscriptionList",name:"subscriptionList",component:()=>d(()=>import("./js/SubscriptionListCX4RoYt1.js"),__vite__mapDeps([147,1,2,3,4,5,6,7,8,74]))}],meta:{title:"User Management"}},{path:"/userLibrary/:userId",name:"UserLibrary",component:()=>d(()=>import("./js/UserLibraryDW-MsH1p.js"),__vite__mapDeps([184,26,1,2,3,4,5,6,7,8,10,11,27,28,33,25,14,29,34,35,36,37,38,39,12,13,15,16,17,18,185])),children:[{path:"",name:"UserCollections",component:Z.UserCollections},{path:"items/:listType/:field?",name:"UserItems",component:Z.UserItems}],meta:{title:"Library"}},{path:"/user/items/:userId/:listType/:field?",name:"UserFeedback",component:Z.UserItems},{path:"/user/profile/:userId",name:"UserProfile",component:()=>d(()=>import("./js/UserProfileDrSKrsnP.js"),__vite__mapDeps([186,5,10,1,2,3,4,6,7,8,11,22,13,23,24,14,25,26,27,28,29,30,31,187,149,150,151,93,152,12,15,16,17,18]))},{path:"/archived",name:"Archived",component:()=>d(()=>import("./js/Archived4c5U_Z5z.js"),__vite__mapDeps([188,1,2,3,4,5,6,7,8]))},{path:"/curationInfo",name:"CurationInfo",component:()=>d(()=>import("./js/CurationInfoB79izSTU.js"),__vite__mapDeps([189,1,2,3,4,5,6,7,8]))},{path:"/blocked",name:"Blocked",component:()=>d(()=>import("./js/BlockedB6bOO7vU.js"),__vite__mapDeps([190,5,33,25,26,1,2,3,4,6,7,8,10,11,27,28,14,29,34,35,36,37,38,39,161,162,153,127,160,51]))},{path:"/outoftime",name:"OutOfTime",component:()=>d(()=>import("./js/OutOfTimeBiMeenDw.js"),__vite__mapDeps([191,1,2,3,4,5,6,7,8,150,151]))},{path:"/item/:itemId?",name:"Item",component:()=>d(()=>import("./js/ItemDYf-bgEb.js"),__vite__mapDeps([192,5,10,1,2,3,4,6,7,8,11,193,25,26,27,28,14,29,194,74,23,24,71,72,9,73,99,47,100,101,102,112,51,195,113,36,37,114,103,104,196,64,65,197,118,45,18,119,12,13,15,16,17,198]))},{path:"/waitingList",name:"WaitingList",component:()=>d(()=>import("./js/WaitingListC-ZEGbD2.js"),__vite__mapDeps([199,1,2,3,4,5,6,7,8,200])),meta:{guest:!0}},{path:"/help",name:"Help",component:()=>d(()=>import("./js/HelpCMBRaUpS.js"),__vite__mapDeps([201,88,89,10,1,2,3,4,5,6,7,8,11,90,91,51,92,93,94]))},{path:"/signin",name:"SignIn",component:()=>d(()=>import("./js/SignInd66smV4E.js"),__vite__mapDeps([202,126,1,2,3,4,5,6,7,8,203,204,166,205])),meta:{guest:!0,guestOnly:!0}},{path:"/settings/server",name:"ServerSettings",component:()=>d(()=>import("./js/ServerSettingsPFukfG_X.js"),__vite__mapDeps([206,1,2,3,4,5,6,7,8,166])),meta:{guest:!0,guestOnly:!0}},{path:"/register",name:"Register",component:()=>d(()=>import("./js/RegisterBO_Wvc4m.js"),__vite__mapDeps([207,1,2,3,4,5,6,7,8,138,203,204,126,208])),meta:{guest:!0,guestOnly:!0}},{path:"/joinAccount",name:"JoinAccount",component:()=>d(()=>import("./js/JoinAccountCn9xIsWZ.js"),__vite__mapDeps([209,203,1,2,3,4,5,6,7,8,204,210])),meta:{guest:!0,guestOnly:!1}},{path:"/userMigration",name:"UserMigration",component:()=>d(()=>import("./js/UserMigrationDT4AXkSz.js"),__vite__mapDeps([211,1,2,3,4,5,6,7,8,51])),meta:{guest:!1}},{path:"/forgotPassword",name:"ForgotPassword",component:()=>d(()=>import("./js/ForgotPasswordCNE2fuTj.js"),__vite__mapDeps([212,1,2,3,4,5,6,7,8,51])),meta:{guest:!0,guestOnly:!0}},{path:"/setup/welcome",name:"WelcomePage",component:()=>d(()=>import("./js/WelcomeTourPageCEdia2Dm.js"),__vite__mapDeps([213,214,1,2,3,4,5,6,7,8,215]))},{path:"/setup/account",name:"AccountSetupPage",component:()=>d(()=>import("./js/AccountSetupPageCNfOWm6I.js"),__vite__mapDeps([216,1,2,3,4,5,6,7,8,87,88,89,10,11,90,91,51,92,93,94,95,217,218,25,26,27,28,14,29,194,219,30,220,221,222,223,141,142,130,224,193,74,71,72,9,73,225,131,171,226]))},{path:"/:pathMatch(.*)*",name:"PageNotFound",component:()=>d(()=>import("./js/PageNotFoundDb44v1Mh.js"),__vite__mapDeps([227,1,2,3,4,5,6,7,8])),meta:{guest:!0}}],V=Pe({isBack:!1,fromPosition:0,toPosition:0}),he=ut({history:ct(),routes:Ys,scrollBehavior(e,t,r){return r||{top:0}}});he.beforeEach(async(e,t,r)=>{var I,S;const u=((I=history.state)==null?void 0:I.position)||0,p=((S=t==null?void 0:t.meta)==null?void 0:S.position)||-1;V.fromPosition==-1&&p==u||u>p||u==p&&V.toPosition==V.fromPosition?V.isBack=!1:V.isBack=!0,V.fromPosition=p,V.toPosition=u,e.meta.position=u||0,Oe.ChangeLoadingRoute(!0);try{const l=e.meta.title;if(l?document.title=l+" - Kindredly":document.title=e.name+" - Kindredly",e.matched.some(f=>f.meta.guest)){if(Te.isAuth()&&e.matched.some(f=>f.meta.guestOnly)){r("/");return}r();return}else{if(Te.isAuth()){r();return}r(`/signin?redirect=${e.fullPath}`);return}}catch{r("/signin");return}});he.afterEach(()=>{setTimeout(()=>Oe.ChangeLoadingRoute(!1),300)});const Gs=/(https?:\/\/[^\s]+)/i;function Js(e){if(!e)return null;const t=e.match(Gs);return t?t[0]:null}fe.addListener("appStateChange",({isActive:e})=>{console.log("App state changed. Is active?",e),Ke(Ye).catch(t=>{console.log("Storage connection NOK, refresh the page to restore IndexedDb to a working state.",t),window.location.reload()})});fe.addListener("appUrlOpen",e=>{console.log("App opened with URL:",e)});fe.addListener("appRestoredResult",e=>{console.log("Restored state:",e)});const Xs=Y({name:"AppHome",mixins:[Ge,K],components:{CompanionWidget:bt,BToastOrchestrator:lt,CreateCollection:A(()=>d(()=>import("./js/CreateCollectionBbjx_AkR.js").then(e=>e.a),__vite__mapDeps([26,1,2,3,4,5,6,7,8,10,11,27,28]))),VerifyPassword:A(()=>d(()=>import("./js/VerifyPasswordmdxh9FnH.js"),__vite__mapDeps([139,1,2,3,4,5,6,7,8]))),AddItem:A(()=>d(()=>import("./js/AddItemDHXh2dX9.js"),__vite__mapDeps([33,25,26,1,2,3,4,5,6,7,8,10,11,27,28,14,29,34,35,36,37,38,39]))),AddItemDefault:A(()=>d(()=>import("./js/AddItemDefaultsX2-MvzB.js"),__vite__mapDeps([106,1,2,3,4,5,6,7,8,34,35,36,37,25,26,10,11,27,28,14,29,44,45,46,47]))),Notifications:A(()=>d(()=>import("./js/NotificationsoSBzr05x.js"),__vite__mapDeps([97,1,2,3,4,5,6,7,8]))),LibraryIcon:Je,CreatePost:A(()=>d(()=>import("./js/CreatePostB-Mkk1Az.js"),__vite__mapDeps([109,1,2,3,4,5,6,7,8,90,91,14,10,11,33,25,26,27,28,29,34,35,36,37,38,39,64,65,60,61,62,63,47,110]))),CreateOrEditNote:A(()=>d(()=>import("./js/CreateOrEditNoteBYH_oGnj.js"),__vite__mapDeps([228,1,2,3,4,5,6,7,8,25,26,10,11,27,28,14,29,72,9,229]))),ProfileImage:at,TIcon:me,SwitchUser:A(()=>d(()=>import("./js/SwitchUserk09ehrF_.js"),__vite__mapDeps([230,10,1,2,3,4,5,6,7,8,11,127]))),WelcomeInfo:A(()=>d(()=>import("./js/WelcomeInfoDaf1UogT.js"),__vite__mapDeps([231,1,2,3,4,5,6,7,8]))),WelcomeTour:A(()=>d(()=>import("./js/WelcomeTourCJnejcgc.js"),__vite__mapDeps([214,1,2,3,4,5,6,7,8,215]))),VersionInfo:A(()=>d(()=>import("./js/VersionInfoKmx8--vU.js"),__vite__mapDeps([166,1,2,3,4,5,6,7,8]))),BMsgModal:A(()=>d(()=>import("./js/BMsgModalC9KkVYSg.js"),__vite__mapDeps([232,2,1,3,4,5,6,7,8])))},data(){return{info:null,searchQuery:null,loadingError:!1,loadingEncStatus:!0,pinpass:null,requestPass:!1,selectedUser:null,loading:!1,errorMessage:null,keys:[],fullscreen:!1,mainLoaded:!1,uiWelcome:{dismissWelcome:!1},showWelcomeModal:!1,browserSafety:{adblocker:!1,adblockername:""},notificationVisible:!1,autoCollapse:!1,dragActive:!1,uploadedFiles:[]}},computed:{...Re,transitionName(){return V.isBack?"fade-in":"slide-left"},navInfo(){return V},isOnline(){return navigator.onLine},currentSelectedCollectionId(){return null},isSidebarCollapsed(){return this.clientSettings.collapseSidebar||this.autoCollapse},tMainClasses(){return{"t-collapsed":!this.isMobile&&this.clientSettings.collapseSidebar,notMobile:!this.isMobile}},pageWithoutMenu(){var e;return["Blocked","NA","SignIn","ServerSettings","Register","ForgotPassword","PageNotFound","WaitingList","JoinAccount","AccountSetupPage","CollectionView"].includes(((e=this.$route)==null?void 0:e.name)||"NA")||this.$route.path=="/blocked"}},methods:{setCompanionOpen:ht,async getToken(){const e=await this.sendReq("/authInfo");return e.success?e.result.token:null},async openWebapp(e="/kindredapp/"){const t=await this.getToken();let r=t?`${this.config.serverHostname}/auth?token=${t}&target=${e}`:this.config.serverHostname;await ue(r,"_blank")},async refreshUI(){await this.RefreshAll(!0,!1,!0,!0),this.UpdateTaskBar()},async showNotification(e,t,r={icon:"/favicon_kindred.ico",badge:"",tag:"kindredly",body:""}){const u=await this.getNotificationPauseUntil();if(u&&u>Date.now())return;this.pauseNotifications(3);let p=e;this.showToast(p,{onClick:()=>{this.$router.push(t)},variant:"info",delay:1e3,autoClose:!0,onClose:()=>{b("Notification closed"),this.pauseNotifications()}})},async pauseNotifications(e=24){let t=new Date;t.setHours(t.getHours()+e),await Ce.set(this.currentUserId,"notificationPauseUntil",t.getTime())},async getNotificationPauseUntil(){try{return await Ce.get(this.currentUserId,"notificationPauseUntil")}catch{return null}},async signout(){let e=await this.sendReq("/signout",{});e.success?(await this.LogOut(!0),window.location.href=this.appPrefix,this.errorMessage=null):(console.error("Error:",e.message),this.errorMessage=e.message)},async checkVersion(){if(this.appType!="webapp"){const e=await this.LoadVersionSummary(!1);e.success&&e.needsNewVersion&&this.showModal("version-status-modal")}},toggleSidebar(){this.updateSidebar(!this.clientSettings.collapseSidebar)},loadSidebar(){this.updateSidebar(this.clientSettings.collapseSidebar==!0)},updateSidebar(e,t=!1){this.autoCollapse=t,this.currentUser&&this.updateClientSetting("collapseSidebar",e)},async updateUIWelcomePrefs(e,t){this.uiWelcome[e]=t,this.UpdatePref("uiWelcome",this.uiWelcome)},async checkWelcomeModal(){var e,t;(e=this.userPrefs)!=null&&e.loaded&&(this.uiWelcome={...this.uiWelcome,...this.userPrefs.data.uiWelcome},!this.uiWelcome.dismissWelcome&&((t=this.currentUser)==null?void 0:t.type)==="restricted"&&(this.uiWelcome.dismissWelcome=!0,this.updateUIWelcomePrefs("dismissWelcome",!0)),this.uiWelcome.dismissWelcome||(this.showWelcomeModal=!0,this.showModal("welcome-modal"),this.updateUIWelcomePrefs("dismissWelcome",!0)))},closeFileModal(e,t="item"){e&&(this.$router.push(`/${t}/${e}`),this.closeModal("add-file-modal"))},closeAddSite(e,t="item"){b("Data",e),e&&(this.closeModal("add-item-modal"),this.$router.push(`/${t}/${e}`))},closeAddNote(e,t="item"){b("Data",e),e&&(this.$router.push(`/${t}/${e}`),this.closeModal("add-note-modal"))},async openBrowser(){if(this.appType=="ios")await B.sendAppRequest({action:"SWITCH_VIEW",value:{view:"browser"}});else{const e=await this.sendReq("/client/nativeMessage",{type:"webUIEvent",data:{eventType:"openKindredBrowser"}});if(e.success)b("response",e);else{console.error("Error:",e.message),this.errorMessage=e.message;return}}},async loadPage(){b("Loading page AppHome.vue"),this.mainLoaded=!1,ie.privatelyHosted&&Xe(!0),this.loadSidebar(),this.currentUser||b("User not found when loading, should be forwarded to login page"),this.mainLoaded=!0,this.delayedLoader()},async loadPageAfterMount(){try{this.checkDarkMode(),!this.isMobile&&window.innerWidth<1200&&this.updateSidebar(!0,!0)}catch(e){console.error("Error loading page",e)}},setActive(e){if(e.dataTransfer){const t=e.dataTransfer.items;for(let r=0;r<t.length;r++)if(t[r].kind==="file"){this.dragActive=!0;return}}},setInactive(){this.dragActive=!1},async onDrop(e){if(e.dataTransfer){const t=[...e.dataTransfer.files];for(let r of t)await Ze({type:"file",data:{filename:r.name,size:r.size,mimeType:r.type,path:r.webkitRelativePath,file:r}});b("Dropped files:",t)}this.dragActive=!1,this.$router.push("/sharePrompt?r="+Math.random())},async checkForNewMessages(){await this.sendReq("/client/nativeMessage",{type:"clientReady",data:{message:"Client is ready (AppHome.vue)"}})},async processorSharedItems(e){if(xe(),!(!e||e.length==0)){for(let t of e){let r=t.dataType||"text";if(r=="text"&&(t!=null&&t.data)){let u=t.data,p=Js(u);if(p){const I=encodeURIComponent(p);this.$router.push("/share?url="+I);return}else console.log("No URL found in shared text:"+t.data)}else if(r=="image"||r=="video"){let u=decodeURIComponent(t.mimeType),p=t.filename,I="data:"+u+";base64,";await et({type:"base64",data:{dataType:r,mimeType:u,filename:p,data:I+t.data}})}else this.showToast("No URL found in shared text:"+r,{variant:"warning"}),console.error("Unknown data type",r)}this.$router.push("/sharePrompt")}},async setupNativePushNotifications(){if(!this.isNativeClient)return;const e=async()=>{await F.addListener("registration",u=>{console.info("Registration token: ",u)}),await F.addListener("registrationError",u=>{console.error("Registration error: ",u.error)}),await F.addListener("pushNotificationReceived",u=>{b("Push notification received, ignoring: ",u)}),await F.addListener("pushNotificationActionPerformed",u=>{var S;const p=u==null?void 0:u.notification,I={type:(S=p==null?void 0:p.data)==null?void 0:S.type,data:p==null?void 0:p.data};b("Push notification action performed. ActionId:",u.actionId," msgBundle:",I," JSONDUMP:",JSON.stringify(u)),this.processMessageBundle(I)})},t=async()=>{let u=await F.checkPermissions();if(u.receive==="prompt"&&(u=await F.requestPermissions()),u.receive!=="granted")throw new Error("User denied permissions!");await F.register()},r=async()=>{const u=await F.getDeliveredNotifications();b("delivered notifications",u)};await t(),await e(),await r()},async processMessageBundle(e){var t,r,u,p,I,S,l,f,w,$,E,U;e.type==="SHARE_ITEMS"?this.processorSharedItems(e.items):e.type=="NEW_POST"?this.$router.push("/p/"+((t=e.data)==null?void 0:t.postId)):e.type=="DEVICE_INFO_UPDATE"?this.sendReq("/client/device/updateInfo",e.data):e.type=="SHARED_ITEM"?((r=e.data)==null?void 0:r.refType)=="col"?this.$router.push("/collection/"+((u=e.data)==null?void 0:u.refId)):this.$router.push("/item/"+((p=e.data)==null?void 0:p.refId)):e.type=="FOLLOWING_UPDATE"?((I=e.data)==null?void 0:I.refType)=="pub_col"?this.$router.push("/v/"+((S=e.data)==null?void 0:S.refId)):((l=e.data)==null?void 0:l.refType)=="col"&&this.$router.push("/collection/"+((f=e.data)==null?void 0:f.refId)):e.type=="FRIEND_REQUEST"?this.$router.push("/people/?show=friends"):e.type=="ACCESS_REQUEST"?this.$router.push("/settings/useraccessrequests"):e.type=="NEW_COMMENT"&&((w=e.data)!=null&&w.postId?this.$router.push("/p/"+(($=e.data)==null?void 0:$.postId)):((E=e.data)==null?void 0:E.refType)=="item"&&this.$router.push("/item/"+((U=e.data)==null?void 0:U.refId)))},async setupNativeEventListeners(){if(this.isNativeClient)if(ie.appType=="ios"){window.addEventListener("iosNativeJSONRequest",async e=>{console.log("Received JSON request from IOS",e.detail);try{const{callbackId:t,data:r}=e.detail;try{if(r.action=="sendReq"){const{path:u,requestData:p,options:I}=r,S=await this.sendReq(decodeURIComponent(u),p,I);await B.invokeWebCallback({callbackId:t,result:{...S}})}else if(r.action=="loadPath"){const{path:u}=r;this.$router.push(u),await B.invokeWebCallback({callbackId:t,result:{}})}else r.action==="checkURL"?await B.invokeWebCallback({callbackId:t,result:{allowed:!0,data:{userId:this.currentUserId}}}):await B.invokeWebCallback({callbackId:t,result:{allowed:!0,data:{userId:this.currentUserId}}})}catch(u){console.error(u),await B.invokeWebCallback({callbackId:t,result:{error:!0,allowed:!0}})}}catch(t){console.error("Error processing JSON request",t)}}),window.addEventListener("iosNativeMessage",e=>{let t=decodeURIComponent(e==null?void 0:e.detail.data),r=JSON.parse(t);b("Received message from IOS",r),this.processMessageBundle(r)});try{const e=await B.sendAppRequest({action:"STATUS_UPDATE",value:{WEB_CLIENT_READY:!0}});b("Response from native:",e)}catch(e){console.log("Error sending message to native:",e)}}else try{chrome.runtime.onMessage.addListener((e,t,r)=>{b("Received message from ANDROID",e),this.processMessageBundle(e)}),this.checkForNewMessages(),window.addEventListener("focus",()=>{this.checkForNewMessages()})}catch(e){console.error("Error Getting Native Messages:",e)}},async checkIfNeedPassword(){this.loadingEncStatus=!0;const e=await this.LoadEncStatus(!1);e!=null&&e.userEncSetup&&!(e!=null&&e.userEncEnabled)&&(this.requestPass=!0,this.showModal("enter-password-modal")),this.loadingEncStatus=!1},async checkIfEmailVerifyNeeded(){var e;if(b("Checking if email verification is needed"+this.needCurrentUserVerification),this.needCurrentUserVerification&&!this.config.debugMode){let t=new Date(((e=this.currentUser)==null?void 0:e.createdAt)||0);if(t<new Date("2024-06-22"))return;(new Date().getTime()-t.getTime())/(1e3*3600*24)>2&&this.showModal("verify-email-modal")}},async checkIfNotifications(){var e,t,r;this.isNativeClient||(((e=this.miscStats)==null?void 0:e.notificationCountUnread)>0&&this.showNotification("You have unread notifications","/notifications"),this.isAdminUser&&((t=this.miscStats)==null?void 0:t.accessRequestCount)>0&&this.showNotification("You have pending access requests","/settings/useraccessrequests"),((r=this.miscStats)==null?void 0:r.unreadFeedItems)>0&&this.showNotification("You have new feed items","/feeds/sharing"))},async delayedLoader(){await this.sleep(1e3),this.checkIfEmailVerifyNeeded(),this.checkIfNeedPassword(),this.checkVersion(),this.checkIfNotifications()}},mounted(){b("Loading on mount"),this.loadPageAfterMount()},filters:{},directives:{},watch:{},created(){b("Route name:"+this.$route.name,this.currentUserId),this.setupNativeEventListeners(),this.setupNativePushNotifications(),this.loadPage()}}),Zs={id:"contentcontainer"},xs={key:0,class:"loadingOverlay"},ei={key:1,class:"dragOverlay"},ti={class:"rounded border-dotted p-5 d-flex flex-gap-2 align-items-center"},si={key:3,id:"apphome"},ii={key:0,class:"mx-2 my-3 text-center"},ni={key:1,class:"mx-2 my-3 text-center"},oi={class:"warning3-color"},ri={key:0},ai={class:"text-muted mt-2 small"},li={key:1},di={class:"mb-3"},ui={key:2},ci={class:"my-2"},pi={class:"mb-2"},mi={key:3,class:"text-center"},fi={key:4},hi={class:"my-3 mx-2"},yi={class:"mt-4 text-center"},vi={key:1,class:"vertical-center"},gi={class:"container-fluid text-center"},bi=["href"],wi={key:0,class:"mt-4"},Ii=["href"],ki={key:1},Si={key:2,class:"t-minimenu"},Ti={class:"t-brand-logo mt-3 mb-1"},Ci={key:0,class:"text-center xsmall mt-1"},Ei={class:"d-flex justify-content-center mt-2"},$i=["title"],Ri={key:0,class:"bi bi-arrow-left-short"},Oi={class:"t-nav-items"},Pi={class:"t-nav-items-top"},Ai=["active"],_i={class:"t-menu-icon warning3-color"},Li=["active"],Mi={class:"t-menu-icon"},Di={class:"t-menu-icon iconClass"},Vi=["active"],Ui={class:"t-menu-icon"},Ni={class:"d-flex justify-content-center align-items-center"},Fi={class:"t-nav-items-bottom mb-2"},qi={key:0,id:"updateButton",class:"t-nav-item warning3-color",role:"button",title:"Update"},Bi=["href"],Hi={role:"button",class:"t-nav-item",title:"Notifications"},Wi={class:"t-menu-icon iconClass"},ji={class:"t-menu-icon iconClass"},zi={class:"d-flex justify-content-center align-items-center"},Qi={class:"t-menu-icon"},Ki={key:0,"data-test-id":"profileSettingsMenuButton",class:"ms-2"},Yi={class:"t-menu-icon iconClass",title:"Sync"},Gi={class:"ms-2"},Ji={class:"t-menu-icon iconClass"},Xi={key:0,class:"t-topdiv"},Zi={key:1},xi={key:2},en={key:4},tn={key:0,class:"menu-bottom d-flex align-items-center justify-content-between largerx ani-fade-in-fast"},sn={class:"t-menu-icon-bottom iconClassBottom"},nn={key:0},on={key:0,class:"ms-2"},rn={class:"m-1 d-flex align-items-center justify-content-around"},an={class:"t-menu-icon iconClass"},ln={class:"warning3-color"},dn={class:"t-menu-icon iconClass"},un={class:"t-menu-icon iconClass",title:"Sync"},cn={class:"ms-2"},pn={class:"t-menu-icon iconClass"},mn={class:"primary-color"};function fn(e,t,r,u,p,I){var ge,be,we;const S=y("b-spinner"),l=y("b-icon"),f=y("CompanionWidget"),w=y("BMsgModal"),$=y("b-link"),E=y("b-modal"),U=y("VerifyPassword"),ne=y("CreateCollection"),G=y("CreateOrEditNote"),W=y("AddItem"),oe=y("AddItemDefault"),re=y("VersionInfo"),ae=y("CreatePost"),h=y("SwitchUser"),M=y("WelcomeInfo"),L=y("WelcomeTour"),x=y("AppLogo"),j=y("TIcon"),J=y("router-link"),N=y("b-badge"),T=y("b-dropdown-item"),X=y("b-dropdown-divider"),le=y("b-dropdown"),ee=y("ProfileImage"),Le=y("b-nav-item-dropdown"),Me=y("b-nav"),ye=y("router-view"),De=y("Notifications"),Ve=y("BOffcanvas"),P=ce("b-modal"),ve=ce("b-toggle");return n(),a("div",{onDragenter:t[39]||(t[39]=O((...v)=>e.setActive&&e.setActive(...v),["prevent"])),onDragover:t[40]||(t[40]=O((...v)=>e.setActive&&e.setActive(...v),["prevent"])),onDrop:t[41]||(t[41]=O((...v)=>e.setInactive&&e.setInactive(...v),["prevent"])),id:"appcontainer"},[s("div",Zs,[e.uiStore.showLoadingOverlay?(n(),a("div",xs,[i(S,{label:"Loading..."})])):c("",!0),e.dragActive?(n(),a("div",ei,[s("div",{class:"dragOverlayText border rounded p-3 dark-color hoverow2",onDrop:t[1]||(t[1]=O((...v)=>e.onDrop&&e.onDrop(...v),["prevent"]))},[s("div",ti,[i(l,{icon:"upload",size:"is-large"}),t[42]||(t[42]=s("div",null,"Drop here to upload",-1)),s("div",null,[s("div",{role:"button",onClick:t[0]||(t[0]=v=>e.dragActive=!1),class:"p-2"},[i(l,{icon:"x-lg"})])])])],32)])):c("",!0),!e.pageWithoutMenu&&e.aiChatEnabled?(n(),m(f,{key:2})):c("",!0),i(w,{ref:"msgBoxConfirm"},null,512),e.mainLoaded&&!e.pageWithoutMenu?(n(),a("div",si,[e.loadingRoute&&!e.isNativeClient?(n(),a("div",{key:0,class:k(["loadingRouteBar",e.isMobile?"fade-in-fast":"fade-in-fast-delay"])},null,2)):c("",!0),i(E,{lazy:"true",id:"verify-email-modal",title:"Email Verification","hide-footer":""},{default:o(()=>{var v;return[(v=e.currentUser)!=null&&v.email?(n(),a("div",ii,[i(l,{icon:"exclamation-triangle"}),t[44]||(t[44]=g(" Please verify your email address by clicking the link in the email we sent you. You can request a new email by visiting ")),i($,{to:"/settings/loginprefs",onClick:t[2]||(t[2]=te=>e.closeModal("verify-email-modal"))},{default:o(()=>t[43]||(t[43]=[g("settings")])),_:1}),t[45]||(t[45]=g(". "))])):(n(),a("div",ni,[s("div",oi,[i(l,{icon:"exclamation-triangle"}),t[46]||(t[46]=g(" A valid email is required for admin users. "))]),t[48]||(t[48]=s("br",null,null,-1)),t[49]||(t[49]=g(" Please update your email in ")),i($,{to:"/settings/loginprefs",onClick:t[3]||(t[3]=te=>e.closeModal("verify-email-modal"))},{default:o(()=>t[47]||(t[47]=[g("settings")])),_:1}),t[50]||(t[50]=g(". "))]))]}),_:1}),i(E,{lazy:"true",id:"enter-password-modal",title:"Encryption Status","hide-footer":"","no-close-on-backdrop":""},{default:o(()=>{var v,te,Ie,ke,Se;return[(v=e.encStatus)!=null&&v.hasCachedPassword?(te=e.encStatus)!=null&&te.hasCachedPassword&&!((Ie=e.encStatus)!=null&&Ie.passwordSyncVerified)?(n(),a("div",li,[s("div",di,[t[56]||(t[56]=s("div",{class:"lead mb-2"}," Password out of sync with encryption keys. ",-1)),t[57]||(t[57]=g(" It appears you password has been reset and is no longer able to access your decryption keys. Please enter your ")),i($,{to:"/settings/encryption",onClick:t[6]||(t[6]=se=>e.closeModal("enter-password-modal"))},{default:o(()=>t[55]||(t[55]=[g("recovery key")])),_:1}),t[58]||(t[58]=g(" to fix. "))])])):(ke=e.encStatus)!=null&&ke.userEncEnabled&&((Se=e.encStatus)!=null&&Se.acntEncEnabled)?(n(),a("div",ui,[s("div",ci,[s("div",pi,[i(l,{icon:"check-circle",class:"me-1",style:{color:"green"}}),t[59]||(t[59]=g(" Encryption Enabled "))])])])):e.loadingEncStatus?(n(),a("div",mi,[i(S)])):e.loadingEncStatus?c("",!0):(n(),a("div",fi,[s("div",hi,[t[61]||(t[61]=g(" Encryption setup is not complete for your user. Please check your ")),i($,{to:"/settings/encryption",onClick:t[7]||(t[7]=se=>e.closeModal("enter-password-modal")),class:"linklike"},{default:o(()=>t[60]||(t[60]=[g("encryption settings")])),_:1})])])):(n(),a("div",ri,[t[54]||(t[54]=s("div",{class:"lead mb-2"}," Please enter your password to re-enable encryption. ",-1)),s("div",null,[i(U,{onClose:t[4]||(t[4]=se=>{e.closeModal("enter-password-modal"),e.refreshUI()})}),s("div",ai,[t[52]||(t[52]=g(" If you do not enter your password, encrypted items will not be accessible and new items will not be encypted. If you forgot your password, you can recover your data using your ")),i($,{to:"/settings/encryption",onClick:t[5]||(t[5]=se=>e.closeModal("enter-password-modal"))},{default:o(()=>t[51]||(t[51]=[g("recovery key")])),_:1}),t[53]||(t[53]=g(". "))])])])),s("div",yi,[i($,{to:"/settings/encryption",onClick:t[8]||(t[8]=se=>e.closeModal("enter-password-modal")),class:"mt-2 linklike px-2 py-1"},{default:o(()=>t[62]||(t[62]=[g("View Encryption Settings")])),_:1})])]}),_:1}),i(E,{lazy:"true",id:"migrate-tool-modal","hide-footer":"","no-close-on-backdrop":""},{default:o(()=>t[63]||(t[63]=[s("div",null,null,-1)])),_:1}),i(E,{lazy:"true",id:"add-collection-modal",title:"Create Collection","hide-footer":"","no-close-on-esc":"","no-close-on-backdrop":""},{default:o(()=>[i(ne,{allowChangeParent:!0,"parent-collection-id":e.currentSelectedCollectionId,onClose:t[9]||(t[9]=v=>{e.closeModal("add-collection-modal"),e.closeAddSite(v,"collection")})},null,8,["parent-collection-id"])]),_:1}),i(E,{lazy:"true",id:"add-note-modal",title:"Add Note","hide-footer":"",size:"lg","no-close-on-esc":"","no-close-on-backdrop":""},{default:o(()=>[i(G,{onClose:e.closeAddNote,parentCollectionId:e.currentSelectedCollectionId},null,8,["onClose","parentCollectionId"])]),_:1}),i(E,{lazy:"true",id:"add-item-modal",title:"Add Link","hide-footer":"",size:"lg","no-close-on-esc":"","no-close-on-backdrop":""},{default:o(()=>[i(W,{onClose:e.closeAddSite,collectionIds:e.currentSelectedCollectionId?[e.currentSelectedCollectionId]:[],"disable-search":!0},null,8,["onClose","collectionIds"])]),_:1}),i(E,{lazy:"true",id:"add-file-modal",title:"Add Item","hide-footer":"",size:"lg","no-close-on-esc":"","no-close-on-backdrop":""},{default:o(()=>[i(oe,{itemType:"thing",itemSubType:"file_group",onClose:e.closeFileModal,collectionIds:e.currentSelectedCollectionId?[e.currentSelectedCollectionId]:[]},null,8,["onClose","collectionIds"])]),_:1}),i(E,{lazy:"true",id:"version-status-modal",title:"Version Status","hide-footer":""},{default:o(()=>[i(re)]),_:1}),i(E,{lazy:"true",id:"create-post-modal",title:"Share","hide-footer":"",size:"lg","no-close-on-esc":"","no-close-on-backdrop":""},{default:o(()=>[i(ae,{onClose:t[10]||(t[10]=v=>e.closeModal("create-post-modal"))})]),_:1}),i(E,{lazy:"true",id:"switch-user-modal",title:"Switch User","hide-footer":"","no-close-on-backdrop":""},{default:o(()=>[i(h,{class:"fade-in-fast",onClose:t[11]||(t[11]=v=>e.closeModal("switch-user-modal"))})]),_:1}),i(E,{lazy:"true",id:"welcome-modal",title:"",modelValue:e.showWelcomeModal,"onUpdate:modelValue":t[13]||(t[13]=v=>e.showWelcomeModal=v),"header-class":"border-bottom-0","hide-footer":"",size:"lg","no-close-on-esc":"","no-close-on-backdrop":""},{default:o(()=>[s("div",null,[i(M,{onStartTour:t[12]||(t[12]=v=>{e.closeModal("welcome-modal"),e.showModal("tour-modal")})})])]),_:1},8,["modelValue"]),i(E,{lazy:"true",id:"tour-modal",title:"Kindredly Tour","header-class":"border-bottom-0","hide-footer":"",size:"xl","no-close-on-esc":"","no-close-on-backdrop":"",class:"vh-100"},{default:o(()=>[s("div",null,[i(L,{onClose:t[14]||(t[14]=v=>e.closeModal("tour-modal"))})])]),_:1}),!e.loading&&e.loadingError?(n(),a("div",vi,[s("div",gi,[s("a",{target:"_blank",href:e.config.serverHostname,title:"kindredly.ai"},[i(x)],8,bi),e.isOnline?(n(),a("div",wi,[t[64]||(t[64]=s("h3",null,":(",-1)),t[65]||(t[65]=s("br",null,null,-1)),t[66]||(t[66]=g(" Kindredly seems to be down. ")),s("a",{href:`${e.config.serverHostname}/status`},"Click here",8,Ii),t[67]||(t[67]=g(" to see why. ")),t[68]||(t[68]=s("br",null,null,-1)),t[69]||(t[69]=g(" We are very sorry for the inconvenience. "))])):(n(),a("div",ki,t[70]||(t[70]=[s("h3",null,"Internet Connection Problem.",-1),g(" You don't seem to be online. Please "),s("b",null,"check your internet connection",-1),g(" and try again. ")])))])])):c("",!0),e.isMobile?c("",!0):(n(),a("div",Si,t[71]||(t[71]=[s("div",{class:"d-flex align-items-center"},null,-1)]))),!e.isMobile&&!e.clientSettings.fullscreen&&e.currentUser&&!e.loading&&!e.loadingError?(n(),a("div",{key:3,class:k(["t-sidebar t-collapsible",e.isSidebarCollapsed?"t-collapsed":""])},[s("div",Ti,[s("div",{role:"button",onClick:t[15]||(t[15]=v=>e.navPath({path:"/",force:!0})),class:"btn-link d-flex flex-no-wrap align-items-center notextdecoration",title:"Kindredly Home"},[i(j,{class:k(["rotateonhover t-logo-sm t-collapsible",e.isSidebarCollapsed?"t-collapsed":""]),name:"kindred-simple2",width:40},null,8,["class"]),i(j,{class:k(["t-collapse-sm t-collapsible",e.isSidebarCollapsed?"t-collapsed":""]),name:"kindred-text-thin",width:180},null,8,["class"])])]),e.isCustomServer?(n(),a("div",Ci," Personal ")):c("",!0),s("div",Ei,[s("div",{role:"button",onClick:t[16]||(t[16]=(...v)=>e.toggleSidebar&&e.toggleSidebar(...v)),title:e.isSidebarCollapsed?"expand ":"collapse "},[e.isSidebarCollapsed?c("",!0):(n(),a("i",Ri)),t[72]||(t[72]=s("i",{class:"bi bi-list"},null,-1))],8,$i)]),s("div",Oi,[s("div",Pi,[e.isAdminUser&&!e.setupComplete?(n(),a("div",{key:0,role:"button",id:"accountSetupButton",class:k(["t-nav-item",{active:e.$route.name=="Explore"}]),active:e.$route.name=="AccountSetupPage",onClick:t[17]||(t[17]=v=>e.navPath({path:"/setup/account",force:!0})),title:"Resume Setup"},[s("div",_i,[i(l,{icon:"exclamation-circle-fill"})]),s("div",{class:k(["ms-2 t-collapse-sm t-collapsible text-nowrap warning3-color",e.isSidebarCollapsed?"t-collapsed":""])}," Resume Setup ",2)],10,Ai)):c("",!0),s("div",{id:"homeSidebarOption","data-test-id":"homeSidebarOption",role:"button",class:k(["t-nav-item",{active:e.$route.name=="Home"}]),active:e.$route.name=="Home",onClick:t[18]||(t[18]=v=>e.navPath({path:"/",force:!0})),title:"Home and Search"},[t[73]||(t[73]=s("div",{class:"t-menu-icon"},[s("i",{class:"bi bi-house"})],-1)),s("div",{class:k(["ms-2 t-collapse-sm t-collapsible text-nowrap",e.isSidebarCollapsed?"t-collapsed":""])}," Home ",2)],10,Li),i(J,{id:"librarySidebarOption",class:"t-nav-item",to:"/library/collections",active:["MyCollections","MyItems","Collection","Item","NewFeed"].includes(e.$route.name),title:"My Library"},{default:o(()=>[s("div",Mi,[i(j,{name:"library",width:16})]),s("div",{class:k(["ms-2 t-collapse-sm t-collapsible text-nowrap",e.isSidebarCollapsed?"t-collapsed":""])}," My Library ",2)]),_:1},8,["active"]),t[80]||(t[80]=s("div",{class:"t-menu-div t-short-hide"},null,-1)),i(J,{class:"t-nav-item",active:["FeedHome","ShareFeed","ViewFeedItemPage","RediscoverFeed","SubscriptionFeed"].includes(String(e.$route.name)),to:"/feeds/home",title:"My Feeds"},{default:o(()=>[s("div",Di,[i(l,{icon:"rss"}),s("span",null,[e.miscStats.unreadFeedItems>0?(n(),m(N,{key:0,variant:"primary"},{default:o(()=>[g(C(e.miscStats.unreadFeedItems),1)]),_:1})):c("",!0)])]),s("div",{class:k(["ms-2 t-collapse-sm t-collapsible text-nowrap",e.isSidebarCollapsed?"t-collapsed":""])}," Feeds ",2)]),_:1},8,["active"]),i(J,{id:"peopleSidebarOption",class:"t-nav-item",to:"/people",active:e.$route.name=="People",title:"Family and Friends"},{default:o(()=>[t[74]||(t[74]=s("div",{class:"t-menu-icon"},[s("i",{class:"bi bi-people"})],-1)),s("div",{class:k(["ms-2 t-collapse-sm t-collapsible text-nowrap",e.isSidebarCollapsed?"t-collapsed":""])}," Family and Friends ",2)]),_:1},8,["active"]),t[81]||(t[81]=s("div",{class:"t-menu-div t-short-hide"},null,-1)),e.isAdminUser&&!e.isCustomServer?(n(),a("div",{key:1,role:"button",id:"exploreSidebarOption",class:k(["t-nav-item",{active:e.$route.name=="Explore"}]),active:e.$route.name=="Explore"||e.$route.name=="SearchPublished",onClick:t[19]||(t[19]=v=>e.navPath({path:"/searchPublished",force:!0})),title:"Explore published content "},[s("div",Ui,[i(l,{icon:"compass"})]),s("div",{class:k(["ms-2 t-collapse-sm t-collapsible text-nowrap",e.isSidebarCollapsed?"t-collapsed":""])}," Explore ",2)],10,Vi)):c("",!0),i(le,{id:"newSidebarOption","data-test-id":"newSidebarOption",right:"","no-caret":"",variant:e.$route.name=="Collection"?"secondary":"primary",title:"New ",class:"d-flex justify-content-center align-items-center mx-2 mt-3","toggle-class":e.isSidebarCollapsed?"py-2 px-1 circle":" py-2 px-1"},{"button-content":o(()=>[s("div",Ni,[i(l,{icon:"plus-lg"}),s("div",{class:k(["ms-2 t-collapse-sm t-collapsible text-nowrap",e.isSidebarCollapsed?"t-collapsed":""])}," New ",2)])]),default:o(()=>[R((n(),m(T,{id:"newPostOption"},{default:o(()=>[i(l,{icon:"share"}),t[75]||(t[75]=s("span",{class:"ms-2"},"Post",-1))]),_:1})),[[P,void 0,void 0,{"create-post-modal":!0}]]),i(X),R((n(),m(T,{id:"newItemOption"},{default:o(()=>[i(l,{"data-test-id":"newLinkOption",icon:"link"}),t[76]||(t[76]=s("span",{class:"ms-2"},"Link ",-1))]),_:1})),[[P,void 0,void 0,{"add-item-modal":!0}]]),R((n(),m(T,{id:"newNoteOption"},{default:o(()=>[i(l,{icon:"journal-text"}),t[77]||(t[77]=s("span",{class:"ms-2"},"Note ",-1))]),_:1})),[[P,void 0,void 0,{"add-note-modal":!0}]]),R((n(),m(T,{id:"newFileOption"},{default:o(()=>[i(l,{icon:"file"}),t[78]||(t[78]=s("span",{class:"ms-2"},"File / Other",-1))]),_:1})),[[P,void 0,void 0,{"add-file-modal":!0}]]),i(X),R((n(),m(T,{id:"new_collection_option"},{default:o(()=>[i(l,{"data-test-id":"newCollectionOption",icon:"collection"}),t[79]||(t[79]=s("span",{class:"ms-2"},"Collection ",-1))]),_:1})),[[P,void 0,void 0,{"add-collection-modal":!0}]])]),_:1},8,["variant","toggle-class"])]),s("div",Fi,[s("div",null,[(ge=e.versionSummary)!=null&&ge.success&&e.versionSummary.newerClientVersionAvailable?R((n(),a("div",qi,[t[82]||(t[82]=s("div",{class:"t-menu-icon"},[s("i",{class:"bi bi-exclamation-triangle"})],-1)),s("div",{class:k(["ms-2 t-collapse-sm t-collapsible text-nowrap",e.isSidebarCollapsed?"t-collapsed":""])}," Update Available ",2)])),[[P,void 0,void 0,{"version-status-modal":!0}]]):c("",!0),e.isBrowserMode?(n(),a("a",{key:1,id:"downloadSidebarOption",class:"t-nav-item",href:`${e.config.serverHostname}/download`,target:"_blank",title:"Download Kindredly "},[t[83]||(t[83]=s("div",{class:"t-menu-icon"},[s("i",{class:"bi bi-download"})],-1)),s("div",{class:k(["ms-2 t-collapse-sm t-collapsible text-nowrap",e.isSidebarCollapsed?"t-collapsed":""])}," Download ",2)],8,Bi)):c("",!0),R((n(),a("div",Hi,[s("div",Wi,[t[84]||(t[84]=s("i",{class:"bi bi-bell-fill"},null,-1)),s("span",null,[e.miscStats.notificationCountUnread>0?(n(),m(N,{key:0,variant:"primary"},{default:o(()=>[g(C(e.miscStats.notificationCountUnread),1)]),_:1})):c("",!0)])]),s("div",{class:k(["ms-2 t-collapse-sm t-collapsible text-nowrap",e.isSidebarCollapsed?"t-collapsed":""])}," Notifications ",2)])),[[ve,void 0,void 0,{"notification-bar":!0}]])]),s("div",{class:k(e.isSidebarCollapsed?"":"d-flex flex-wrap flex-gap-sm justify-content-center mt-2")},[e.darkMode?(n(),a("div",{key:0,role:"button",class:"t-nav-item-mini bw-color",onClick:t[20]||(t[20]=v=>e.setUIMode("light")),title:"light mode"},t[85]||(t[85]=[s("div",{class:"t-menu-icon"},[s("i",{class:"bi bi-sun-fill"})],-1)]))):(n(),a("div",{key:1,role:"button",class:"t-nav-item-mini bw-color",onClick:t[21]||(t[21]=v=>e.setUIMode("dark")),title:"dark mode"},t[86]||(t[86]=[s("div",{class:"t-menu-icon"},[s("i",{class:"bi bi-moon-fill"})],-1)]))),e.isAdminUser?(n(),m(J,{key:2,class:"t-nav-item-mini bw-color",to:"/settings/useraccessrequests",title:"Access Requests"},{default:o(()=>[s("div",ji,[t[87]||(t[87]=s("i",{class:"bi bi-key"},null,-1)),s("span",null,[e.miscStats.accessRequestCount>0?(n(),m(N,{key:0,variant:"primary"},{default:o(()=>[g(C(e.miscStats.accessRequestCount),1)]),_:1})):c("",!0)])])]),_:1})):c("",!0),e.isAdminUser&&e.encStatus&&(!((be=e.encStatus)!=null&&be.userEncEnabled)||!((we=e.encStatus)!=null&&we.acntEncEnabled))?(n(),m(J,{key:3,class:"t-nav-item-mini bw-color",to:"/settings/encryption",title:"Encryption Settings"},{default:o(()=>t[88]||(t[88]=[s("div",{class:"t-menu-icon iconClass"},[s("i",{class:"bi bi-unlock",style:{color:"rgb(247, 192, 75)"}})],-1)])),_:1})):c("",!0),s("div",{role:"button",class:"t-nav-item-mini",onClick:t[22]||(t[22]=v=>e.refreshUI()),title:"Sync"},[s("div",{class:k(["t-menu-icon iconClass",e.indexRebuilding?"icon-rotate-animation ":""])},[i(l,{icon:"arrow-repeat"})],2)])],2),i(Me,{class:"t-profilebar",title:e.currentUser?e.currentUser.displayedName||e.currentUser.username:"...loading"},{default:o(()=>[i(Le,{right:"","no-caret":""},{"button-content":o(()=>[s("div",zi,[s("span",Qi,[i(ee,{class:"profileImageOnHome",profileImage:e.currentProfileImage,showCircle:!1,width:32},null,8,["profileImage"])]),e.currentUser?(n(),a("span",{key:0,class:k(["ms-2 t-collapse-sm t-collapsible",e.isSidebarCollapsed?"t-collapsed":""])},C(e.currentUser.displayedName||e.currentUser.username),3)):c("",!0),s("span",{class:k(["ms-1 t-collapse-sm t-collapsible",e.isSidebarCollapsed?"t-collapsed":""])},t[89]||(t[89]=[s("i",{class:"bi bi-three-dots","font-scale":"0.95"},null,-1)]),2)])]),default:o(()=>[i(T,{to:"/settings/loginprefs?menu=true"},{default:o(()=>[i(ee,{profileImage:e.currentProfileImage,width:35},null,8,["profileImage"]),e.currentUser?(n(),a("span",Ki,[s("span",null,[s("b",null,C(e.currentUser.displayedName||e.currentUser.username),1)])])):c("",!0)]),_:1}),t[103]||(t[103]=s("div",{class:"dropdown-divider"},null,-1)),e.versionSummary&&e.versionSummary.success&&e.versionSummary.newerVersionAvailable?R((n(),m(T,{key:0,class:"alert-danger"},{default:o(()=>t[90]||(t[90]=[s("i",{class:"bi bi-exclamation-triangle"},null,-1),s("span",{class:"ms-2"}," Update Available ",-1)])),_:1})),[[P,void 0,void 0,{"version-status-modal":!0}]]):c("",!0),i(T,{to:"/settings/loginprefs?menu=true"},{default:o(()=>[i(l,{icon:"gear"}),t[91]||(t[91]=s("span",{class:"ms-2"}," Settings ",-1))]),_:1}),e.isAdminUser?c("",!0):(n(),m(T,{key:1,to:"/settings/accessrequests"},{default:o(()=>t[92]||(t[92]=[s("span",{class:"t-menu-icon iconClass"},[s("i",{class:"bi bi-key"})],-1),s("span",{class:"ms-2"}," My Requests",-1)])),_:1})),i(T,{onClick:t[23]||(t[23]=v=>e.refreshUI())},{default:o(()=>[s("span",Yi,[i(l,{icon:"arrow-repeat"})]),s("span",Gi,C(e.indexRebuilding?" Syncing...":" Sync"),1)]),_:1}),e.isAdminUser?(n(),a(D,{key:2},[t[95]||(t[95]=s("div",{class:"dropdown-divider"},null,-1)),R((n(),m(T,null,{default:o(()=>[i(l,{icon:"play"}),t[93]||(t[93]=s("span",{class:"ms-2"}," Welcome Tour",-1))]),_:1})),[[P,void 0,void 0,{"welcome-modal":!0}]]),e.setupComplete?c("",!0):(n(),m(T,{key:0,to:"/setup/account"},{default:o(()=>[i(l,{class:"warning3-color",icon:"hand-index"}),t[94]||(t[94]=s("span",{class:"ms-2 warning3-color"}," Resume Setup",-1))]),_:1}))],64)):c("",!0),i(X),i(T,{id:"peopleDropDownLinkMain",onClick:t[24]||(t[24]=v=>e.navPath({path:"/people",force:!0}))},{default:o(()=>[s("span",Ji,[i(l,{icon:"people"})]),t[96]||(t[96]=s("span",{class:"ms-2"}," Family/Friends",-1))]),_:1}),R((n(),m(T,null,{default:o(()=>t[97]||(t[97]=[s("i",{class:"bi bi-arrow-left-right"},null,-1),s("span",{class:"ms-2"}," Switch User",-1)])),_:1})),[[P,void 0,void 0,{"switch-user-modal":!0}]]),e.isBrowserMode||e.isAdminUser?(n(),m(T,{key:3,onClick:t[25]||(t[25]=v=>e.signout())},{default:o(()=>t[98]||(t[98]=[s("i",{class:"bi bi-door-open"},null,-1),s("span",{class:"ms-2"}," Sign Out ",-1)])),_:1})):c("",!0),t[104]||(t[104]=s("div",{class:"dropdown-divider"},null,-1)),e.config.distMarketplace!="apple"?(n(),m(T,{key:4,href:`${e.config.serverHostname}/support`,target:"_blank"},{default:o(()=>[i(l,{icon:"emoji-smile"}),t[99]||(t[99]=s("span",{class:"ms-2"}," Support Kindredly",-1))]),_:1},8,["href"])):c("",!0),i(T,{to:"/help",target:"_blank"},{default:o(()=>[i(l,{icon:"question-circle"}),t[100]||(t[100]=s("span",{class:"ms-2"}," Help",-1))]),_:1}),e.isBrowserMode?(n(),m(T,{key:5,href:`${e.config.serverHostname}/download`,target:"_blank"},{default:o(()=>t[101]||(t[101]=[s("i",{class:"bi bi-download"},null,-1),s("span",{class:"ms-2"}," Download",-1)])),_:1},8,["href"])):c("",!0),i(T,{href:`${e.config.serverHostname}`,target:"_blank"},{default:o(()=>[i(j,{name:"kindred-simple2",width:16}),t[102]||(t[102]=s("span",{class:"ms-2"}," Kindredly.ai",-1))]),_:1},8,["href"])]),_:1})]),_:1},8,["title"])])])],2)):c("",!0),s("main",{id:"t-main",class:k(["t-main t-collapsible",e.tMainClasses]),style:{"min-height":"600px"}},[s("div",{class:k(e.$route.path.startsWith("/settings")?"":"t-content")},[e.$route.name!="Home"&&e.clientSettings.fullscreen?(n(),a("div",Xi)):e.$route.name!="Home"?(n(),a("div",Zi)):(n(),a("div",xi)),(n(),m(ye,{key:e.$route.fullPath,onUpdateData:e.loadPage,class:""},{default:o(({Component:v})=>[i($e,{name:e.isMobile?e.transitionName:"fade-in-page",mode:"out-in",appear:""},{default:o(()=>[(n(),m(Ee(v)))]),_:2},1032,["name"])]),_:1},8,["onUpdateData"])),t[105]||(t[105]=s("div",{class:"bottom-gap-sm"},null,-1))],2)],2)])):(n(),a("div",en,[(n(),m(ye,{key:e.$route.fullPath,onUpdateData:e.loadPage},{default:o(({Component:v})=>[i($e,{name:e.transitionName,mode:"out-in",appear:""},{default:o(()=>[(n(),m(Ee(v)))]),_:2},1032,["name"])]),_:1},8,["onUpdateData"]))])),i(Ve,{id:"notification-bar",title:"Notifications",modelValue:e.notificationVisible,"onUpdate:modelValue":t[26]||(t[26]=v=>e.notificationVisible=v),placement:"end"},{default:o(()=>[e.notificationVisible?(n(),m(De,{key:0})):c("",!0)]),_:1},8,["modelValue"])]),e.isMobile&&e.currentUser?(n(),a("nav",tn,[s("div",{role:"button",class:k(["tab-menu-button text-center",{active:["Search","Home"].includes(e.$route.name)}]),onClick:t[27]||(t[27]=v=>e.navPath({path:"/",force:!0}))},t[106]||(t[106]=[s("i",{class:"bi bi-house"},null,-1)]),2),s("div",{role:"button","data-test-id":"librarySidebarButton",class:k(["tab-menu-button text-center",{active:["MyCollections","MyItems","Collection","Item"].includes(e.$route.name)}]),onClick:t[28]||(t[28]=v=>e.navPath({path:"/library",force:!0}))},[i(j,{name:"library",width:24,class:""})],2),s("div",{role:"button",class:k(["tab-menu-button text-center",{active:["FeedHome","ShareFeed","MyFeedHome","SubscriptionFeed","RediscoverFeed"].includes(e.$route.name)}]),onClick:t[29]||(t[29]=v=>e.navPath({path:"/feeds/home",force:!0}))},[s("div",sn,[i(l,{icon:"rss"}),s("span",null,[e.miscStats.unreadFeedItems>0?(n(),m(N,{key:0,variant:"primary"},{default:o(()=>[g(C(e.miscStats.unreadFeedItems),1)]),_:1})):c("",!0)])])],2),e.isAdminUser&&!e.isCustomServer?(n(),a("div",{key:0,role:"button",class:k(["tab-menu-button text-center",{active:["Explore","SearchPublished"].includes(e.$route.name)}]),onClick:t[30]||(t[30]=v=>e.navPath({path:"/searchPublished",force:!0})),title:"Explore published content "},[i(l,{icon:"compass"})],2)):c("",!0),i(le,{right:"","no-caret":"",variant:e.$route.name=="Collection"?"secondary":"primary","toggle-class":"btn-circle-md  larger d-flex align-items-center justify-content-center shadow  white-color  ",title:"New ",class:"p"},{"button-content":o(()=>[i(l,{class:"white-color",icon:"plus-lg"})]),default:o(()=>[R((n(),m(T,null,{default:o(()=>[i(l,{icon:"share"}),t[107]||(t[107]=s("span",{class:"ms-2"},"Post",-1))]),_:1})),[[P,void 0,void 0,{"create-post-modal":!0}]]),i(X),R((n(),m(T,{id:"new_item_option"},{default:o(()=>[i(l,{icon:"link"}),t[108]||(t[108]=s("span",{class:"ms-2"},"Link ",-1))]),_:1})),[[P,void 0,void 0,{"add-item-modal":!0}]]),R((n(),m(T,{id:"new_note_option"},{default:o(()=>[i(l,{icon:"journal-text"}),t[109]||(t[109]=s("span",{class:"ms-2"},"Note ",-1))]),_:1})),[[P,void 0,void 0,{"add-note-modal":!0}]]),R((n(),m(T,{id:"newFileOption"},{default:o(()=>[i(l,{icon:"file"}),t[110]||(t[110]=s("span",{class:"ms-2"},"File / Other",-1))]),_:1})),[[P,void 0,void 0,{"add-file-modal":!0}]]),i(X),R((n(),m(T,{id:"new_collection_option"},{default:o(()=>[i(l,{icon:"collection"}),t[111]||(t[111]=s("span",{class:"ms-2"},"Collection ",-1))]),_:1})),[[P,void 0,void 0,{"add-collection-modal":!0}]])]),_:1},8,["variant"]),e.isAdminUser&&!e.setupComplete?(n(),a("div",{key:1,onClick:t[31]||(t[31]=v=>e.navPath({path:"/setup/account",force:!0})),class:"tab-menu-button text-center warning3-color"},[i(l,{icon:"hand-index"})])):c("",!0),e.isNativeClient&&!e.isAdminUser?(n(),a("div",{key:2,role:"button",class:"tab-menu-button text-center primary-color larger circle",onClick:t[32]||(t[32]=v=>e.openBrowser()),title:"Open Browser"},[i(l,{icon:"globe2"})])):c("",!0),i(le,{right:"","no-caret":"",variant:"link","toggle-class":"  noborder "},{"button-content":o(()=>[s("div",null,[i(ee,{profileImage:e.currentProfileImage,width:30},null,8,["profileImage"]),e.miscStats.notificationCountUnread>0||e.miscStats.accessRequestCount>0?(n(),a("div",nn,[e.miscStats.notificationCountUnread>0?(n(),m(N,{key:0,variant:"primary",class:"mm"},{default:o(()=>t[112]||(t[112]=[s("i",{class:"bi bi-bell-fill"},null,-1)])),_:1})):c("",!0),e.isAdminUser&&e.miscStats.accessRequestCount>0?(n(),m(N,{key:1,variant:"primary",class:"mm"},{default:o(()=>t[113]||(t[113]=[s("i",{class:"bi bi-key"},null,-1)])),_:1})):c("",!0)])):c("",!0)])]),default:o(()=>[i(T,{to:"/settings/loginprefs?menu=true"},{default:o(()=>[i(ee,{profileImage:e.currentProfileImage,width:35},null,8,["profileImage"]),e.currentUser?(n(),a("span",on,[s("b",null,C(e.currentUser.displayedName||e.currentUser.username),1)])):c("",!0)]),_:1}),t[130]||(t[130]=s("div",{class:"dropdown-divider"},null,-1)),s("div",rn,[e.darkMode?(n(),a("div",{key:0,role:"button",onClick:t[33]||(t[33]=v=>e.setUIMode("light")),title:"light mode"},t[114]||(t[114]=[s("div",{class:"t-menu-icon"},[s("i",{class:"bi bi-sun-fill"})],-1)]))):(n(),a("div",{key:1,role:"button",onClick:t[34]||(t[34]=v=>e.setUIMode("dark")),title:"dark mode"},t[115]||(t[115]=[s("div",{class:"t-menu-icon"},[s("i",{class:"bi bi-moon-fill"})],-1)]))),R((n(),a("div",null,[s("span",an,[t[116]||(t[116]=s("i",{class:"bi bi-bell"},null,-1)),s("span",null,[e.miscStats.notificationCountUnread>0?(n(),m(N,{key:0,variant:"primary"},{default:o(()=>[g(C(e.miscStats.notificationCountUnread),1)]),_:1})):c("",!0)])])])),[[ve,void 0,void 0,{"notification-bar":!0}]])]),t[131]||(t[131]=s("div",{class:"dropdown-divider"},null,-1)),e.isAdminUser&&!e.setupComplete?(n(),m(T,{key:0,to:"/setup/account"},{default:o(()=>[s("span",ln,[i(l,{icon:"hand-index"}),t[117]||(t[117]=s("span",{class:"ms-2"},"Resume Setup",-1))])]),_:1})):c("",!0),i(T,{to:"/settings/loginprefs?menu=true"},{default:o(()=>[s("span",dn,[i(l,{icon:"gear"})]),t[118]||(t[118]=s("span",{class:"ms-2"},"Settings",-1))]),_:1}),i(T,{onClick:t[35]||(t[35]=v=>e.refreshUI())},{default:o(()=>[s("span",un,[i(l,{icon:"arrow-repeat"})]),s("span",cn,C(e.indexRebuilding?"Syncing...":"Sync"),1)]),_:1}),t[132]||(t[132]=s("div",{class:"dropdown-divider"},null,-1)),e.isAdminUser?c("",!0):(n(),m(T,{key:1,to:"/settings/accessrequests"},{default:o(()=>t[119]||(t[119]=[s("span",{class:"t-menu-icon iconClass"},[s("i",{class:"bi bi-key"})],-1),s("span",{class:"ms-2"},"My Requests",-1)])),_:1})),e.isAdminUser?(n(),m(T,{key:2,to:"/settings/useraccessrequests"},{default:o(()=>[s("span",pn,[t[120]||(t[120]=s("i",{class:"bi bi-key"},null,-1)),e.miscStats.accessRequestCount>0?(n(),m(N,{key:0,variant:"primary"},{default:o(()=>[g(C(e.miscStats.accessRequestCount),1)]),_:1})):c("",!0)]),t[121]||(t[121]=s("span",{class:"ms-2"},"Access Requests",-1))]),_:1})):c("",!0),i(T,{id:"peopleDropDownLink",onClick:t[36]||(t[36]=v=>e.navPath({path:"/people",force:!0}))},{default:o(()=>t[122]||(t[122]=[s("span",{class:"t-menu-icon iconClass"},[s("i",{class:"bi bi-people"})],-1),s("span",{class:"ms-2"},"Family/Friends",-1)])),_:1}),t[133]||(t[133]=s("div",{class:"dropdown-divider"},null,-1)),R((n(),m(T,null,{default:o(()=>t[123]||(t[123]=[s("span",{class:"t-menu-icon iconClass"},[s("i",{class:"bi bi-arrow-left-right"})],-1),s("span",{class:"ms-2"},"Switch User",-1)])),_:1})),[[P,void 0,void 0,{"switch-user-modal":!0}]]),e.isBrowserMode||e.isAdminUser?(n(),m(T,{key:3,onClick:t[37]||(t[37]=v=>e.signout())},{default:o(()=>t[124]||(t[124]=[s("span",{class:"t-menu-icon iconClass"},[s("i",{class:"bi bi-door-open"})],-1),s("span",{class:"ms-2"},"Sign Out ",-1)])),_:1})):c("",!0),e.isAdminUser?(n(),a(D,{key:4},[t[126]||(t[126]=s("div",{class:"dropdown-divider"},null,-1)),R((n(),m(T,null,{default:o(()=>[i(l,{icon:"play"}),t[125]||(t[125]=s("span",{class:"ms-2"},"Welcome Tour",-1))]),_:1})),[[P,void 0,void 0,{"welcome-modal":!0}]])],64)):c("",!0),e.aiChatEnabled?(n(),m(T,{key:5,onClick:t[38]||(t[38]=v=>e.setCompanionOpen(!0)),title:"Chatbot"},{default:o(()=>[s("div",mn,[i(l,{icon:"robot"}),t[127]||(t[127]=s("span",{class:"ms-2"},"Kinbot",-1))])]),_:1})):c("",!0),t[134]||(t[134]=s("div",{class:"dropdown-divider"},null,-1)),e.config.distMarketplace!="apple"?(n(),m(T,{key:6,href:`${e.config.serverHostname}/support`,target:"_blank"},{default:o(()=>[i(l,{icon:"emoji-smile"}),t[128]||(t[128]=s("span",{class:"ms-2"},"Support Kindredly",-1))]),_:1},8,["href"])):c("",!0),i(T,{href:`${e.config.serverHostname}`,target:"_blank"},{default:o(()=>[i(l,{icon:"globe"}),t[129]||(t[129]=s("span",{class:"ms-2"},"kindredly.ai",-1))]),_:1},8,["href"])]),_:1})])):c("",!0)],32)}const hn=Q(Xs,[["render",fn]]);ie.serviceWorkerEnabled&&"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{e.active&&(console.log("SW: sending message from client"),e.active.postMessage("Hello from the main app!"))}).catch(e=>{console.error("Service Worker registration failed:",e)})});tt(!0).then(()=>{const e=rt(hn);e.use(he),st(e),e.use(ft,{position:"top-right",autoClose:3e3,disabledEnterTransition:!0,hideProgressBar:!0}),e.use(mt),e.mixin({data:function(){return{appName:"home"}}}),e.mixin(K),e.use(dt()),e.mount("#app")});export{An as R,kt as T,_,On as a,_n as b,Pn as c,Mn as g,Ln as s};
